{"version":3,"file":"index.js","sources":["src/node/Node.js","src/mode.js","src/style/unit.js","src/node/Xom.js","src/style/font.js","src/style/reset.js","src/util.js","src/style/css.js","src/node/LineBox.js","src/node/Text.js","src/node/LineGroup.js","src/geom/Geom.js","src/node/Dom.js","src/domDiff.js","src/node/Root.js","src/geom/Line.js","src/geom/Polyline.js","src/geom/Polygon.js","src/geom/Sector.js","src/geom/Rect.js","src/geom/Circle.js","src/geom/Ellipse.js","src/geom/Grid.js","src/index.js"],"sourcesContent":["class Node {\n  constructor() {\n    this.__x = 0;\n    this.__y = 0;\n    this.__ox = 0; // relative或transform造成的偏移量\n    this.__oy = 0;\n    this.__width = 0;\n    this.__height = 0;\n    this.__prev = null;\n    this.__next = null;\n    this.__ctx = null; // canvas的context\n    this.__parent = null;\n    this.__style = {}; // style被解析后的k-v形式\n    this.__baseLine = 0;\n    this.__virtualDom = {};\n  }\n\n  __offsetX(diff) {\n    this.__ox += diff;\n  }\n\n  __offsetY(diff) {\n    this.__oy += diff;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get ox() {\n    return this.__ox;\n  }\n  get oy() {\n    return this.__oy;\n  }\n  get rx() {\n    return this.x + this.ox;\n  }\n  get ry() {\n    return this.y + this.oy;\n  }\n  get width() {\n    return this.__width;\n  }\n  get height() {\n    return this.__height;\n  }\n  get outerWidth() {\n    return this.__width;\n  }\n  get outerHeight() {\n    return this.__height;\n  }\n  get prev() {\n    return this.__prev;\n  }\n  get next() {\n    return this.__next;\n  }\n  get parent() {\n    return this.__parent;\n  }\n  get style() {\n    return this.__style;\n  }\n  get ctx() {\n    return this.__ctx;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n}\n\nexport default Node;\n","const CANVAS = 0;\nconst SVG = 1;\n\nlet div;\n\nexport default {\n  CANVAS,\n  SVG,\n  measure(s, style) {\n    if(!div) {\n      div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '99999px';\n      div.style.top = '-99999px';\n      div.style.visibility = 'hidden';\n      document.body.appendChild(div);\n    }\n    div.style.fontSize = style.fontSize + 'px';\n    div.innerText = s;\n    let css = window.getComputedStyle(div, null);\n    return parseFloat(css.width);\n  }\n};\n","export default {\n  AUTO: 0,\n  PX: 1,\n  PERCENT: 2,\n};\n","import Node from './Node';\nimport mode from '../mode';\nimport unit from '../style/unit';\n\nfunction arr2hash(arr) {\n  let hash = {};\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(Array.isArray(item)) {\n      hash[item[0]] = item[1];\n    }\n    else {\n      for(let list = Object.keys(item), j = list.length - 1; j >= 0; j--) {\n        let k = list[j];\n        hash[k] = item[k];\n      }\n    }\n  }\n  return hash;\n}\n\nfunction hash2arr(hash) {\n  let arr = [];\n  for(let list = Object.keys(hash), i = 0, len = list.length; i < len; i++) {\n    let k = list[i];\n    arr.push([k, hash[k]]);\n  }\n  return arr;\n}\n\nfunction spread(arr) {\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(!Array.isArray(item)) {\n      let temp = [];\n      for(let list = Object.keys(item), j = 0, len = list.length; j < len; j++) {\n        let k = list[j];\n        temp.push([k, item[k]]);\n      }\n      arr.splice(i, 1, ...temp);\n    }\n  }\n  return arr;\n}\n\nclass Xom extends Node {\n  constructor(tagName, props) {\n    super();\n    props = props || [];\n    // 构建工具中都是arr，手写可能出现hash情况\n    if(Array.isArray(props)) {\n      this.props = arr2hash(props);\n      this.__props = spread(props);\n    }\n    else {\n      this.props = props;\n      this.__props = hash2arr(props);\n    }\n    this.__tagName = tagName;\n    this.__style = this.props.style || {}; // style被解析后的k-v形式\n    this.__listener = {};\n    this.__props.forEach(item => {\n      let k = item[0];\n      if(/^on[a-zA-Z]/.test(k)) {\n        this.__listener[k.slice(2).toLowerCase()] = item[1];\n      }\n    });\n    // margin和padding的宽度\n    this.__mtw = 0;\n    this.__mrw = 0;\n    this.__mbw = 0;\n    this.__mlw = 0;\n    this.__ptw = 0;\n    this.__prw = 0;\n    this.__pbw = 0;\n    this.__plw = 0;\n  }\n\n  __layout(data) {\n    let { w } = data;\n    let { style: {\n      display,\n      width,\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n    } } = this;\n    if(display === 'none') {\n      return;\n    }\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    this.__mlw = this.__mpWidth(marginLeft, w);\n    this.__mtw = this.__mpWidth(marginTop, w);\n    this.__mrw = this.__mpWidth(marginRight, w);\n    this.__mbw = this.__mpWidth(marginBottom, w);\n    this.__plw = this.__mpWidth(paddingLeft, w);\n    this.__ptw = this.__mpWidth(paddingTop, w);\n    this.__prw = this.__mpWidth(paddingRight, w);\n    this.__pbw = this.__mpWidth(paddingBottom, w);\n    if(display === 'block') {\n      this.__layoutBlock(data);\n    }\n    else if(display === 'flex') {\n      this.__layoutFlex(data);\n    }\n    else if(display === 'inline') {\n      this.__layoutInline(data);\n    }\n  }\n\n  // 获取margin/padding的实际值\n  __mpWidth(mp, w) {\n    if(mp.unit === unit.PX) {\n      return mp.value;\n    }\n    else if(mp.unit === unit.PERCENT) {\n      return mp.value * w * 0.01;\n    }\n    return 0;\n  }\n\n  render(renderMode) {\n    this.__virtualDom = {\n      bb: [],\n    };\n    let { ctx, style, width, height, mlw, mtw, plw, ptw, prw, pbw, virtualDom } = this;\n    let {\n      display,\n      position,\n      top,\n      right,\n      bottom,\n      left,\n      backgroundColor,\n      borderTopWidth,\n      borderTopColor,\n      borderTopStyle,\n      borderRightWidth,\n      borderRightColor,\n      borderRightStyle,\n      borderBottomWidth,\n      borderBottomColor,\n      borderBottomStyle,\n      borderLeftWidth,\n      borderLeftColor,\n      borderLeftStyle,\n      transform,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    // 除root节点外relative渲染时做偏移，百分比基于父元素，若父元素没有一定高则为0\n    if(position === 'relative' && this.parent) {\n      let { width, height } = this.parent;\n      let h = this.parent.style.height;\n      if(left.unit !== unit.AUTO) {\n        let diff = left.unit === unit.PX ? left.value : left.value * width * 0.01;\n        this.__offsetX(diff);\n      }\n      else if(right.unit !== unit.AUTO) {\n        let diff = right.unit === unit.PX ? right.value : right.value * width * 0.01;\n        this.__offsetX(-diff);\n      }\n      if(top.unit !== unit.AUTO) {\n        let diff = top.unit === unit.PX ? top.value : top.value * height * 0.01 * (h.unit === unit.AUTO ? 0 : 1);\n        this.__offsetY(diff);\n      }\n      else if(bottom.unit !== unit.AUTO) {\n        let diff = bottom.unit === unit.PX ? bottom.value : bottom.value * height * 0.01 * (h.unit === unit.AUTO ? 0 : 1);\n        this.__offsetY(-diff);\n      }\n    }\n    // translate相对于自身\n    if(transform) {\n      let { translateX, translateY } = transform;\n      if(translateX) {\n        let diff = translateX.unit === unit.PX ? translateX.value : translateX.value * width * 0.01;\n        this.__offsetX(diff);\n      }\n      if(translateY) {\n        let diff = translateY.unit === unit.PX ? translateY.value : translateY.value * height * 0.01;\n        this.__offsetY(diff);\n      }\n    }\n    let { rx: x, ry: y } = this;\n    x += mlw;\n    y += mtw;\n    if(backgroundColor) {\n      let x1 = x;\n      if(borderLeftWidth) {\n        x1 += borderLeftWidth.value;\n      }\n      let y1 = y;\n      if(borderTopWidth) {\n        y1 += borderTopWidth.value;\n      }\n      let w = width + plw + prw;\n      let h = height + ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.fillStyle = backgroundColor;\n        ctx.rect(x1, y1, w, h);\n        ctx.fill();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        virtualDom.bb.push({\n          type: 'item',\n          tagName: 'rect',\n          props: [\n            ['x', x1],\n            ['y', y1],\n            ['width', w],\n            ['height', h],\n            ['fill', backgroundColor]\n          ],\n        });\n      }\n    }\n    if(borderTopWidth.value) {\n      let x1 = x + borderLeftWidth.value;\n      let y1 = y + borderTopWidth.value * 0.5;\n      let x2 = x1 + width;\n      x2 += plw + prw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderTopWidth.value;\n        ctx.strokeStyle = borderTopColor;\n        if(borderTopStyle === 'dashed') {\n          ctx.setLineDash([borderTopWidth.value * 3, borderTopWidth.value * 2]);\n        }\n        else if(borderTopStyle === 'dotted') {\n          ctx.setLineDash([borderTopWidth.value, borderTopWidth.value]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y1);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y1],\n            ['stroke-width', borderTopWidth.value],\n            ['stroke', borderTopColor]\n          ],\n        };\n        if(borderTopStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderTopWidth.value * 3}, ${borderTopWidth.value * 2}`])\n        }\n        else if(borderTopStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderTopWidth.value}, ${borderTopWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderRightWidth.value) {\n      let x1 = x + width + borderLeftWidth.value + borderRightWidth.value * 0.5;\n      let y1 = y;\n      let y2 = y1 + height + borderTopWidth.value + borderBottomWidth.value;\n      x1 += plw + prw;\n      y2 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderRightWidth.value;\n        ctx.strokeStyle = borderRightColor;\n        if(borderRightStyle === 'dashed') {\n          ctx.setLineDash([borderRightWidth.value * 3, borderRightWidth.value * 2]);\n        }\n        else if(borderRightStyle === 'dotted') {\n          ctx.setLineDash([borderRightWidth.value, borderRightWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x1, y2);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x1],\n            ['y2', y2],\n            ['stroke-width', borderRightWidth.value],\n            ['stroke', borderRightColor]\n          ],\n        };\n        if(borderRightStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderRightWidth.value * 3}, ${borderRightWidth.value * 2}`])\n        }\n        else if(borderTopStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderRightWidth.value}, ${borderRightWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderBottomWidth.value) {\n      let x1 = x + borderLeftWidth.value;\n      let y1 = y + height + borderTopWidth.value + borderBottomWidth.value * 0.5;\n      let x2 = x1 + width;\n      x2 += plw + prw;\n      y1 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderBottomWidth.value;\n        ctx.strokeStyle = borderBottomColor;\n        if(borderBottomStyle === 'dashed') {\n          ctx.setLineDash([borderBottomWidth.value * 3, borderBottomWidth.value * 2]);\n        }\n        else if(borderBottomStyle === 'dotted') {\n          ctx.setLineDash([borderBottomWidth.value, borderBottomWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y1);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y1],\n            ['stroke-width', borderBottomWidth.value],\n            ['stroke', borderBottomColor]\n          ],\n        };\n        if(borderBottomStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderBottomWidth.value * 3}, ${borderBottomWidth.value * 2}`])\n        }\n        else if(borderBottomStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderBottomWidth.value}, ${borderBottomWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderLeftWidth.value) {\n      let x1 = x + borderLeftWidth.value * 0.5;\n      let y1 = y;\n      let y2 = y1 + height + borderTopWidth.value + borderBottomWidth.value;\n      y2 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderLeftWidth.value;\n        ctx.strokeStyle = borderLeftColor;\n        if(borderLeftStyle === 'dashed') {\n          ctx.setLineDash([borderLeftWidth.value * 3, borderLeftWidth.value * 2]);\n        }\n        else if(borderLeftStyle === 'dotted') {\n          ctx.setLineDash([borderLeftWidth.value, borderLeftWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x1, y2);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x1],\n            ['y2', y2],\n            ['stroke-width', borderLeftWidth.value],\n            ['stroke', borderLeftColor]\n          ],\n        };\n        if(borderLeftStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderLeftWidth.value * 3}, ${borderLeftWidth.value * 2}`])\n        }\n        else if(borderLeftStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderLeftWidth.value}, ${borderLeftWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get mtw() {\n    return this.__mtw;\n  }\n  get mrw() {\n    return this.__mrw;\n  }\n  get mbw() {\n    return this.__mbw;\n  }\n  get mlw() {\n    return this.__mlw;\n  }\n  get ptw() {\n    return this.__ptw;\n  }\n  get prw() {\n    return this.__prw;\n  }\n  get pbw() {\n    return this.__pbw;\n  }\n  get plw() {\n    return this.__plw;\n  }\n  get outerWidth() {\n    let { mlw, mrw, plw, prw, style: {\n      borderLeftWidth,\n      borderRightWidth,\n    } } = this;\n    return this.width\n      + borderLeftWidth.value\n      + borderRightWidth.value\n      + mlw\n      + mrw\n      + plw\n      + prw;\n  }\n  get outerHeight() {\n    let { mtw, mbw, ptw, pbw, style: {\n      borderTopWidth,\n      borderBottomWidth,\n    } } = this;\n    return this.height\n      + borderTopWidth.value\n      + borderBottomWidth.value\n      + mtw\n      + mbw\n      + ptw\n      + pbw;\n  }\n  get listener() {\n    return this.__listener;\n  }\n}\n\nexport default Xom;\n","'use strict';\n\nexport default {\n  arial: {\n    lhr: 1.14990234375, // 默认line-height ratio，(67+1854+434)/2048\n    car: 1.1171875, // content-area ratio，(1854+434)/2048\n    blr: 0.9052734375, // base-line ratio，1854/2048\n    mdr: 0.64599609375, // middle ratio，(1854-1062/2)/2048\n    lgr: 0.03271484375, // line-gap ratio，67/2048\n  },\n};\n","const RESET = {\n  position: 'static',\n  display: 'block',\n  borderSizing: 'content-box',\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto',\n  marginTop: 0,\n  marginRight: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  paddingTop: 0,\n  paddingRight: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  fontSize: 16,\n  fontFamily: 'arial',\n  color: '#000',\n  fontStyle: 'normal',\n  fontWeight: 400,\n  lineHeight: 'normal',\n  borderTopWidth: 0,\n  borderRightWidth: 0,\n  borderBottomWidth: 0,\n  borderLeftWidth: 0,\n  borderTopStyle: 'solid',\n  borderRightStyle: 'solid',\n  borderBottomStyle: 'solid',\n  borderLeftStyle: 'solid',\n  verticalAlign: 'baseline',\n  width: 'auto',\n  height: 'auto',\n  flexGrow: 0,\n  flexShrink: 1,\n  flexBasis: 'auto',\n  flexDirection: 'row',\n  justifyContent: 'flex-start',\n  alignItems: 'stretch',\n  textAlign: 'left',\n  visibility: 'visible',\n  fill: '#000',\n  stroke: '#000',\n  strokeWidth: 0,\n  strokeDasharray: [],\n};\n\nlet reset = [];\n\nObject.keys(RESET).forEach(k => {\n  let v = RESET[k];\n  reset.push({\n    k,\n    v,\n  });\n});\n\nexport default reset;\n","let toString = {}.toString;\nfunction isType(type) {\n  return function(obj) {\n    return toString.call(obj) === '[object ' + type + ']';\n  }\n}\n\nlet isNumber = isType('Number');\n\nfunction joinSourceArray(arr) {\n  var res = '';\n  for(var i = 0, len = arr.length; i < len; i++) {\n    var item = arr[i];\n    if(Array.isArray(item)) {\n      res += joinSourceArray(item);\n    }\n    else {\n      res += stringify(item);\n    }\n  }\n  return res;\n}\n\nfunction stringify(s) {\n  if(isNil(s)) {\n    return '';\n  }\n  return s.toString();\n}\n\nfunction encodeHtml(s, prop) {\n  if(prop) {\n    return s.replace(/\"/g, '&quot;');\n  }\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\n\nfunction isNil(v) {\n  return v === undefined || v === null;\n}\n\nfunction joinVirtualDom(vd) {\n  if(vd.type === 'item') {\n    let s = '';\n    vd.props.forEach(item => {\n      s += ` ${item[0]}=\"${item[1]}\"`;\n    });\n    if(vd.tagName === 'text') {\n      return `<text${s}>${vd.content}</text>`;\n    }\n    return `<${vd.tagName}${s}/>`;\n  }\n  else if(vd.type === 'text') {\n    let s = ``;\n    vd.children.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    return `<g>${s}</g>`;\n  }\n  else if(vd.type === 'dom') {\n    let s = '<g>';\n    vd.bb.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g><g>';\n    vd.children.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g>';\n    return `<g>${s}</g>`;\n  }\n  else if(vd.type === 'geom') {\n    let s = '<g>';\n    vd.bb.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g><g>';\n    vd.content.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g>';\n    return `<g>${s}</g>`;\n  }\n}\n\nlet util = {\n  isObject: isType('Object'),\n  isString: isType('String'),\n  isFunction: isType('Function'),\n  isNumber,\n  isBoolean: isType('Boolean'),\n  isDate: isType('Date'),\n  stringify,\n  joinSourceArray(arr) {\n    return joinSourceArray(arr);\n  },\n  encodeHtml,\n  isNil,\n  joinVirtualDom,\n};\n\nexport default util;\n","import unit from './unit';\nimport font from './font';\nimport reset from './reset';\nimport util from '../util';\n\nfunction parserOneBorder(style, direction) {\n  let key = `border${direction}`;\n  if(!style[key]) {\n    return;\n  }\n  let w = /\\b\\d+px\\b/i.exec(style[key]);\n  if(w) {\n    style[key + 'Width'] = w[0];\n  }\n  let s = /\\b(solid|dashed|dotted)\\b/i.exec(style[key]);\n  if(s) {\n    style[key + 'Style'] = s[1];\n  }\n  let c = /#[0-9a-f]{3,6}/i.exec(style[key]);\n  if(c && [4, 7].indexOf(c[0].length) > -1) {\n    style[key + 'Color'] = c[0];\n  }\n}\n\nfunction normalize(style) {\n  // 默认reset\n  reset.forEach(item => {\n    if(!style.hasOwnProperty(item.k)) {\n      style[item.k] = item.v;\n    }\n  });\n  // 处理缩写\n  // TODO: 重复声明时优先级\n  if(style.background) {\n    let bgc = /#[0-9a-f]{3,6}/i.exec(style.background);\n    if(bgc && [4, 7].indexOf(bgc[0].length) > -1) {\n      style.backgroundColor = bgc[0];\n    }\n  }\n  if(style.flex) {\n    if(style.flex === 'none') {\n      style.flexGrow = 0;\n      style.flexShrink = 0;\n      style.flexBasis = 'auto';\n    }\n    else if(style.flex === 'auto') {\n      style.flexGrow = 1;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n    else if(/^[\\d.]+$/.test(style.flex)) {\n      style.flexGrow = parseFloat(style.flex);\n      style.flexShrink = 1;\n      style.flexBasis = 0;\n    }\n    else if(/^[\\d.]+px$/.test(style.flex)) {}\n    else if(/^[\\d.]+%$/.test(style.flex)) {}\n    else {\n      style.flexGrow = 0;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n  }\n  if(style.border) {\n    style.borderTop = style.borderRight = style.borderBottom = style.borderLeft = style.border;\n  }\n  if(style.margin) {\n    style.marginTop = style.marginRight = style.marginBottom = style.marginLeft = style.margin;\n  }\n  if(style.padding) {\n    style.paddingTop = style.paddingRight = style.paddingBottom = style.paddingLeft = style.padding;\n  }\n  if(style.transform) {\n    let match = style.transform.match(/\\w+\\(.+?\\)/g);\n    if(match) {\n      let transform = style.transform = {};\n      match.forEach(item => {\n        let i = item.indexOf('(');\n        let k = item.slice(0, i);\n        let v = item.slice(i + 1, item.length - 1);\n        if(k === 'matrix') {\n          let arr = v.split(',');\n          arr = arr.map(item => parseFloat(item));\n          if(arr.length > 6) {\n            arr = arr.slice(0, 6);\n          }\n          else if(arr.length < 6) {\n            while(arr.length < 6) {\n              arr.push(0);\n            }\n          }\n          transform.matrix = arr;\n        }\n        else if(k === 'matrix3d') {\n          let arr = v.split(',');\n          arr = arr.map(item => parseFloat(item));\n          if(arr.length > 9) {\n            arr = arr.slice(0, 9);\n          }\n          else if(arr.length < 9) {\n            while(arr.length < 9) {\n              arr.push(0);\n            }\n          }\n          transform.matrix3d = arr;\n        }\n        else if(k === 'translateX') {\n          transform.translateX = v;\n        }\n        else if(k === 'translateY') {\n          transform.translateY = v;\n        }\n        else if(k === 'translateZ') {\n          transform.translateZ = v;\n        }\n        else if(k === 'translate') {\n          let arr = v.split(',');\n          transform.translateX = arr[0];\n          transform.translateY = arr[1];\n        }\n        else if(k === 'translate3d') {\n          let arr = v.split(',');\n          transform.translateX = arr[0];\n          transform.translateY = arr[1];\n          transform.translateZ = arr[2];\n        }\n        else if(k === 'scaleX') {\n          transform.scaleX = parseFloat(v) || 0;\n        }\n        else if(k === 'scaleY') {\n          transform.scaleY = parseFloat(v) || 0;\n        }\n        else if(k === 'scaleZ') {\n          transform.scaleZ = parseFloat(v) || 0;\n        }\n        else if(k === 'scale') {\n          let arr = v.split(',');\n          transform.scaleX = parseFloat(arr[0]) || 0;\n          transform.scaleY = parseFloat(arr[1]) || 0;\n        }\n        else if(k === 'scale3d') {\n          let arr = v.split(',');\n          transform.scaleX = parseFloat(arr[0]) || 0;\n          transform.scaleY = parseFloat(arr[1]) || 0;\n          transform.scaleZ = parseFloat(arr[2]) || 0;\n        }\n        else if(k === 'rotateX') {\n          transform.rotateX = parseFloat(v) || 0;\n        }\n        else if(k === 'rotateY') {\n          transform.rotateY = parseFloat(v) || 0;\n        }\n        else if(k === 'rotateZ') {\n          transform.rotateZ = parseFloat(v) || 0;\n        }\n        else if(k === 'rotate') {\n          let arr = v.split(',');\n          transform.rotateX = parseFloat(arr[0]) || 0;\n          transform.rotateY = parseFloat(arr[1]) || 0;\n        }\n        else if(k === 'rotate3d') {\n          let arr = v.split(',');\n          transform.rotateX = parseFloat(arr[0]) || 0;\n          transform.rotateY = parseFloat(arr[1]) || 0;\n          transform.rotateZ = parseFloat(arr[2]) || 0;\n        }\n        else if(k === 'skewX') {\n          transform.skewX = parseFloat(v) || 0;\n        }\n        else if(k === 'skewY') {\n          transform.skewY = parseFloat(v) || 0;\n        }\n        else if(k === 'skew') {\n          let arr = v.split(',');\n          transform.skewX = parseFloat(arr[0]) || 0;\n          transform.skewY = parseFloat(arr[1]) || 0;\n        }\n        else if(k === 'perspective') {\n          transform.perspective = parseFloat(v);\n        }\n      });\n      [\n        'translateX',\n        'translateY',\n        'translateZ',\n      ].forEach(k => {\n        let v = transform[k];\n        // 编译工具前置解析优化跳出\n        if(!util.isNil(v) && v.unit) {\n          return;\n        }\n        if(/%$/.test(v)) {\n          v = parseFloat(v) || 0;\n          transform[k] = {\n            value: v,\n            unit: unit.PERCENT,\n          };\n        }\n        else {\n          v = parseFloat(v) || 0;\n          transform[k] = {\n            value: v,\n            unit: unit.PX,\n          };\n        }\n      });\n    }\n  }\n  parserOneBorder(style, 'Top');\n  parserOneBorder(style, 'Right');\n  parserOneBorder(style, 'Bottom');\n  parserOneBorder(style, 'Left');\n  // 转化不同单位值为对象标准化\n  [\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'top',\n    'right',\n    'bottom',\n    'left',\n    'width',\n    'height',\n    'flexBasis',\n  ].forEach(k => {\n    let v = style[k];\n    // 编译工具前置解析优化跳出\n    if(!util.isNil(v) && v.unit) {\n      return;\n    }\n    if(v === 'auto') {\n      style[k] = {\n        unit: unit.AUTO,\n      };\n    }\n    else if(/%$/.test(v)) {\n      // border不支持百分比\n      if(k.indexOf('border') === 0) {\n        style[k] = {\n          value: 0,\n          unit: unit.PX,\n        };\n      }\n      else {\n        v = parseFloat(v) || 0;\n        style[k] = {\n          value: v,\n          unit: unit.PERCENT,\n        };\n      }\n    }\n    else {\n      v = parseFloat(v) || 0;\n      style[k] = {\n        value: v,\n        unit: unit.PX,\n      };\n    }\n  });\n  // 计算lineHeight为px值，最小范围\n  let lineHeight = style.lineHeight;\n  if(lineHeight === 'normal') {\n    lineHeight = {\n      value: style.fontSize * font.arial.lhr,\n      unit: unit.PX,\n    };\n  }\n  else if(/px$/.test(lineHeight)) {\n    lineHeight = parseFloat(lineHeight);\n    lineHeight = {\n      value: Math.max(style.fontSize, lineHeight),\n      unit: unit.PX,\n    };\n  }\n  // 纯数字比例\n  else {\n    lineHeight = parseFloat(lineHeight) || 'normal';\n    // 非法数字\n    if(lineHeight === 'normal') {\n      lineHeight = {\n        value: style.fontSize * font.arial.lhr,\n        unit: unit.PX,\n      };\n    }\n    else {\n      lineHeight = {\n        value: lineHeight * style.fontSize,\n        unit: unit.PX,\n      };\n    }\n  }\n  style.lineHeight = lineHeight;\n}\n\nfunction setFontStyle(style) {\n  let { fontStyle, fontWeight, fontSize, fontFamily } = style;\n  return `${fontStyle} ${fontWeight} ${fontSize}px/${fontSize}px ${fontFamily}`;\n}\n\nfunction getBaseLine(style) {\n  let normal = style.fontSize * font.arial.lhr;\n  return (style.lineHeight.value - normal) * 0.5 + style.fontSize * font.arial.blr;\n}\n\nexport default {\n  normalize,\n  setFontStyle,\n  getBaseLine,\n};\n","import css from '../style/css';\nimport mode from '../mode';\n\nclass LineBox {\n  constructor(parent, x, y, w, content, style) {\n    this.__parent = parent;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    this.__content = content;\n    this.__style = style;\n    this.__virtualDom = {};\n  }\n\n  render(renderMode, ctx) {\n    let { style, content, x, y, parent: { ox, oy } } = this;\n    y += css.getBaseLine(style);\n    x += ox;\n    y += oy;\n    if(renderMode === mode.CANVAS) {\n      ctx.fillText(content, x, y);\n    }\n    else if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'item',\n        tagName: 'text',\n        props: [\n          ['x', x],\n          ['y', y],\n          ['fill', style.color],\n          ['font-size', `${style.fontSize}px`]\n        ],\n        content,\n      };\n    }\n  }\n\n  __offsetX(diff) {\n    this.__x += diff;\n  }\n\n  __offsetY(diff) {\n    this.__y += diff;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    return this.__width;\n  }\n  get content() {\n    return this.__content;\n  }\n  get style() {\n    return this.__style;\n  }\n  get baseLine() {\n    return css.getBaseLine(this.style);\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n  get parent() {\n    return this.__parent;\n  }\n}\n\nexport default LineBox;\n","import Node from './Node';\nimport LineBox from './LineBox';\nimport css from '../style/css';\nimport mode from '../mode';\n\nconst CHAR_WIDTH_CACHE = {};\n\nclass Text extends Node {\n  constructor(content) {\n    super();\n    this.__content = content.toString();\n    this.__lineBoxes = [];\n    this.__charWidthList = [];\n    this.__charWidth = 0;\n    this.__textWidth = 0;\n  }\n\n  // 预先计算每个字的宽度\n  __measure() {\n    this.__charWidthList = [];\n    let { ctx, content, style, charWidthList, renderMode } = this;\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(style);\n    }\n    let cache = CHAR_WIDTH_CACHE[style.fontSize] = CHAR_WIDTH_CACHE[style.fontSize] || {};\n    let length = content.length;\n    let sum = 0;\n    for(let i = 0; i < length; i++) {\n      let char = content.charAt(i);\n      let mw;\n      if(cache.hasOwnProperty(char)) {\n        mw = cache[char];\n      }\n      else if(renderMode === mode.CANVAS) {\n        mw = cache[char] = ctx.measureText(char).width;\n      }\n      else if(renderMode === mode.SVG) {\n        mw = cache[char] = mode.measure(char, style);\n      }\n      charWidthList.push(mw);\n      sum += mw;\n      this.__charWidth = Math.max(this.charWidth, mw);\n    }\n    this.__textWidth = sum;\n  }\n\n  __layout(data, isVirtual) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let maxX = x;\n    let { ctx, content, style, lineBoxes, charWidthList, renderMode } = this;\n    // 顺序尝试分割字符串为lineBox，形成多行\n    let begin = 0;\n    let i = 0;\n    let count = 0;\n    let length = content.length;\n    while(i < length) {\n      count += charWidthList[i];\n      if (count === w) {\n        let lineBox = new LineBox(this, x, y, count, content.slice(begin, i + 1), style);\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count);\n        y += this.style.lineHeight.value;\n        begin = i + 1;\n        i = begin + 1;\n        count = 0;\n      }\n      else if (count > w) {\n        // 宽度不足时无法跳出循环，至少也要塞个字符形成一行\n        if(i === begin) {\n          i = begin + 1;\n        }\n        let lineBox = new LineBox(this, x, y, count - charWidthList[i], content.slice(begin, i), style);\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count - charWidthList[i]);\n        y += this.style.lineHeight.value;\n        begin = i;\n        i = i + 1;\n        count = 0;\n      }\n      else {\n        i++;\n      }\n    }\n    if(begin < length && begin < i) {\n      count = 0;\n      for(i = begin ;i < length; i++) {\n        count += charWidthList[i];\n      }\n      let lineBox = new LineBox(this, x, y, count, content.slice(begin, length), style);\n      lineBoxes.push(lineBox);\n      maxX = Math.max(maxX, x + count);\n      y += style.lineHeight.value;\n    }\n    this.__width = maxX - x;\n    this.__height = y - data.y;\n    if(isVirtual) {\n      this.__lineBoxes = [];\n    }\n    else {\n      let { textAlign } = style;\n      if(['center', 'right'].indexOf(textAlign) > -1) {\n        lineBoxes.forEach(lineBox => {\n          let diff = this.__width - lineBox.width;\n          if(diff > 0) {\n            lineBox.__offsetX(textAlign === 'center' ? diff * 0.5 : diff);\n          }\n        });\n      }\n    }\n  }\n\n  render(renderMode) {\n    const { ctx, style } = this;\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(style);\n      ctx.fillStyle = style.color;\n    }\n    this.lineBoxes.forEach(item => {\n      item.render(renderMode, ctx);\n    });\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'text',\n        children: this.lineBoxes.map(lineBox => lineBox.virtualDom),\n      };\n    }\n  }\n\n  __tryLayInline(w) {\n    return w - this.textWidth;\n  }\n\n  __calMaxAndMinWidth() {\n    let n = 0;\n    this.charWidthList.forEach(item => {\n      n = Math.max(n, item);\n    });\n    return { max: this.textWidth, min: n };\n  }\n\n  get content() {\n    return this.__content;\n  }\n  set content(v) {\n    this.__content = v;\n  }\n  get lineBoxes() {\n    return this.__lineBoxes;\n  }\n  get charWidthList() {\n    return this.__charWidthList;\n  }\n  get charWidth() {\n    return this.__charWidth;\n  }\n  get textWidth() {\n    return this.__textWidth;\n  }\n  get baseLine() {\n    let last = this.lineBoxes[this.lineBoxes.length - 1];\n    return last.y - this.y + last.baseLine;\n  }\n  get renderMode() {\n    return this.__renderMode;\n  }\n}\n\nexport default Text;\n","class LineGroup {\n  constructor(x, y) {\n    this.__list = [];\n    this.__x = x;\n    this.__y = y;\n    this.__baseLine = 0;\n  }\n\n  add(item) {\n    this.list.push(item);\n  }\n\n  __calBaseLine() {\n    let baseLine = 0;\n    this.list.forEach(item => {\n      baseLine = Math.max(baseLine, item.baseLine);\n    });\n    return baseLine;\n  }\n\n  verticalAlign() {\n    this.__baseLine = this.__calBaseLine();\n    // 仅当有2个和以上时才需要vertical对齐调整\n    if(this.list.length > 1) {\n      this.list.forEach(item => {\n        if(item.baseLine !== this.baseLine) {\n          item.__offsetY(this.baseLine - item.baseLine);\n        }\n      });\n    }\n  }\n\n  horizonAlign(diff) {\n    this.list.forEach(item => {\n      item.__offsetX(diff);\n    });\n  }\n\n  get list() {\n    return this.__list;\n  }\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    let width = 0;\n    this.list.forEach(item => {\n      width += item.width;\n    });\n    return width;\n  }\n  get height() {\n    let height = 0;\n    this.list.forEach(item => {\n      height = Math.max(height, item.height);\n    });\n    return height;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get size() {\n    return this.__list.length;\n  }\n}\n\nexport default LineGroup;\n","import Xom from '../node/Xom';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../mode';\n\nconst IMPLEMENT = {};\n\nclass Geom extends Xom {\n  constructor(tagName, props) {\n    super(tagName, props);\n  }\n\n  __initStyle() {\n    css.normalize(this.style);\n  }\n\n  __tryLayInline(w, total) {\n    // 无children，直接以style的width为宽度，不定义则为0\n    let { style: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    return w;\n  }\n\n  __calAutoBasis(isDirectionRow, w, h) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit !== unit.AUTO) {\n      b = max += main.value;\n    }\n    // border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value;\n      b += w;\n      max += w;\n      min += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value;\n      b += h;\n      max += h;\n      min += h;\n    }\n    return { b, min, max };\n  }\n\n  __layoutBlock(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { style } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // border影响x和y和尺寸\n    x += borderLeftWidth.value;\n    data.x = x;\n    y += borderTopWidth.value;\n    data.y = y;\n    w -= borderLeftWidth.value + borderRightWidth.value;\n    h -= borderTopWidth.value + borderBottomWidth.value;\n    this.__width = w;\n    this.__height = fixedHeight ? h : 0;\n  }\n\n  __layoutFlex(data) {\n    // 无children所以等同于block\n    this.__layoutBlock(data);\n  }\n\n  __layoutInline(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let { style } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n      }\n    }\n    // border影响x和y\n    x += borderLeftWidth.value;\n    data.x = x;\n    y += borderTopWidth.value;\n    data.y = y;\n    w -= borderLeftWidth.value + borderRightWidth.value;\n    h -= borderTopWidth.value + borderBottomWidth.value;\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : x - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n  }\n\n  __calAbs() {\n    return 0;\n  }\n\n  __emitEvent(e, force) {\n    let { event: { type }, x, y, covers } = e;\n    let { listener, style, rx, ry, outerWidth, outerHeight } = this;\n    if(style.display === 'none') {\n      return;\n    }\n    let cb;\n    if(listener.hasOwnProperty(type)) {\n      cb = listener[type];\n    }\n    if(force) {\n      cb && cb(e);\n    }\n    else if(x >= rx && y >= ry && x <= rx + outerWidth && y <= ry + outerHeight) {\n      for(let i = 0, len = covers.length; i < len; i++) {\n        let { x: x2, y: y2, w, h: h } = covers[i];\n        if(x >= x2 && y >= y2 && x <= x2 + w && y <= y2 + h) {\n          return;\n        }\n      }\n      if(!e.target) {\n        e.target = this;\n      }\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'geom',\n        content: [],\n      };\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get baseLine() {\n    return this.__height;\n  }\n\n  static getImplement(name) {\n    if(!IMPLEMENT.hasOwnProperty(name)) {\n      throw new Error(`Geom has not register: ${name}`);\n    }\n    return IMPLEMENT[name];\n  }\n  static register(name, implement) {\n    if(IMPLEMENT.hasOwnProperty(name)) {\n      throw new Error(`Geom has already register: ${name}`);\n    }\n    IMPLEMENT[name] = implement;\n  }\n}\n\nexport default Geom;\n","import Xom from './Xom';\nimport Text from './Text';\nimport LineGroup from './LineGroup';\nimport Geom from '../geom/Geom';\nimport util from '../util';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../mode';\n\nconst TAG_NAME = {\n  'div': true,\n  'span': true,\n};\nconst INLINE = {\n  'span': true,\n};\n\nclass Dom extends Xom {\n  constructor(tagName, props, children) {\n    super(tagName, props);\n    this.__children = children;\n    this.__flowChildren = []; // 非绝对定位孩子\n    this.__absChildren = []; // 绝对定位孩子\n    this.__lineGroups = []; // 一行inline元素组成的LineGroup对象后的存放列表\n    this.__flowY = 0; // 文档流布局结束后的y坐标，供absolute布局默认位置使用\n  }\n\n  /**\n   * 1. 封装string为Text节点\n   * 2. 打平children中的数组，变成一维\n   * 3. 合并相连的Text节点\n   * 4. 检测inline不能包含block和flex\n   * 5. 设置parent和prev/next和ctx和mode\n   */\n  __traverse(ctx, renderMode) {\n    let list = [];\n    this.__traverseChildren(this.children, list, ctx, renderMode);\n    for(let i = list.length - 1; i > 0; i--) {\n      let item = list[i];\n      if(item instanceof Text) {\n        let prev = list[i - 1];\n        if(prev instanceof Text) {\n          prev.content += item.content;\n          list.splice(i, 1);\n        }\n        else {\n          i--;\n        }\n      }\n    }\n    if(this.style.display === 'inline' && this.parent.style.display !== 'flex') {\n      for(let i = list.length - 1; i >= 0; i--) {\n        let item = list[i];\n        if(item instanceof Dom && item.style.display !== 'inline') {\n          throw new Error('inline can not contain block/flex');\n        }\n      }\n    }\n    let prev = null;\n    list.forEach(item => {\n      item.__ctx = ctx;\n      if(prev) {\n        prev.__next = item;\n      }\n      item.__parent = this;\n      item.__prev = prev;\n      if(item instanceof Text || item.style.position !== 'absolute') {\n        this.__flowChildren.push(item);\n      }\n      else {\n        this.__absChildren.push(item);\n      }\n    });\n    this.__children = list;\n  }\n\n  __traverseChildren(children, list, ctx, renderMode) {\n    if(Array.isArray(children)) {\n      children.forEach(item => {\n        this.__traverseChildren(item, list, ctx, renderMode);\n      });\n    }\n    else if(children instanceof Dom) {\n      list.push(children);\n      children.__traverse(ctx, renderMode);\n    }\n    // 图形没有children\n    else if(children instanceof Geom) {\n      list.push(children);\n    }\n    // 排除掉空的文本\n    else if(!util.isNil(children)) {\n      let text = new Text(children);\n      text.__renderMode = renderMode;\n      list.push(text);\n    }\n  }\n\n  // 合并设置style，包括继承和默认值，修改一些自动值和固定值，测量所有文字的宽度\n  __initStyle() {\n    let style = this.__style;\n    // 仅支持flex/block/inline/none\n    if(!style.display || ['flex', 'block', 'inline', 'none'].indexOf(style.display) === -1) {\n      if(INLINE.hasOwnProperty(this.tagName)) {\n        style.display = 'inline';\n      }\n      else {\n        style.display = 'block';\n      }\n    }\n    // 继承父元素样式\n    let parent = this.parent;\n    if(parent) {\n      let parentStyle = parent.style;\n      ['fontSize', 'fontWeight', 'fontStyle', 'lineHeight', 'wordBreak', 'color', 'textAlign'].forEach(k => {\n        if(!style.hasOwnProperty(k) && parentStyle.hasOwnProperty(k)) {\n          style[k] = parentStyle[k];\n        }\n      });\n    }\n    // 标准化处理，默认值、简写属性\n    css.normalize(style);\n    this.children.forEach(item => {\n      if(item instanceof Xom) {\n        item.__initStyle();\n      }\n      else {\n        item.__style = style;\n        // 文字首先测量所有字符宽度\n        item.__measure();\n      }\n    });\n  }\n\n  // 给定父宽度情况下，尝试行内放下后的剩余宽度，为负数即放不下\n  __tryLayInline(w, total) {\n    let { flowChildren, style: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    for(let i = 0; i < flowChildren.length; i++) {\n      // 当放不下时直接返回，无需继续多余的尝试计算\n      if(w < 0) {\n        return w;\n      }\n      let item = flowChildren[i];\n      if(item instanceof Xom) {\n        w -= item.__tryLayInline(w, total);\n      }\n      else {\n        w -= item.textWidth;\n      }\n    }\n    return w;\n  }\n\n  // 设置y偏移值，递归包括children，此举在flex行元素的child进行justify-content对齐用\n  __offsetX(diff) {\n    super.__offsetX(diff);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetX(diff);\n      }\n    });\n  }\n\n  // 设置y偏移值，递归包括children，此举在初步确定inline布局后设置元素vertical-align用\n  __offsetY(diff) {\n    super.__offsetY(diff);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetY(diff);\n      }\n    });\n  }\n\n  __calAutoBasis(isDirectionRow, w, h, isRecursion) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { mtw, mrw, mbw, mlw, ptw, prw, pbw, plw, flowChildren, style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit === unit.PX) {\n      b = max = main.value;\n      // 递归时children的长度会影响flex元素的最小宽度\n      if(isRecursion) {\n        min = b;\n      }\n    }\n    // 递归children取最大值\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let { b: b2, min: min2, max: max2 } = item.__calAutoBasis(isDirectionRow, w, h, true);\n        b = Math.max(b, b2);\n        min = Math.max(min, min2);\n        max = Math.max(max, max2);\n      }\n      else if(isDirectionRow) {\n        min = Math.max(item.charWidth, min);\n        max = Math.max(item.textWidth, max);\n      }\n      else {\n        item.__layout({\n          x: 0,\n          y: 0,\n          w,\n          h,\n        }, true);\n        min = Math.max(min, item.height);\n        max = Math.max(max, item.height);\n      }\n    });\n    // margin/padding/border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value + mlw + mrw + plw + prw;\n      b += w;\n      max += w;\n      min += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n      b += h;\n      max += h;\n      min += h;\n    }\n    return { b, min, max };\n  }\n\n  __calAbs(isDirectionRow) {\n    let max = 0;\n    let { mtw, mrw, mbw, mlw, ptw, prw, pbw, plw, flowChildren, style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit === unit.PX) {\n      max = main.value;\n    }\n    // 递归children取最大值\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let max2 = item.__calAbs(isDirectionRow);\n        max = Math.max(max, max2);\n      }\n      else if(isDirectionRow) {\n        max = Math.max(item.textWidth, max);\n      }\n      else {\n        item.__layout({\n          x: 0,\n          y: 0,\n          w: Infinity,\n          h: Infinity,\n        }, true);\n        max = Math.max(max, item.height);\n      }\n    });\n    // margin/padding/border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value + mlw + mrw + plw + prw;\n      max += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n      max += h;\n    }\n    return max;\n  }\n\n  // 本身block布局时计算好所有子元素的基本位置\n  __layoutBlock(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { flowChildren, style, lineGroups, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      textAlign,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        if(item.style.display === 'inline') {\n          // inline开头，不用考虑是否放得下直接放\n          if(x === data.x) {\n            lineGroup.add(item);\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n            x += item.outerWidth;\n          }\n          else {\n            // 非开头先尝试是否放得下\n            let fw = item.__tryLayInline(w - x, w);\n            // 放得下继续\n            if(fw >= 0) {\n              item.__layout({\n                x,\n                y,\n                w,\n                h,\n              });\n            }\n            // 放不下处理之前的lineGroup，并重新开头\n            else {\n              lineGroups.push(lineGroup);\n              lineGroup.verticalAlign();\n              x = data.x;\n              y += lineGroup.height;\n              item.__layout({\n                x: data.x,\n                y,\n                w,\n                h,\n              });\n              lineGroup = new LineGroup(x, y);\n            }\n            x += item.outerWidth;\n            lineGroup.add(item);\n          }\n        }\n        else {\n          // block先处理之前可能的lineGroup\n          if(lineGroup.size) {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            y += lineGroup.height;\n            lineGroup = new LineGroup(data.x, y);\n          }\n          item.__layout({\n            x: data.x,\n            y,\n            w,\n            h,\n          });\n          x = data.x;\n          y += item.outerHeight;\n        }\n      }\n      // 文字和inline类似\n      else {\n        // x开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = w - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // 弹性布局时的计算位置\n  __layoutFlex(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { flowChildren, style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      flexDirection,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      justifyContent,\n      alignItems,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    let isDirectionRow = flexDirection === 'row';\n    // column时height可能为auto，此时取消伸展，退化为类似block布局，但所有子元素强制block\n    if(!isDirectionRow && !fixedHeight) {\n      flowChildren.forEach(item => {\n        if(item instanceof Xom) {\n          const { style, style: { display, flexDirection, width }} = item;\n          // column的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 竖向flex的child如果是横向flex，宽度自动的话要等同于父flex的宽度\n          else if(display === 'flex' && flexDirection === 'row' && width.unit === unit.AUTO) {\n            width.value = w;\n            width.unit = unit.PX;\n          }\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          y += item.outerHeight;\n        }\n        else {\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          y += item.outerHeight;\n        }\n      });\n      this.__width = w;\n      this.__height = y - data.y;\n      return;\n    }\n    // 计算伸缩基数\n    let growList = [];\n    let shrinkList = [];\n    let basisList = [];\n    let minList = [];\n    let growSum = 0;\n    let shrinkSum = 0;\n    let basisSum = 0;\n    let maxSum = 0;\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let { flexGrow, flexShrink, flexBasis } = item.style;\n        growList.push(flexGrow);\n        shrinkList.push(flexShrink);\n        growSum += flexGrow;\n        shrinkSum += flexShrink;\n        let { b, min, max } = item.__calAutoBasis(isDirectionRow, w, h);\n        // 根据basis不同，计算方式不同\n        if(flexBasis.unit === unit.AUTO) {\n          basisList.push(max);\n          basisSum += max;\n        }\n        else if(flexBasis.unit === unit.PX) {\n          b = flexBasis.value;\n          basisList.push(b);\n          basisSum += b;\n        }\n        else if(flexBasis.unit === unit.PERCENT) {\n          b = (isDirectionRow ? w : h) * flexBasis.value;\n          basisList.push(b);\n          basisSum += b;\n        }\n        maxSum += max;\n        minList.push(min);\n      }\n      else {\n        growList.push(0);\n        shrinkList.push(1);\n        shrinkSum += 1;\n        if(isDirectionRow) {\n          basisList.push(item.textWidth);\n          basisSum += item.textWidth;\n          maxSum += item.textWidth;\n          minList.push(item.charWidth);\n        }\n        else {\n          item.__layout({\n            x: 0,\n            y: 0,\n            w,\n            h,\n          }, true);\n          basisList.push(item.height);\n          basisSum += item.height;\n          maxSum += item.height;\n          minList.push(item.height);\n        }\n      }\n    });\n    let maxCross = 0;\n    // 判断是否超出，决定使用grow还是shrink\n    let isOverflow = maxSum > (isDirectionRow ? w : h);\n    flowChildren.forEach((item, i) => {\n      let main;\n      let shrink = shrinkList[i];\n      let grow = growList[i];\n      // 计算主轴长度\n      if(isOverflow) {\n        let overflow = basisSum - (isDirectionRow ? w : h);\n        main = shrink ? (basisList[i] - overflow * shrink / shrinkSum) : basisList[i];\n      }\n      else {\n        let free = (isDirectionRow ? w : h) - basisSum;\n        main = grow ? (basisList[i] + free * grow / growSum) : basisList[i];\n      }\n      // 主轴长度的最小值不能小于元素的最小长度，比如横向时的字符宽度\n      main = Math.max(main, minList[i]);\n      if(item instanceof Xom) {\n        const { style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw, style: {\n          display,\n          flexDirection,\n          width,\n          height,\n          borderTopWidth,\n          borderRightWidth,\n          borderBottomWidth,\n          borderLeftWidth,\n        }} = item;\n        if(isDirectionRow) {\n          // row的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 横向flex的child如果是竖向flex，高度自动的话要等同于父flex的高度\n          else if(display === 'flex' && flexDirection === 'column' && fixedHeight && height.unit === unit.AUTO) {\n            height.value = h;\n            height.unit = unit.PX;\n          }\n          item.__layout({\n            x,\n            y,\n            w: main,\n            h,\n          })\n        }\n        else {\n          // column的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 竖向flex的child如果是横向flex，宽度自动的话要等同于父flex的宽度\n          else if(display === 'flex' && flexDirection === 'row' && width.unit === unit.AUTO) {\n            width.value = w;\n            width.unit = unit.PX;\n          }\n          item.__layout({\n            x,\n            y,\n            w,\n            h: main,\n          });\n        }\n        // 重设因伸缩而导致的主轴长度\n        if(isOverflow && shrink) {\n          if(isDirectionRow) {\n            item.__width = main - mlw - mrw - plw - prw - borderLeftWidth.value - borderRightWidth.value;\n          }\n          else {\n            item.__height = main - mtw - mbw - ptw - pbw - borderTopWidth.value - borderBottomWidth.value;\n          }\n        }\n        else if(!isOverflow && grow) {\n          if(isDirectionRow) {\n            item.__width = main - mlw - mrw - plw - prw - borderLeftWidth.value - borderRightWidth.value;\n          }\n          else {\n            item.__height = main - mtw - mbw - ptw - pbw - borderTopWidth.value - borderBottomWidth.value;\n          }\n        }\n      }\n      else {\n        item.__layout({\n          x,\n          y,\n          w: isDirectionRow ? main : w,\n          h: isDirectionRow ? h : main,\n        });\n      }\n      if(isDirectionRow) {\n        x += item.outerWidth;\n        maxCross = Math.max(maxCross, item.outerHeight);\n      }\n      else {\n        y += item.outerHeight;\n        maxCross = Math.max(maxCross, item.outerWidth);\n      }\n    });\n    // 计算主轴剩余时要用真实剩余空间而不能用伸缩剩余空间\n    let diff = isDirectionRow ? w - x + data.x : h - y + data.y;\n    // 主轴侧轴对齐方式\n    if(!isOverflow && growSum === 0 && diff > 0) {\n      let len = flowChildren.length;\n      if(justifyContent === 'flex-end') {\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(diff) : child.__offsetY(diff);\n        }\n      }\n      else if(justifyContent === 'center') {\n        let center = diff * 0.5;\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(center) : child.__offsetY(center);\n        }\n      }\n      else if(justifyContent === 'space-between') {\n        let between = diff / (len - 1);\n        for(let i = 1; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(between * i) : child.__offsetY(between * i);\n        }\n      }\n      else if(justifyContent === 'space-around') {\n        let around = diff / (len + 1);\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(around * (i + 1)) : child.__offsetY(around * (i + 1));\n        }\n      }\n    }\n    // 子元素侧轴伸展\n    if(isDirectionRow) {\n      // 父元素固定高度，子元素可能超过，侧轴最大长度取固定高度\n      if(fixedHeight) {\n        maxCross = h;\n      }\n      y += maxCross;\n    }\n    else {\n      if(fixedWidth) {\n        maxCross = w;\n      }\n    }\n    // 侧轴对齐\n    if(alignItems === 'stretch') {\n      // 短侧轴的children伸张侧轴长度至相同，超过的不动，固定宽高的也不动\n      flowChildren.forEach(item => {\n        let { style, mlw, mtw, mrw, mbw, ptw, prw, plw, pbw } = item;\n        if(isDirectionRow) {\n          if(style.height.unit === unit.AUTO) {\n            item.__height = maxCross - mtw - mbw - ptw - pbw\n              - style.borderTopWidth.value\n              - style.borderBottomWidth.value;\n          }\n        }\n        else {\n          if(style.width.unit === unit.AUTO) {\n            item.__width = maxCross - mlw - mrw - plw - prw\n              - borderRightWidth.value\n              - borderLeftWidth.value;\n          }\n        }\n      });\n    }\n    else if(alignItems === 'center') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff * 0.5);\n        }\n      });\n    }\n    else if(alignItems === 'flex-end') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff);\n        }\n      });\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // inline比较特殊，先简单顶部对其，后续还需根据vertical和lineHeight计算y偏移\n  __layoutInline(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let maxX = x;\n    let { flowChildren, style, lineGroups, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      textAlign,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        // 绝对定位跳过\n        if(item.style.position === 'absolute') {\n          this.absChildren.push(item);\n          return;\n        }\n        item.style.display = 'inline';\n        // inline开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n      }\n      // inline里的其它只有文本\n      else {\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup，children为空时可能size为空\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = w - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : maxX - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // 只针对绝对定位children布局\n  __layoutAbs(container) {\n    let { x, y, flowY, width, height, children, absChildren, style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      borderTopWidth,\n      borderLeftWidth,\n    } = style;\n    let pw = width + plw + prw;\n    let ph = height + ptw + pbw;\n    // 递归进行，遇到absolute/relative的设置新容器\n    children.forEach(item => {\n      if(item instanceof Dom) {\n        item.__layoutAbs(['absolute', 'relative'].indexOf(item.style.position) > -1 ? item : container);\n      }\n    });\n    // 对absolute的元素进行相对容器布局\n    absChildren.forEach(item => {\n      let { mtw, mlw, style, style: {\n        left, top, right, bottom, width: width2, height: height2\n      } } = item;\n      let x2, y2, w2, h2;\n      // width优先级高于right高于left，即最高left+right，其次left+width，再次right+width，然后仅申明单个，最次全部auto\n      if(left.unit !== unit.AUTO && right.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + mlw + borderLeftWidth.value + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - x2 : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - x2;\n      }\n      else if(left.unit !== unit.AUTO && width2.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + mlw + borderLeftWidth.value + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = width2.unit === unit.PX ? width2.value : width;\n      }\n      else if(right.unit !== unit.AUTO && width2.unit !== unit.AUTO) {\n        w2 = width2.unit === unit.PX ? width2.value : width;\n        let widthPx = width2.unit === unit.PX ? width2.value : width * width2.value * 0.01;\n        x2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - widthPx : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - widthPx;\n      }\n      else if(left.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = item.__calAbs(true);\n      }\n      else if(right.unit !== unit.AUTO) {\n        w2 = item.__calAbs(true);\n        x2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - w2 : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - w2;\n      }\n      else if(width2.unit !== unit.AUTO) {\n        x2 = x + mlw + borderLeftWidth.value;\n        w2 = width2.unit === unit.PX ? width2.value : width;\n      }\n      else {\n        x2 = x + mlw + borderLeftWidth.value;\n        w2 = item.__calAbs(true);\n      }\n      // top/bottom/height优先级同上\n      if(top.unit !== unit.AUTO && bottom.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - y2 : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - y2;\n        style.height = {\n          value: h2,\n          unit: unit.PX,\n        };\n      }\n      else if(top.unit !== unit.AUTO && height2.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = height2.unit === unit.PX ? height2.value : height;\n      }\n      else if(bottom.unit !== unit.AUTO && height2.unit !== unit.AUTO) {\n        h2 = height2.unit === unit.PX ? height2.value : height;\n        let heightPx = height2.unit === unit.PX ? height2.value : height * height2.value * 0.01;\n        y2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - heightPx : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - heightPx;\n      }\n      else if(top.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = item.__calAbs();\n      }\n      else if(bottom.unit !== unit.AUTO) {\n        h2 = item.__calAbs();\n        y2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - h2 : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - h2;\n      }\n      else if(height2.unit !== unit.AUTO) {\n        y2 = flowY + mtw + borderTopWidth.value;\n        h2 = height2.unit === unit.PX ? height2.value : height;\n      }\n      else {\n        y2 = flowY + mtw + borderTopWidth.value;\n        h2 = item.__calAbs();\n      }\n      // absolute时inline强制block\n      if(style.display === 'inline') {\n        style.display = 'block';\n      }\n      item.__layout({\n        x: x2,\n        y: y2,\n        w: w2,\n        h: h2,\n      });\n    });\n  }\n\n  __emitEvent(e, force) {\n    let { event: { type }, x, y, covers } = e;\n    let { listener, children, style, rx, ry, outerWidth, outerHeight } = this;\n    if(style.display === 'none') {\n      return;\n    }\n    let cb;\n    if(listener.hasOwnProperty(type)) {\n      cb = listener[type];\n    }\n    let hasChildEmit;\n    // 先响应absolute/relative高优先级\n    for(let i = children.length - 1; i >= 0; i--) {\n      let child = children[i];\n      if(child instanceof Xom && ['absolute', 'relative'].indexOf(child.style.position) > -1) {\n        if(child.__emitEvent(e, force)) {\n          hasChildEmit = true;\n        }\n      }\n    }\n    // 再看普通流\n    for(let i = children.length - 1; i >= 0; i--) {\n      let child = children[i];\n      if(child instanceof Xom && ['absolute', 'relative'].indexOf(child.style.position) === -1) {\n        if(child.__emitEvent(e, force)) {\n          hasChildEmit = true;\n        }\n      }\n    }\n    if(force) {\n      cb && cb(e);\n      return;\n    }\n    // child触发则parent一定触发\n    if(hasChildEmit) {\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n    // 否则判断坐标是否位于自己内部，以及没被遮挡\n    else if(x >= rx && y >= ry && x <= rx + outerWidth && y <= ry + outerHeight) {\n      for(let i = 0, len = covers.length; i < len; i++) {\n        let { x: x2, y: y2, w, h: h } = covers[i];\n        if(x >= x2 && y >= y2 && x <= x2 + w && y <= y2 + h) {\n          return;\n        }\n      }\n      if(!e.target) {\n        e.target = this;\n      }\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { style, flowChildren, children } = this;\n    let {\n      display,\n      position,\n      top,\n      right,\n      bottom,\n      left,\n      height: h,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    // 先绘制static\n    flowChildren.forEach(item => {\n      if(item instanceof Text || item.style.position === 'static') {\n        item.render(renderMode);\n      }\n    });\n    // 再绘制relative和absolute\n    children.forEach(item => {\n      if((item instanceof Xom) && ['relative', 'absolute'].indexOf(item.style.position) > -1) {\n        item.render(renderMode);\n      }\n    });\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'dom',\n        children: this.children.map(item => item.virtualDom),\n      };\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get children() {\n    return this.__children;\n  }\n  get flowChildren() {\n    return this.__flowChildren;\n  }\n  get absChildren() {\n    return this.__absChildren;\n  }\n  get lineGroups() {\n    return this.__lineGroups;\n  }\n  get baseLine() {\n    let len = this.lineGroups.length;\n    if(len) {\n      let last = this.lineGroups[len - 1];\n      return last.y - this.y + last.baseLine;\n    }\n    return this.y;\n  }\n  get flowY() {\n    return this.__flowY;\n  }\n\n  static isValid(s) {\n    return TAG_NAME.hasOwnProperty(s);\n  }\n}\n\nexport default Dom;\n","import util from './util';\n\nfunction diff(elem, ovd, nvd) {\n  if(ovd.type === 'dom') {\n    if(nvd.type === 'dom') {\n      diffD2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffD2G(elem, ovd, nvd);\n    }\n  }\n  else if(nvd.type === 'text') {\n    if(nvd.type === 'dom') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'text') {\n      diffT2T(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      replaceWith(elem, nvd);\n    }\n  }\n  else if(nvd.type === 'geom') {\n    if(nvd.type === 'dom') {\n      diffG2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffG2G(elem, ovd, nvd);\n    }\n  }\n}\n\nfunction diffD2D(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diff(cns[i], ovd.children[i], nvd.children[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, nvd.children[i]);\n    }\n  }\n}\n\nfunction diffD2G(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.content);\n}\n\nfunction diffT2T(elem, ovd, nvd) {\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, ovd.children[i], nvd.children[i], true);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, nvd.children[i]);\n    }\n  }\n}\n\nfunction diffG2D(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.children);\n}\n\nfunction diffG2G(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  let ol = ovd.content.length;\n  let nl = nvd.content.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(lastChild, i, ovd.content[i], nvd.content[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, nvd.content[i]);\n    }\n  }\n}\n\nfunction diffBb(elem, obb, nbb) {\n  let ol = obb.length;\n  let nl = nbb.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, obb[i], nbb[i]);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, nbb[i]);\n    }\n  }\n}\n\nfunction diffItem(elem, i, ovd, nvd, isText) {\n  let cns = elem.childNodes;\n  if(ovd.tagName !== nvd.tagName) {\n    replaceWith(cns[i], nvd);\n  }\n  else {\n    let op = {};\n    for(let j = 0, len = ovd.props.length; j < len; j++) {\n      let prop = ovd.props[j];\n      let [k, v] = prop;\n      op[k] = v;\n    }\n    for(let j = 0, len = nvd.props.length; j < len; j++) {\n      let prop = nvd.props[j];\n      let [k, v] = prop;\n      // 已有不等更新，没有添加\n      if(op.hasOwnProperty(k)) {\n        if(op[k] !== v) {\n          cns[i].setAttribute(k, v);\n        }\n        delete op[k];\n      }\n      else {\n        cns[i].setAttribute(k, v);\n      }\n    }\n    // 多余的删除\n    for(var k in op) {\n      if(op.hasOwnProperty(k)) {\n        cns[i].removeAttribute(k);\n      }\n    }\n    if(isText && ovd.content !== nvd.content) {\n      cns[i].textContent = nvd.content;\n    }\n  }\n}\n\nfunction replaceWith(elem, vd) {\n  let res;\n  if(Array.isArray(vd)) {\n    res = '';\n    vd.forEach(item => {\n      res += util.joinVirtualDom(item);\n    });\n  }\n  else {\n    res = util.joinVirtualDom(vd);\n  }\n  elem.insertAdjacentHTML('afterend', res);\n  elem.parentNode.removeChild(elem);\n}\n\nfunction insertAt(elem, cns, index, vd) {\n  let res = util.joinVirtualDom(vd);\n  if(index >= cns.length) {\n    elem.insertAdjacentHTML('beforeend', res);\n  }\n  else {\n    cns[index].insertAdjacentHTML('beforebegin', res);\n  }\n}\n\nfunction removeAt(elem, cns, index) {\n  if(cns[index]) {\n    elem.removeChild(cns[index]);\n  }\n}\n\nexport default diff;\n","import Dom from '../node/Dom';\nimport util from '../util';\nimport mode from '../mode';\nimport domDiff from '../domDiff';\n\nfunction getDom(dom) {\n  if(util.isString(dom)) {\n    let o = document.querySelector(dom);\n    if(!o) {\n      throw new Error('can not find dom of selector: ' + dom);\n    }\n    return o;\n  }\n  if(!dom) {\n    throw new Error('can not find dom: ' + dom);\n  }\n  return dom;\n}\n\nfunction renderProp(k, v) {\n  let s = Array.isArray(v) ? util.joinSourceArray(v) : util.stringify(v);\n  if(k === 'className') {\n    k = 'class';\n  }\n  return ' ' + k + '=\"' + util.encodeHtml(s, true) + '\"';\n}\n\nclass Root extends Dom {\n  constructor(tagName, props, children) {\n    super(tagName, props, children);\n    this.__node = null; // 真实DOM引用\n  }\n\n  __initProps() {\n    if(this.props.width !== undefined) {\n      let value = parseInt(this.props.width);\n      if(!isNaN(value) && value > 0) {\n        this.__width = value;\n      }\n    }\n    if(this.props.height !== undefined) {\n      let value = parseInt(this.props.height);\n      if(!isNaN(value) && value > 0) {\n        this.__height = value;\n      }\n    }\n  }\n\n  __genHtml() {\n    let res = `<${this.tagName}`;\n    // 拼接处理属性\n    for(let i = 0, len = this.__props.length; i < len; i++) {\n      let item = this.__props[i];\n      res += renderProp(item[0], item[1]);\n    }\n    res += `></${this.tagName}>`;\n    return res;\n  }\n\n  __cb(e, force) {\n    if(e.touches && e.touches.length > 1) {\n      return;\n    }\n    let { node } = this;\n    let { x, y, top, right } = node.getBoundingClientRect();\n    x = x || top || 0;\n    y = y || right || 0;\n    let { clientX, clientY } = e.touches ? (e.touches[0] || {}) : e;\n    x = clientX - x;\n    y = clientY - y;\n    this.__emitEvent({\n      event: e,\n      x,\n      y,\n      covers: [],\n    }, force);\n  }\n\n  __initEvent() {\n    let { node } = this;\n    ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseup', 'touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach(type => {\n      node.addEventListener(type, e => {\n        this.__cb(e, ['touchend', 'touchcancel'].indexOf(type) > -1);\n      });\n    });\n  }\n\n  appendTo(dom) {\n    dom = getDom(dom);\n    this.__initProps();\n    // 已有root节点\n    if(dom.nodeName.toUpperCase() === this.tagName.toUpperCase()) {\n      this.__node = dom;\n      if(this.width) {\n        dom.setAttribute('width', this.width);\n      }\n      if(this.height) {\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 没有canvas/svg节点则生成一个新的\n    else {\n      this.__node = dom.querySelector(this.tagName);\n      if(!this.__node) {\n        dom.innerHTML = this.__genHtml();\n        this.__node = dom.querySelector(this.tagName);\n      }\n    }\n    // 没有设置width/height则采用css计算形式\n    if(!this.width || !this.height) {\n      let css = window.getComputedStyle(dom, null);\n      if(!this.width) {\n        this.__width = parseInt(css.getPropertyValue('width'));\n        dom.setAttribute('width', this.width);\n      }\n      if(!this.height) {\n        this.__height = parseInt(css.getPropertyValue('height'));\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 只有canvas有ctx，svg用真实dom\n    let renderMode;\n    if(this.tagName === 'canvas') {\n      this.__ctx = this.__node.getContext('2d');\n      this.__ctx.clearRect(0, 0, this.width, this.height);\n      renderMode = mode.CANVAS;\n    }\n    else if(this.tagName === 'svg') {\n      renderMode = mode.SVG;\n    }\n    // canvas/svg作为根节点一定是block或flex，不会是inline\n    let { style } = this;\n    if(['flex', 'block'].indexOf(style.display) === -1) {\n      style.display = 'block';\n    }\n    // 同理position不能为absolute\n    if(style.position === 'absolute') {\n      style.position = 'static';\n    }\n    this.__traverse(this.__ctx, renderMode);\n    // canvas的宽高固定初始化\n    style.width = this.width;\n    style.height = this.height;\n    this.__initStyle();\n    this.__layout({\n      x: 0,\n      y: 0,\n      w: this.width,\n      h: this.height,\n    });\n    this.__layoutAbs(this);\n    this.render(renderMode);\n    if(renderMode === mode.SVG) {\n      let nvd = this.virtualDom;\n      if(this.node.__karasInit) {\n        domDiff(this.node.firstChild, this.node.__ovd, nvd);\n      } else {\n        this.node.innerHTML = util.joinVirtualDom(nvd);\n      }\n      this.node.__ovd = nvd;\n    }\n    if(!this.node.__karasInit) {\n      this.node.__karasInit = true;\n      this.__initEvent();\n    }\n  }\n\n  get node() {\n    return this.__node;\n  }\n}\n\nexport default Root;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Line extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // start和end表明线段的首尾坐标，control表明控制点坐标\n    this.__start = [];\n    this.__end = [];\n    this.__control = [];\n    if(Array.isArray(this.props.start)) {\n      this.__start = this.props.start;\n    }\n    if(Array.isArray(this.props.end)) {\n      this.__end = this.props.end;\n    }\n    if(Array.isArray(this.props.control)) {\n      this.__control = this.props.control;\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, start, end, control, virtualDom } = this;\n    if(start.length < 2 || end.length < 2) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    let x1 = originX + start[0] * width;\n    let y1 = originY + start[1] * height;\n    let x2 = originX + end[0] * width;\n    let y2 = originY + end[1] * height;\n    let curve = 0;\n    let cx1, cy1, cx2, cy2;\n    if(Array.isArray(control[0])) {\n      curve++;\n      cx1 = originX + control[0][0] * width;\n      cy1 = originY + control[0][1] * height;\n    }\n    if(Array.isArray(control[1])) {\n      curve++;\n      cx2 = originX + control[1][0] * width;\n      cy2 = originY + control[1][1] * height;\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      if(curve === 2) {\n        ctx.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\n      }\n      else if(curve === 1) {\n        ctx.quadraticCurveTo(cx1, cy1, x2, y2);\n      }\n      else {\n        ctx.lineTo(x2, y2);\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      if(curve === 2) {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'path',\n          props: [\n            ['d', `M${x1} ${y1} C${cx1} ${cy1} ${cx2} ${cy2} ${x2} ${y2}`],\n            ['fill', 'none'],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n      else if(curve === 1) {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'path',\n          props: [\n            ['d', `M${x1} ${y1} Q${cx1} ${cy1} ${x2} ${y2}`],\n            ['fill', 'none'],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n      else {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y2],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n    }\n  }\n\n  get start() {\n    return this.__start;\n  }\n  get end() {\n    return this.__end;\n  }\n  get control() {\n    return this.__control;\n  }\n}\n\nexport default Line;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Polyline extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 折线所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n    // 原点位置，4个角，默认左下\n    if(['TOP_LEFT', 'TOP_RIGHT', 'BOTTOM_LEFT', 'BOTTOM_RIGHT'].indexOf(this.props.origin) > -1) {\n      this.__origin = this.props.origin;\n    }\n    else {\n      this.__origin = 'BOTTOM_LEFT';\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, points, origin, virtualDom } = this;\n    if(points.length < 2) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    let pts = this.__pts = [];\n    if(origin === 'TOP_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'TOP_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'BOTTOM_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'BOTTOM_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(pts[0][0], originY + pts[0][1]);\n      for(let i = 1, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        ctx.lineTo(point[0], point[1]);\n      }\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let points = '';\n      for(let i = 0, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        points += `${point[0]},${point[1]} `;\n      }\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'polyline',\n        props: [\n          ['points', points],\n          ['fill', 'none'],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  getPointsByX(x) {\n    let min = Infinity;\n    let len = this.__pts.length;\n    let res = [];\n    for(let i = 0; i < len; i++) {\n      let diff = Math.abs(this.__pts[i][0] - x);\n      if(diff < min) {\n        min = diff;\n      }\n    }\n    for(let i = 0; i < len; i++) {\n      let diff = Math.abs(this.__pts[i][0] - x);\n      if(diff === min) {\n        res.push({\n          index: i,\n          x: this.__pts[i][0],\n          y: this.__pts[i][1],\n        });\n      }\n    }\n    return res;\n  }\n\n  get points() {\n    return this.__points;\n  }\n  get origin() {\n    return this.__origin;\n  }\n}\n\nexport default Polyline;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Polygon extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, points, virtualDom } = this;\n    if(points.length < 3) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    points.forEach(item => {\n      item[0] = originX + item[0] * width;\n      item[1] = originY + item[1] * height;\n    });\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(points[0][0], originY + points[0][1]);\n      for(let i = 1, len = points.length; i < len; i++) {\n        let point = points[i];\n        ctx.lineTo(point[0], point[1]);\n      }\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let points = '';\n      for(let i = 0, len = points.length; i < len; i++) {\n        let point = points[i];\n        points += `${point[0]},${point[1]} `;\n      }\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'polygon',\n        props: [\n          ['points', points],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get points() {\n    return this.__points;\n  }\n}\n\nexport default Polygon;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nconst OFFSET = Math.PI * 0.5;\n\nfunction getCoordByDegree(x, y, r, d) {\n  while(d > 360) {\n    d -= 360;\n  }\n  while(d < 0) {\n    d += 360;\n  }\n  if(d >= 0 && d < 90) {\n    return [\n      x + Math.sin(d * Math.PI / 180) * r,\n      y - Math.cos(d * Math.PI / 180) * r\n    ];\n  }\n  else if(d >= 90 && d < 180) {\n    return [\n      x + Math.cos((d - 90) * Math.PI / 180) * r,\n      y + Math.sin((d - 90) * Math.PI / 180) * r,\n    ];\n  }\n  else if(d >= 180 && d < 270) {\n    return [\n      x - Math.cos((270 - d) * Math.PI / 180) * r,\n      y + Math.sin((270 - d) * Math.PI / 180) * r,\n    ];\n  }\n  else {\n    return [\n      x - Math.sin((360 - d) * Math.PI / 180) * r,\n      y - Math.cos((360 - d) * Math.PI / 180) * r,\n    ];\n  }\n}\n\nclass Sector extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 角度\n    this.__start = 0;\n    this.__end = 0;\n    if(this.props.start) {\n      this.__start = parseFloat(this.props.start);\n      if(isNaN(this.start)) {\n        this.__start = 0;\n      }\n    }\n    if(this.props.end) {\n      this.__end = parseFloat(this.props.end);\n      if(isNaN(this.end)) {\n        this.__end = 0;\n      }\n    }\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, start, end, r, virtualDom } = this;\n    if(start === end) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    r *= Math.min(width, height) * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.arc(originX, originY, r, start * Math.PI / 180 - OFFSET, end * Math.PI / 180 - OFFSET);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let x1, y1, x2, y2;\n      [ x1, y1 ] = getCoordByDegree(originX, originY, r, start);\n      [ x2, y2 ] = getCoordByDegree(originX, originY, r, end);\n      let large = (end - start) > 180 ? 1 : 0;\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'path',\n        props: [\n          ['d', `M${originX} ${originY} L${x1} ${y1} A${r} ${r} 0 ${large} 1 ${x2} ${y2} z`],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get start() {\n    return this.__start;\n  }\n  get end() {\n    return this.__end;\n  }\n  get r() {\n    return this.__r;\n  }\n}\n\nexport default Sector;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Rect extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.lineTo(originX + width, originY);\n      ctx.lineTo(originX + width, originY + height);\n      ctx.lineTo(originX, originY + height);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'rect',\n        props: [\n          ['x', x],\n          ['y', y],\n          ['width', width],\n          ['height', height],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n}\n\nexport default Rect;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Circle extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, r, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    r *= Math.min(width, height) * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.arc(originX, originY, r, 0, 2 * Math.PI);\n      if(fill !== 'transparent') {\n        ctx.fill();\n      }\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'circle',\n        props: [\n          ['cx', originX],\n          ['cy', originY],\n          ['r', r],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get r() {\n    return this.__r;\n  }\n}\n\nexport default Circle;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Ellipse extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__rx = 1;\n    if(this.props.rx) {\n      this.__rx = parseFloat(this.props.rx);\n      if(isNaN(this.rx)) {\n        this.__rx = 1;\n      }\n    }\n    this.__ry = 1;\n    if(this.props.ry) {\n      this.__ry = parseFloat(this.props.ry);\n      if(isNaN(this.rx)) {\n        this.__ry = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, rx, ry, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    rx *= width * 0.5;\n    ry *= height * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.ellipse && ctx.ellipse(originX, originY, rx, ry, 0, 0, 2 * Math.PI);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'ellipse',\n        props: [\n          ['cx', originX],\n          ['cy', originY],\n          ['rx', rx],\n          ['ry', ry],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get rx() {\n    return this.__rx;\n  }\n  get ry() {\n    return this.__ry;\n  }\n}\n\nexport default Ellipse;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Grid extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // x,y被分为几格\n    this.__nx = 0;\n    if(this.props.nx) {\n      this.__nx = parseFloat(this.props.nx);\n      if(isNaN(this.nx)) {\n        this.__nx = 0;\n      }\n    }\n    this.__ny = 0;\n    if(this.props.ny) {\n      this.__ny = parseFloat(this.props.ny);\n      if(isNaN(this.ny)) {\n        this.__ny = 0;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { rx: x, ry: y, width, height, mlw, mtw, plw, ptw, style, ctx, nx, ny, virtualDom } = this;\n    if(width <= 0 || height <= 0) {\n      return;\n    }\n    if(nx < 3 && ny < 3) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + mlw + plw;\n    let originY = y + borderTopWidth.value + mtw + ptw;\n    let endX = originX + width;\n    let endY = originY + height;\n    let lx = [];\n    let ly = [];\n    if(nx >= 3) {\n      let per = width / (nx - 1);\n      for(let i = 0; i < nx; i++) {\n        ly.push(originX + i * per);\n      }\n    }\n    if(ny >= 3) {\n      let per = height / (ny - 1);\n      for(let i = 0; i < ny; i++) {\n        lx.push(originY + i * per);\n      }\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      lx.forEach(item => {\n        ctx.moveTo(originX, item);\n        ctx.lineTo(endX, item);\n      });\n      ly.forEach(item => {\n        ctx.moveTo(item, originY);\n        ctx.lineTo(item, endY);\n      });\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      lx.forEach(item => {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', originX],\n            ['y1', item],\n            ['x2', endX],\n            ['y2', item],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      });\n      ly.forEach(item => {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', item],\n            ['y1', originY],\n            ['x2', item],\n            ['y2', endY],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      });\n    }\n  }\n\n  get nx() {\n    return this.__nx;\n  }\n  get ny() {\n    return this.__ny;\n  }\n  get dash() {\n    return this.__dash;\n  }\n}\n\nexport default Grid;\n","import Dom from './node/Dom';\nimport Root from './node/Root';\nimport mode from './mode';\nimport Geom from './geom/Geom';\nimport Line from './geom/Line';\nimport Polyline from './geom/Polyline';\nimport Polygon from './geom/Polygon';\nimport Sector from './geom/Sector';\nimport Rect from './geom/Rect';\nimport Circle from './geom/Circle';\nimport Ellipse from './geom/Ellipse';\nimport Grid from './geom/Grid';\n\nGeom.register('$line', Line);\nGeom.register('$polyline', Polyline);\nGeom.register('$polygon', Polygon);\nGeom.register('$sector', Sector);\nGeom.register('$rect', Rect);\nGeom.register('$circle', Circle);\nGeom.register('$ellipse', Ellipse);\nGeom.register('$grid', Grid);\n\nlet karas = {\n  render(cs, dom) {\n    if(!(cs instanceof Root)) {\n      throw new Error('render root muse be canvas or svg');\n    }\n    if(dom) {\n      cs.appendTo(dom);\n    }\n    return cs;\n  },\n  createVd(tagName, props, children) {\n    if(['canvas', 'svg'].indexOf(tagName) > -1) {\n      return new Root(tagName, props, children);\n    }\n    if(Dom.isValid(tagName)) {\n      return new Dom(tagName, props, children);\n    }\n    throw new Error('can not use marker: ' + tagName);\n  },\n  createGm(tagName, props) {\n    let klass = Geom.getImplement(tagName);\n    return new klass(tagName, props);\n  },\n  createCp(cp, props) {\n    return new cp(props);\n  },\n  Geom,\n  mode,\n};\n\nif(typeof window != 'undefined') {\n  window.karas = karas;\n}\n\nexport default karas;\n"],"names":["Node","__x","__y","__ox","__oy","__width","__height","__prev","__next","__ctx","__parent","__style","__baseLine","__virtualDom","diff","x","ox","y","oy","CANVAS","SVG","div","measure","s","style","document","createElement","position","left","top","visibility","body","appendChild","fontSize","innerText","css","window","getComputedStyle","parseFloat","width","AUTO","PX","PERCENT","arr2hash","arr","hash","i","len","length","item","Array","isArray","list","Object","keys","j","k","hash2arr","push","spread","temp","splice","Xom","tagName","props","__props","__tagName","__listener","forEach","test","slice","toLowerCase","__mtw","__mrw","__mbw","__mlw","__ptw","__prw","__pbw","__plw","data","w","display","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","unit","value","__mpWidth","__layoutBlock","__layoutFlex","__layoutInline","mp","renderMode","bb","ctx","height","mlw","mtw","plw","ptw","prw","pbw","virtualDom","right","bottom","backgroundColor","borderTopWidth","borderTopColor","borderTopStyle","borderRightWidth","borderRightColor","borderRightStyle","borderBottomWidth","borderBottomColor","borderBottomStyle","borderLeftWidth","borderLeftColor","borderLeftStyle","transform","parent","h","__offsetX","__offsetY","translateX","translateY","rx","ry","x1","y1","mode","beginPath","fillStyle","rect","fill","closePath","type","x2","lineWidth","strokeStyle","setLineDash","moveTo","lineTo","stroke","y2","mrw","mbw","arial","lhr","car","blr","mdr","lgr","RESET","borderSizing","fontFamily","color","fontStyle","fontWeight","lineHeight","verticalAlign","flexGrow","flexShrink","flexBasis","flexDirection","justifyContent","alignItems","textAlign","strokeWidth","strokeDasharray","reset","v","toString","isType","obj","call","isNumber","joinSourceArray","res","stringify","isNil","encodeHtml","prop","replace","undefined","joinVirtualDom","vd","content","children","util","isObject","isString","isFunction","isBoolean","isDate","parserOneBorder","direction","key","exec","c","indexOf","normalize","hasOwnProperty","background","bgc","flex","border","borderTop","borderRight","borderBottom","borderLeft","margin","padding","match","split","map","matrix","matrix3d","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","perspective","font","Math","max","setFontStyle","getBaseLine","normal","LineBox","__content","fillText","CHAR_WIDTH_CACHE","Text","__lineBoxes","__charWidthList","__charWidth","__textWidth","charWidthList","cache","sum","char","charAt","mw","measureText","charWidth","isVirtual","maxX","lineBoxes","begin","count","lineBox","render","textWidth","n","min","last","baseLine","__renderMode","LineGroup","__list","__calBaseLine","IMPLEMENT","Geom","total","isDirectionRow","b","main","fixedHeight","fixedWidth","e","force","event","covers","listener","outerWidth","outerHeight","cb","target","name","Error","implement","TAG_NAME","INLINE","Dom","__children","__flowChildren","__absChildren","__lineGroups","__flowY","__traverseChildren","prev","__traverse","text","parentStyle","__initStyle","__measure","flowChildren","__tryLayInline","isRecursion","__calAutoBasis","b2","min2","max2","__layout","__calAbs","Infinity","lineGroups","lineGroup","add","fw","size","horizonAlign","growList","shrinkList","basisList","minList","growSum","shrinkSum","basisSum","maxSum","maxCross","isOverflow","shrink","grow","overflow","free","child","center","between","around","absChildren","container","flowY","pw","ph","__layoutAbs","width2","height2","w2","h2","widthPx","heightPx","hasChildEmit","__emitEvent","elem","ovd","nvd","diffD2D","replaceWith","diffD2G","diffT2T","diffG2D","diffG2G","diffBb","firstChild","ol","nl","lastChild","cns","childNodes","removeAt","insertAt","diffItem","obb","nbb","isText","op","setAttribute","removeAttribute","textContent","insertAdjacentHTML","parentNode","removeChild","index","getDom","dom","o","querySelector","renderProp","Root","__node","parseInt","isNaN","touches","node","getBoundingClientRect","clientX","clientY","addEventListener","__cb","__initProps","nodeName","toUpperCase","innerHTML","__genHtml","getPropertyValue","getContext","clearRect","__karasInit","domDiff","__ovd","__initEvent","Line","__start","__end","__control","start","end","control","originX","originY","curve","cx1","cy1","cx2","cy2","bezierCurveTo","quadraticCurveTo","Polyline","__points","points","origin","__origin","pts","__pts","point","abs","Polygon","OFFSET","PI","getCoordByDegree","r","d","sin","cos","Sector","__r","arc","large","Rect","Circle","Ellipse","__rx","__ry","ellipse","Grid","__nx","nx","__ny","ny","endX","endY","lx","ly","per","__dash","register","karas","cs","appendTo","createVd","isValid","createGm","klass","getImplement","createCp","cp"],"mappings":"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"}