{"version":3,"file":"index.js","sources":["src/node/Node.js","src/mode.js","src/style/unit.js","src/node/Xom.js","src/style/font.js","src/style/reset.js","src/util.js","src/style/css.js","src/node/LineBox.js","src/node/Text.js","src/node/LineGroup.js","src/geom/Geom.js","src/node/Dom.js","src/domDiff.js","src/node/CS.js","src/geom/Line.js","src/geom/Polyline.js","src/geom/Polygon.js","src/geom/Sector.js","src/geom/Rect.js","src/geom/Circle.js","src/geom/Ellipse.js","src/geom/Grid.js","src/index.js"],"sourcesContent":["class Node {\n  constructor() {\n    this.__x = 0;\n    this.__y = 0;\n    this.__width = 0;\n    this.__height = 0;\n    this.__prev = null;\n    this.__next = null;\n    this.__ctx = null; // canvas的context\n    this.__parent = null;\n    this.__style = {}; // style被解析后的k-v形式\n    this.__baseLine = 0;\n    this.__virtualDom = {};\n  }\n\n  __offsetX(diff) {\n    this.__x += diff;\n  }\n\n  __offsetY(diff) {\n    this.__y += diff;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    return this.__width;\n  }\n  get height() {\n    return this.__height;\n  }\n  get outerWidth() {\n    return this.__width;\n  }\n  get outerHeight() {\n    return this.__height;\n  }\n  get prev() {\n    return this.__prev;\n  }\n  get next() {\n    return this.__next;\n  }\n  get parent() {\n    return this.__parent;\n  }\n  get style() {\n    return this.__style;\n  }\n  get ctx() {\n    return this.__ctx;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n}\n\nexport default Node;\n","const CANVAS = 0;\nconst SVG = 1;\n\nlet div;\n\nexport default {\n  CANVAS,\n  SVG,\n  measure(s, style) {\n    if(!div) {\n      div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '99999px';\n      div.style.top = '-99999px';\n      div.style.visibility = 'hidden';\n      document.body.appendChild(div);\n    }\n    div.style.fontSize = style.fontSize + 'px';\n    div.innerText = s;\n    let css = window.getComputedStyle(div, null);\n    return parseFloat(css.width);\n  }\n};\n","export default {\n  AUTO: 0,\n  PX: 1,\n  PERCENT: 2,\n};\n","import Node from './Node';\nimport mode from '../mode';\nimport unit from '../style/unit';\n\nfunction arr2hash(arr) {\n  let hash = {};\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(Array.isArray(item)) {\n      hash[item[0]] = item[1];\n    }\n    else {\n      for(let list = Object.keys(item), j = list.length - 1; j >= 0; j--) {\n        let k = list[j];\n        hash[k] = item[k];\n      }\n    }\n  }\n  return hash;\n}\n\nfunction hash2arr(hash) {\n  let arr = [];\n  for(let list = Object.keys(hash), i = 0, len = list.length; i < len; i++) {\n    let k = list[i];\n    arr.push([k, hash[k]]);\n  }\n  return arr;\n}\n\nfunction spread(arr) {\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(!Array.isArray(item)) {\n      let temp = [];\n      for(let list = Object.keys(item), j = 0, len = list.length; j < len; j++) {\n        let k = list[j];\n        temp.push([k, item[k]]);\n      }\n      arr.splice(i, 1, ...temp);\n    }\n  }\n  return arr;\n}\n\nclass Xom extends Node {\n  constructor(tagName, props) {\n    super();\n    props = props || [];\n    // 构建工具中都是arr，手写可能出现hash情况\n    if(Array.isArray(props)) {\n      this.props = arr2hash(props);\n      this.__props = spread(props);\n    }\n    else {\n      this.props = props;\n      this.__props = hash2arr(props);\n    }\n    this.__tagName = tagName;\n    this.__style = this.props.style || {}; // style被解析后的k-v形式\n    this.__listener = {};\n    this.__props.forEach(item => {\n      let k = item[0];\n      if(/^on[a-zA-Z]/.test(k)) {\n        this.__listener[k.slice(2).toLowerCase()] = item[1];\n      }\n    });\n    // margin和padding的宽度\n    this.__mtw = 0;\n    this.__mrw = 0;\n    this.__mbw = 0;\n    this.__mlw = 0;\n    this.__ptw = 0;\n    this.__prw = 0;\n    this.__pbw = 0;\n    this.__plw = 0;\n  }\n\n  __preLay(data) {\n    let { w } = data;\n    let { style, style: {\n      display,\n      width,\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n    } } = this;\n    if(display === 'none') {\n      return;\n    }\n    // 计算margin/padding，转换百分比\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    this.__mlw = this.__mpWidth(marginLeft, w);\n    this.__mtw = this.__mpWidth(marginTop, w);\n    this.__mrw = this.__mpWidth(marginRight, w);\n    this.__mbw = this.__mpWidth(marginBottom, w);\n    this.__plw = this.__mpWidth(paddingLeft, w);\n    this.__ptw = this.__mpWidth(paddingTop, w);\n    this.__prw = this.__mpWidth(paddingRight, w);\n    this.__pbw = this.__mpWidth(paddingBottom, w);\n    if(display === 'block') {\n      this.__preLayBlock(data);\n    }\n    else if(display === 'flex') {\n      this.__preLayFlex(data);\n    }\n    else if(display === 'inline') {\n      this.__preLayInline(data);\n    }\n    // relative偏移\n    let { width: w2, height } = this.parent || this;\n    let {\n      position,\n      top,\n      right,\n      bottom,\n      left,\n    } = style;\n    if(position === 'relative') {\n      if(left.unit !== unit.AUTO) {\n        let diff = left.unit === unit.PX ? left.value : left.value * w2 * 0.01;\n        this.__offsetX(diff);\n      }\n      else if(right.unit !== unit.AUTO) {\n        let diff = right.unit === unit.PX ? right.value : right.value * w2 * 0.01;\n        this.__offsetX(-diff);\n      }\n      if(top.unit !== unit.AUTO) {\n        let diff = top.unit === unit.PX ? top.value : top.value * height * 0.01;\n        this.__offsetY(diff);\n      }\n      else if(bottom.unit !== unit.AUTO) {\n        let diff = bottom.unit === unit.PX ? bottom.value : bottom.value * height * 0.01;\n        this.__offsetY(-diff);\n      }\n    }\n  }\n\n  __mpWidth(mp, w) {\n    if(mp.unit === unit.PX) {\n      return mp.value;\n    }\n    else if(mp.unit === unit.PERCENT) {\n      return mp.value * w * 0.01;\n    }\n    return 0;\n  }\n\n  render(renderMode) {\n    this.__virtualDom = {\n      bb: [],\n    };\n    let { ctx, style, x, y, width, height, mlw, mtw, plw, ptw, prw, pbw, virtualDom } = this;\n    let {\n      display,\n      backgroundColor,\n      borderTopWidth,\n      borderTopColor,\n      borderTopStyle,\n      borderRightWidth,\n      borderRightColor,\n      borderRightStyle,\n      borderBottomWidth,\n      borderBottomColor,\n      borderBottomStyle,\n      borderLeftWidth,\n      borderLeftColor,\n      borderLeftStyle,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    x += mlw;\n    y += mtw;\n    if(backgroundColor) {\n      let x1 = x;\n      if(borderLeftWidth) {\n        x1 += borderLeftWidth.value;\n      }\n      let y1 = y;\n      if(borderTopWidth) {\n        y1 += borderTopWidth.value;\n      }\n      let w = width + plw + prw;\n      let h = height + ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.fillStyle = backgroundColor;\n        ctx.rect(x1, y1, w, h);\n        ctx.fill();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        virtualDom.bb.push({\n          type: 'item',\n          tagName: 'rect',\n          props: [\n            ['x', x1],\n            ['y', y1],\n            ['width', w],\n            ['height', h],\n            ['fill', backgroundColor]\n          ],\n        });\n      }\n    }\n    if(borderTopWidth.value) {\n      let x1 = x + borderLeftWidth.value;\n      let y1 = y + borderTopWidth.value * 0.5;\n      let x2 = x1 + width;\n      x2 += plw + prw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderTopWidth.value;\n        ctx.strokeStyle = borderTopColor;\n        if(borderTopStyle === 'dashed') {\n          ctx.setLineDash([borderTopWidth.value * 3, borderTopWidth.value * 2]);\n        }\n        else if(borderTopStyle === 'dotted') {\n          ctx.setLineDash([borderTopWidth.value, borderTopWidth.value]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y1);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y1],\n            ['stroke-width', borderTopWidth.value],\n            ['stroke', borderTopColor]\n          ],\n        };\n        if(borderTopStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderTopWidth.value * 3}, ${borderTopWidth.value * 2}`])\n        }\n        else if(borderTopStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderTopWidth.value}, ${borderTopWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderRightWidth.value) {\n      let x1 = x + width + borderLeftWidth.value + borderRightWidth.value * 0.5;\n      let y1 = y;\n      let y2 = y1 + height + borderTopWidth.value + borderBottomWidth.value;\n      x1 += plw + prw;\n      y2 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderRightWidth.value;\n        ctx.strokeStyle = borderRightColor;\n        if(borderRightStyle === 'dashed') {\n          ctx.setLineDash([borderRightWidth.value * 3, borderRightWidth.value * 2]);\n        }\n        else if(borderRightStyle === 'dotted') {\n          ctx.setLineDash([borderRightWidth.value, borderRightWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x1, y2);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x1],\n            ['y2', y2],\n            ['stroke-width', borderRightWidth.value],\n            ['stroke', borderRightColor]\n          ],\n        };\n        if(borderRightStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderRightWidth.value * 3}, ${borderRightWidth.value * 2}`])\n        }\n        else if(borderTopStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderRightWidth.value}, ${borderRightWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderBottomWidth.value) {\n      let x1 = x + borderLeftWidth.value;\n      let y1 = y + height + borderTopWidth.value + borderBottomWidth.value * 0.5;\n      let x2 = x1 + width;\n      x2 += plw + prw;\n      y1 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderBottomWidth.value;\n        ctx.strokeStyle = borderBottomColor;\n        if(borderBottomStyle === 'dashed') {\n          ctx.setLineDash([borderBottomWidth.value * 3, borderBottomWidth.value * 2]);\n        }\n        else if(borderBottomStyle === 'dotted') {\n          ctx.setLineDash([borderBottomWidth.value, borderBottomWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y1);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y1],\n            ['stroke-width', borderBottomWidth.value],\n            ['stroke', borderBottomColor]\n          ],\n        };\n        if(borderBottomStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderBottomWidth.value * 3}, ${borderBottomWidth.value * 2}`])\n        }\n        else if(borderBottomStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderBottomWidth.value}, ${borderBottomWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n    if(borderLeftWidth.value) {\n      let x1 = x + borderLeftWidth.value * 0.5;\n      let y1 = y;\n      let y2 = y1 + height + borderTopWidth.value + borderBottomWidth.value;\n      y2 += ptw + pbw;\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.lineWidth = borderLeftWidth.value;\n        ctx.strokeStyle = borderLeftColor;\n        if(borderLeftStyle === 'dashed') {\n          ctx.setLineDash([borderLeftWidth.value * 3, borderLeftWidth.value * 2]);\n        }\n        else if(borderLeftStyle === 'dotted') {\n          ctx.setLineDash([borderLeftWidth.value, borderLeftWidth.value * 2]);\n        }\n        else {\n          ctx.setLineDash([]);\n        }\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x1, y2);\n        ctx.stroke();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        let item = {\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x1],\n            ['y2', y2],\n            ['stroke-width', borderLeftWidth.value],\n            ['stroke', borderLeftColor]\n          ],\n        };\n        if(borderLeftStyle === 'dashed') {\n          item.props.push(['stroke-dasharray', `${borderLeftWidth.value * 3}, ${borderLeftWidth.value * 2}`])\n        }\n        else if(borderLeftStyle === 'dotted') {\n          item.props.push(['stroke-dasharray', `${borderLeftWidth.value}, ${borderLeftWidth.value}`])\n        }\n        virtualDom.bb.push(item);\n      }\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get mtw() {\n    return this.__mtw;\n  }\n  get mrw() {\n    return this.__mtw;\n  }\n  get mbw() {\n    return this.__mtw;\n  }\n  get mlw() {\n    return this.__mtw;\n  }\n  get ptw() {\n    return this.__ptw;\n  }\n  get prw() {\n    return this.__ptw;\n  }\n  get pbw() {\n    return this.__ptw;\n  }\n  get plw() {\n    return this.__ptw;\n  }\n  get outerWidth() {\n    let { mlw, mrw, plw, prw, style: {\n      borderLeftWidth,\n      borderRightWidth,\n    } } = this;\n    return this.width\n      + borderLeftWidth.value\n      + borderRightWidth.value\n      + mlw\n      + mrw\n      + plw\n      + prw;\n  }\n  get outerHeight() {\n    let { mtw, mbw, ptw, pbw, style: {\n      borderTopWidth,\n      borderBottomWidth,\n    } } = this;\n    return this.height\n      + borderTopWidth.value\n      + borderBottomWidth.value\n      + mtw\n      + mbw\n      + ptw\n      + pbw;\n  }\n  get listener() {\n    return this.__listener;\n  }\n}\n\nexport default Xom;\n","'use strict';\n\nexport default {\n  arial: {\n    lhr: 1.14990234375, // 默认line-height ratio，(67+1854+434)/2048\n    car: 1.1171875, // content-area ratio，(1854+434)/2048\n    blr: 0.9052734375, // base-line ratio，1854/2048\n    mdr: 0.64599609375, // middle ratio，(1854-1062/2)/2048\n    lgr: 0.03271484375, // line-gap ratio，67/2048\n  },\n};\n","const RESET = {\n  position: 'static',\n  display: 'block',\n  borderSizing: 'content-box',\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto',\n  marginTop: 0,\n  marginRight: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  paddingTop: 0,\n  paddingRight: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  fontSize: 16,\n  fontFamily: 'arial',\n  color: '#000',\n  fontStyle: 'normal',\n  fontWeight: 400,\n  lineHeight: 'normal',\n  borderTopWidth: 0,\n  borderRightWidth: 0,\n  borderBottomWidth: 0,\n  borderLeftWidth: 0,\n  borderTopStyle: 'solid',\n  borderRightStyle: 'solid',\n  borderBottomStyle: 'solid',\n  borderLeftStyle: 'solid',\n  verticalAlign: 'baseline',\n  width: 'auto',\n  height: 'auto',\n  flexGrow: 0,\n  flexShrink: 1,\n  flexBasis: 'auto',\n  flexDirection: 'row',\n  justifyContent: 'flex-start',\n  alignItems: 'stretch',\n  textAlign: 'left',\n  visibility: 'visible',\n  fill: '#000',\n  stroke: '#000',\n  strokeWidth: 0,\n  strokeDasharray: [],\n};\n\nlet reset = [];\n\nObject.keys(RESET).forEach(k => {\n  let v = RESET[k];\n  reset.push({\n    k,\n    v,\n  });\n});\n\nexport default reset;\n","let toString = {}.toString;\nfunction isType(type) {\n  return function(obj) {\n    return toString.call(obj) === '[object ' + type + ']';\n  }\n}\n\nlet isNumber = isType('Number');\n\nfunction joinSourceArray(arr) {\n  var res = '';\n  for(var i = 0, len = arr.length; i < len; i++) {\n    var item = arr[i];\n    if(Array.isArray(item)) {\n      res += joinSourceArray(item);\n    }\n    else {\n      res += stringify(item);\n    }\n  }\n  return res;\n}\n\nfunction stringify(s) {\n  if(isNil(s)) {\n    return '';\n  }\n  return s.toString();\n}\n\nfunction encodeHtml(s, prop) {\n  if(prop) {\n    return s.replace(/\"/g, '&quot;');\n  }\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\n\nfunction isNil(v) {\n  return v === undefined || v === null;\n}\n\nfunction joinVirtualDom(vd) {\n  if(vd.type === 'item') {\n    let s = '';\n    vd.props.forEach(item => {\n      s += ` ${item[0]}=\"${item[1]}\"`;\n    });\n    if(vd.tagName === 'text') {\n      return `<text${s}>${vd.content}</text>`;\n    }\n    return `<${vd.tagName}${s}/>`;\n  }\n  else if(vd.type === 'text') {\n    let s = ``;\n    vd.children.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    return `<g>${s}</g>`;\n  }\n  else if(vd.type === 'dom') {\n    let s = '<g>';\n    vd.bb.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g><g>';\n    vd.children.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g>';\n    return `<g>${s}</g>`;\n  }\n  else if(vd.type === 'geom') {\n    let s = '<g>';\n    vd.bb.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g><g>';\n    vd.content.forEach(item => {\n      s += joinVirtualDom(item);\n    });\n    s += '</g>';\n    return `<g>${s}</g>`;\n  }\n}\n\nlet util = {\n  isObject: isType('Object'),\n  isString: isType('String'),\n  isFunction: isType('Function'),\n  isNumber,\n  isBoolean: isType('Boolean'),\n  isDate: isType('Date'),\n  stringify,\n  joinSourceArray(arr) {\n    return joinSourceArray(arr);\n  },\n  encodeHtml,\n  isNil,\n  joinVirtualDom,\n};\n\nexport default util;\n","import unit from './unit';\nimport font from './font';\nimport reset from './reset';\nimport util from '../util';\n\nfunction parserOneBorder(style, direction) {\n  let key = `border${direction}`;\n  if(!style[key]) {\n    return;\n  }\n  let w = /\\b\\d+px\\b/i.exec(style[key]);\n  if(w) {\n    style[key + 'Width'] = w[0];\n  }\n  let s = /\\b(solid|dashed|dotted)\\b/i.exec(style[key]);\n  if(s) {\n    style[key + 'Style'] = s[1];\n  }\n  let c = /#[0-9a-f]{3,6}/i.exec(style[key]);\n  if(c && [4, 7].indexOf(c[0].length) > -1) {\n    style[key + 'Color'] = c[0];\n  }\n}\n\nfunction normalize(style) {\n  // 默认reset\n  reset.forEach(item => {\n    if(!style.hasOwnProperty(item.k)) {\n      style[item.k] = item.v;\n    }\n  });\n  // 处理缩写\n  // TODO: 重复声明时优先级\n  if(style.background) {\n    let bgc = /#[0-9a-f]{3,6}/i.exec(style.background);\n    if(bgc && [4, 7].indexOf(bgc[0].length) > -1) {\n      style.backgroundColor = bgc[0];\n    }\n  }\n  if(style.flex) {\n    if(style.flex === 'none') {\n      style.flexGrow = 0;\n      style.flexShrink = 0;\n      style.flexBasis = 'auto';\n    }\n    else if(style.flex === 'auto') {\n      style.flexGrow = 1;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n    else if(/^[\\d.]+$/.test(style.flex)) {\n      style.flexGrow = parseFloat(style.flex);\n      style.flexShrink = 1;\n      style.flexBasis = 0;\n    }\n    else if(/^[\\d.]+px$/.test(style.flex)) {}\n    else if(/^[\\d.]+%$/.test(style.flex)) {}\n    else {\n      style.flexGrow = 0;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n  }\n  if(style.border) {\n    style.borderTop = style.borderRight = style.borderBottom = style.borderLeft = style.border;\n  }\n  if(style.margin) {\n    style.marginTop = style.marginRight = style.marginBottom = style.marginLeft = style.margin;\n  }\n  if(style.padding) {\n    style.paddingTop = style.paddingRight = style.paddingBottom = style.paddingLeft = style.padding;\n  }\n  parserOneBorder(style, 'Top');\n  parserOneBorder(style, 'Right');\n  parserOneBorder(style, 'Bottom');\n  parserOneBorder(style, 'Left');\n  // 转化不同单位值为对象标准化\n  [\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'top',\n    'right',\n    'bottom',\n    'left',\n    'width',\n    'height',\n    'flexBasis',\n  ].forEach(k => {\n    let v = style[k];\n    // 编译工具前置解析优化跳出\n    if(!util.isNil(v) && v.unit) {\n      return;\n    }\n    if(v === 'auto') {\n      style[k] = {\n        unit: unit.AUTO,\n      };\n    }\n    else if(/%$/.test(v)) {\n      v = parseFloat(v) || 0;\n      style[k] = {\n        value: v,\n        unit: unit.PERCENT,\n      };\n    }\n    else {\n      v = parseFloat(v) || 0;\n      style[k] = {\n        value: v,\n        unit: unit.PX,\n      };\n    }\n  });\n  // 计算lineHeight为px值，最小范围\n  let lineHeight = style.lineHeight;\n  if(lineHeight === 'normal') {\n    lineHeight = {\n      value: style.fontSize * font.arial.lhr,\n      unit: unit.PX,\n    };\n  }\n  else if(/px$/.test(lineHeight)) {\n    lineHeight = parseFloat(lineHeight);\n    lineHeight = {\n      value: Math.max(style.fontSize, lineHeight),\n      unit: unit.PX,\n    };\n  }\n  // 纯数字比例\n  else {\n    lineHeight = parseFloat(lineHeight) || 'normal';\n    // 非法数字\n    if(lineHeight === 'normal') {\n      lineHeight = {\n        value: style.fontSize * font.arial.lhr,\n        unit: unit.PX,\n      };\n    }\n    else {\n      lineHeight = {\n        value: lineHeight * style.fontSize,\n        unit: unit.PX,\n      };\n    }\n  }\n  style.lineHeight = lineHeight;\n}\n\nfunction setFontStyle(style) {\n  let { fontStyle, fontWeight, fontSize, fontFamily } = style;\n  return `${fontStyle} ${fontWeight} ${fontSize}px/${fontSize}px ${fontFamily}`;\n}\n\nfunction getBaseLine(style) {\n  let normal = style.fontSize * font.arial.lhr;\n  return (style.lineHeight.value - normal) * 0.5 + style.fontSize * font.arial.blr;\n}\n\nexport default {\n  normalize,\n  setFontStyle,\n  getBaseLine,\n};\n","import css from '../style/css';\nimport mode from '../mode';\n\nclass LineBox {\n  constructor(x, y, w, content, style) {\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    this.__content = content;\n    this.__style = style;\n    this.__virtualDom = {};\n  }\n\n  render(renderMode, ctx) {\n    let { style, content, x, y } = this;\n    y += css.getBaseLine(style);\n    if(renderMode === mode.CANVAS) {\n      ctx.fillText(content, x, y);\n    }\n    else if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'item',\n        tagName: 'text',\n        props: [\n          ['x', x],\n          ['y', y],\n          ['fill', style.color],\n          ['font-size', `${style.fontSize}px`]\n        ],\n        content,\n      };\n      // mode.appendHtml(`<text x=\"${x}\" y=\"${y + css.getBaseLine(style)}\" fill=\"${style.color}\" font-size=\"${style.fontSize}px\">${content}</text>`);\n    }\n  }\n\n  __offsetX(diff) {\n    this.__x += diff;\n  }\n\n  __offsetY(diff) {\n    this.__y += diff;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    return this.__width;\n  }\n  get content() {\n    return this.__content;\n  }\n  get style() {\n    return this.__style;\n  }\n  get baseLine() {\n    return css.getBaseLine(this.style);\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n}\n\nexport default LineBox;\n","import Node from './Node';\nimport LineBox from './LineBox';\nimport css from '../style/css';\nimport mode from '../mode';\n\nconst CHAR_WIDTH_CACHE = {};\n\nclass Text extends Node {\n  constructor(content) {\n    super();\n    this.__content = content.toString();\n    this.__lineBoxes = [];\n    this.__charWidthList = [];\n    this.__charWidth = 0;\n    this.__textWidth = 0;\n  }\n\n  // 预先计算每个字的宽度\n  __measure() {\n    this.__charWidthList = [];\n    let { ctx, content, style, charWidthList, renderMode } = this;\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(style);\n    }\n    let cache = CHAR_WIDTH_CACHE[style.fontSize] = CHAR_WIDTH_CACHE[style.fontSize] || {};\n    let length = content.length;\n    let sum = 0;\n    for(let i = 0; i < length; i++) {\n      let char = content.charAt(i);\n      let mw;\n      if(cache.hasOwnProperty(char)) {\n        mw = cache[char];\n      }\n      else if(renderMode === mode.CANVAS) {\n        mw = cache[char] = ctx.measureText(char).width;\n      }\n      else if(renderMode === mode.SVG) {\n        mw = cache[char] = mode.measure(char, style);\n      }\n      charWidthList.push(mw);\n      sum += mw;\n      this.__charWidth = Math.max(this.charWidth, mw);\n    }\n    this.__textWidth = sum;\n  }\n\n  __preLay(data, isVirtual) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let maxX = x;\n    let { ctx, content, style, lineBoxes, charWidthList, renderMode } = this;\n    // 顺序尝试分割字符串为lineBox，形成多行\n    let begin = 0;\n    let i = 0;\n    let count = 0;\n    let length = content.length;\n    while(i < length) {\n      count += charWidthList[i];\n      if (count === w) {\n        let lineBox = new LineBox(x, y, count, content.slice(begin, i + 1), style);\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count);\n        y += this.style.lineHeight.value;\n        begin = i + 1;\n        i = begin + 1;\n        count = 0;\n      }\n      else if (count > w) {\n        // 宽度不足时无法跳出循环，至少也要塞个字符形成一行\n        if(i === begin) {\n          i = begin + 1;\n        }\n        let lineBox = new LineBox(x, y, count - charWidthList[i], content.slice(begin, i), style);\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count - charWidthList[i]);\n        y += this.style.lineHeight.value;\n        begin = i;\n        i = i + 1;\n        count = 0;\n      }\n      else {\n        i++;\n      }\n    }\n    if(begin < length && begin < i) {\n      count = 0;\n      for(i = begin ;i < length; i++) {\n        count += charWidthList[i];\n      }\n      let lineBox = new LineBox(x, y, count, content.slice(begin, length), style);\n      lineBoxes.push(lineBox);\n      maxX = Math.max(maxX, x + count);\n      y += style.lineHeight.value;\n    }\n    this.__width = maxX - x;\n    this.__height = y - data.y;\n    if(isVirtual) {\n      this.__lineBoxes = [];\n    }\n    else {\n      let { textAlign } = style;\n      if(['center', 'right'].indexOf(textAlign) > -1) {\n        lineBoxes.forEach(lineBox => {\n          let diff = this.__width - lineBox.width;\n          if(diff > 0) {\n            lineBox.__offsetX(textAlign === 'center' ? diff * 0.5 : diff);\n          }\n        });\n      }\n    }\n  }\n\n  render(renderMode) {\n    const { ctx, style } = this;\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(style);\n      ctx.fillStyle = style.color;\n    }\n    this.lineBoxes.forEach(item => {\n      item.render(renderMode, ctx);\n    });\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'text',\n        children: this.lineBoxes.map(lineBox => lineBox.virtualDom),\n      };\n    }\n  }\n\n  __tryLayInline(w) {\n    return w - this.textWidth;\n  }\n\n  __offsetX(diff) {\n    super.__offsetX(diff);\n    this.lineBoxes.forEach(item => {\n      item.__offsetX(diff);\n    });\n  }\n\n  __offsetY(diff) {\n    super.__offsetY(diff);\n    this.lineBoxes.forEach(item => {\n      item.__offsetY(diff);\n    });\n  }\n\n  __calMaxAndMinWidth() {\n    let n = 0;\n    this.charWidthList.forEach(item => {\n      n = Math.max(n, item);\n    });\n    return { max: this.textWidth, min: n };\n  }\n\n  get content() {\n    return this.__content;\n  }\n  set content(v) {\n    this.__content = v;\n  }\n  get lineBoxes() {\n    return this.__lineBoxes;\n  }\n  get charWidthList() {\n    return this.__charWidthList;\n  }\n  get charWidth() {\n    return this.__charWidth;\n  }\n  get textWidth() {\n    return this.__textWidth;\n  }\n  get baseLine() {\n    let last = this.lineBoxes[this.lineBoxes.length - 1];\n    return last.y - this.y + last.baseLine;\n  }\n  get renderMode() {\n    return this.__renderMode;\n  }\n}\n\nexport default Text;\n","class LineGroup {\n  constructor(x, y) {\n    this.__list = [];\n    this.__x = x;\n    this.__y = y;\n    this.__baseLine = 0;\n  }\n\n  add(item) {\n    this.list.push(item);\n  }\n\n  __calBaseLine() {\n    let baseLine = 0;\n    this.list.forEach(item => {\n      baseLine = Math.max(baseLine, item.baseLine);\n    });\n    return baseLine;\n  }\n\n  verticalAlign() {\n    this.__baseLine = this.__calBaseLine();\n    // 仅当有2个和以上时才需要vertical对齐调整\n    if(this.list.length > 1) {\n      this.list.forEach(item => {\n        if(item.baseLine !== this.baseLine) {\n          item.__offsetY(this.baseLine - item.baseLine);\n        }\n      });\n    }\n  }\n\n  horizonAlign(diff) {\n    this.list.forEach(item => {\n      item.__offsetX(diff);\n    });\n  }\n\n  get list() {\n    return this.__list;\n  }\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    let width = 0;\n    this.list.forEach(item => {\n      width += item.width;\n    });\n    return width;\n  }\n  get height() {\n    let height = 0;\n    this.list.forEach(item => {\n      height = Math.max(height, item.height);\n    });\n    return height;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get size() {\n    return this.__list.length;\n  }\n}\n\nexport default LineGroup;\n","import Xom from '../node/Xom';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../mode';\n\nconst IMPLEMENT = {};\n\nclass Geom extends Xom {\n  constructor(tagName, props) {\n    super(tagName, props);\n  }\n\n  __initStyle() {\n    css.normalize(this.style);\n  }\n\n  __tryLayInline(w, total) {\n    // 无children，直接以style的width为宽度，不定义则为0\n    let { style: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    return w;\n  }\n\n  __calAutoBasis(isDirectionRow, w, h) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit !== unit.AUTO) {\n      b = max += main.value;\n    }\n    // border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value;\n      b += w;\n      max += w;\n      min += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value;\n      b += h;\n      max += h;\n      min += h;\n    }\n    return { b, min, max };\n  }\n\n  __preLayBlock(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { style } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // border影响x和y和尺寸\n    x += borderLeftWidth.value;\n    data.x = x;\n    y += borderTopWidth.value;\n    data.y = y;\n    w -= borderLeftWidth.value + borderRightWidth.value;\n    h -= borderTopWidth.value + borderBottomWidth.value;\n    this.__width = w;\n    this.__height = fixedHeight ? h : 0;\n  }\n\n  __preLayFlex(data) {\n    // 无children所以等同于block\n    this.__preLayBlock(data);\n  }\n\n  __preLayInline(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let { style } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n      }\n    }\n    // border影响x和y\n    x += borderLeftWidth.value;\n    data.x = x;\n    y += borderTopWidth.value;\n    data.y = y;\n    w -= borderLeftWidth.value + borderRightWidth.value;\n    h -= borderTopWidth.value + borderBottomWidth.value;\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : x - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n  }\n\n  __calAbs() {\n    return 0;\n  }\n\n  __emitEvent(e, force) {\n    let { event: { type }, x: xe, y: ye, covers } = e;\n    let { listener, style, x, y, outerWidth, outerHeight } = this;\n    if(style.display === 'none') {\n      return;\n    }\n    let cb;\n    if(listener.hasOwnProperty(type)) {\n      cb = listener[type];\n    }\n    if(force) {\n      cb && cb(e);\n      return;\n    }\n    if(xe >= x && ye >= y && xe <= x + outerWidth && ye <= y + outerHeight) {\n      for(let i = 0, len = covers.length; i < len; i++) {\n        let { x: x2, y: y2, w, h: h } = covers[i];\n        if(xe >= x2 && ye >= y2 && xe <= x2 + w && ye <= y2 + h) {\n          return;\n        }\n      }\n      if(!e.target) {\n        e.target = this;\n      }\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'geom',\n        content: [],\n      };\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get baseLine() {\n    return this.__height;\n  }\n\n  static getImplement(name) {\n    if(!IMPLEMENT.hasOwnProperty(name)) {\n      throw new Error(`Geom has not register: ${name}`);\n    }\n    return IMPLEMENT[name];\n  }\n  static register(name, implement) {\n    if(IMPLEMENT.hasOwnProperty(name)) {\n      throw new Error(`Geom has already register: ${name}`);\n    }\n    IMPLEMENT[name] = implement;\n  }\n}\n\nexport default Geom;\n","import Xom from './Xom';\nimport Text from './Text';\nimport LineGroup from './LineGroup';\nimport Geom from '../geom/Geom';\nimport util from '../util';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../mode';\n\nconst TAG_NAME = {\n  'div': true,\n  'span': true,\n};\nconst INLINE = {\n  'span': true,\n};\n\nclass Dom extends Xom {\n  constructor(tagName, props, children) {\n    super(tagName, props);\n    this.__children = children;\n    this.__flowChildren = []; // 非绝对定位孩子\n    this.__absChildren = []; // 绝对定位孩子\n    this.__lineGroups = []; // 一行inline元素组成的LineGroup对象后的存放列表\n    this.__flowY = 0; // 文档流布局结束后的y坐标，供absolute布局默认位置使用\n  }\n\n  /**\n   * 1. 封装string为Text节点\n   * 2. 打平children中的数组，变成一维\n   * 3. 合并相连的Text节点\n   * 4. 检测inline不能包含block和flex\n   * 5. 设置parent和prev/next和ctx和mode\n   */\n  __traverse(ctx, renderMode) {\n    let list = [];\n    this.__traverseChildren(this.children, list, ctx, renderMode);\n    for(let i = list.length - 1; i > 0; i--) {\n      let item = list[i];\n      if(item instanceof Text) {\n        let prev = list[i - 1];\n        if(prev instanceof Text) {\n          prev.content += item.content;\n          list.splice(i, 1);\n        }\n        else {\n          i--;\n        }\n      }\n    }\n    if(this.style.display === 'inline' && this.parent.style.display !== 'flex') {\n      for(let i = list.length - 1; i >= 0; i--) {\n        let item = list[i];\n        if(item instanceof Dom && item.style.display !== 'inline') {\n          throw new Error('inline can not contain block/flex');\n        }\n      }\n    }\n    let prev = null;\n    list.forEach(item => {\n      item.__ctx = ctx;\n      if(prev) {\n        prev.__next = item;\n      }\n      item.__parent = this;\n      item.__prev = prev;\n      if(item instanceof Text || item.style.position !== 'absolute') {\n        this.__flowChildren.push(item);\n      }\n      else {\n        this.__absChildren.push(item);\n      }\n    });\n    this.__children = list;\n  }\n\n  __traverseChildren(children, list, ctx, renderMode) {\n    if(Array.isArray(children)) {\n      children.forEach(item => {\n        this.__traverseChildren(item, list, ctx, renderMode);\n      });\n    }\n    else if(children instanceof Dom) {\n      list.push(children);\n      children.__traverse(ctx, renderMode);\n    }\n    // 图形没有children\n    else if(children instanceof Geom) {\n      list.push(children);\n    }\n    // 排除掉空的文本\n    else if(!util.isNil(children)) {\n      let text = new Text(children);\n      text.__renderMode = renderMode;\n      list.push(text);\n    }\n  }\n\n  // 合并设置style，包括继承和默认值，修改一些自动值和固定值，测量所有文字的宽度\n  __initStyle() {\n    let style = this.__style;\n    // 仅支持flex/block/inline/none\n    if(!style.display || ['flex', 'block', 'inline', 'none'].indexOf(style.display) === -1) {\n      if(INLINE.hasOwnProperty(this.tagName)) {\n        style.display = 'inline';\n      }\n      else {\n        style.display = 'block';\n      }\n    }\n    // 继承父元素样式\n    let parent = this.parent;\n    if(parent) {\n      let parentStyle = parent.style;\n      ['fontSize', 'fontWeight', 'fontStyle', 'lineHeight', 'wordBreak', 'color', 'textAlign'].forEach(k => {\n        if(!style.hasOwnProperty(k) && parentStyle.hasOwnProperty(k)) {\n          style[k] = parentStyle[k];\n        }\n      });\n    }\n    // 标准化处理，默认值、简写属性\n    css.normalize(style);\n    this.children.forEach(item => {\n      if(item instanceof Xom) {\n        item.__initStyle();\n      }\n      else {\n        item.__style = style;\n        // 文字首先测量所有字符宽度\n        item.__measure();\n      }\n    });\n  }\n\n  // 给定父宽度情况下，尝试行内放下后的剩余宽度，为负数即放不下\n  __tryLayInline(w, total) {\n    let { flowChildren, style: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    for(let i = 0; i < flowChildren.length; i++) {\n      // 当放不下时直接返回，无需继续多余的尝试计算\n      if(w < 0) {\n        return w;\n      }\n      let item = flowChildren[i];\n      if(item instanceof Xom) {\n        w -= item.__tryLayInline(w, total);\n      }\n      else {\n        w -= item.textWidth;\n      }\n    }\n    return w;\n  }\n\n  // 设置y偏移值，递归包括children，此举在flex行元素的child进行justify-content对齐用\n  __offsetX(diff) {\n    super.__offsetX(diff);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetX(diff);\n      }\n    });\n  }\n\n  // 设置y偏移值，递归包括children，此举在初步确定inline布局后设置元素vertical-align用\n  __offsetY(diff) {\n    super.__offsetY(diff);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetY(diff);\n      }\n    });\n  }\n\n  __calAutoBasis(isDirectionRow, w, h, isRecursion) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { mtw, mrw, mbw, mlw, ptw, prw, pbw, plw, flowChildren, style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit === unit.PX) {\n      b = max = main.value;\n      // 递归时children的长度会影响flex元素的最小宽度\n      if(isRecursion) {\n        min = b;\n      }\n    }\n    // 递归children取最大值\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let { b: b2, min: min2, max: max2 } = item.__calAutoBasis(isDirectionRow, w, h, true);\n        b = Math.max(b, b2);\n        min = Math.max(min, min2);\n        max = Math.max(max, max2);\n      }\n      else if(isDirectionRow) {\n        min = Math.max(item.charWidth, min);\n        max = Math.max(item.textWidth, max);\n      }\n      else {\n        item.__preLay({\n          x: 0,\n          y: 0,\n          w,\n          h,\n        }, true);\n        min = Math.max(min, item.height);\n        max = Math.max(max, item.height);\n      }\n    });\n    // margin/padding/border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value + mlw + mrw + plw + prw;\n      b += w;\n      max += w;\n      min += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n      b += h;\n      max += h;\n      min += h;\n    }\n    return { b, min, max };\n  }\n\n  __calAbs(isDirectionRow) {\n    let max = 0;\n    let { mtw, mrw, mbw, mlw, ptw, prw, pbw, plw, flowChildren, style } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = style;\n    let main = isDirectionRow ? width : height;\n    if(main.unit === unit.PX) {\n      max = main.value;\n    }\n    // 递归children取最大值\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let max2 = item.__calAbs(isDirectionRow);\n        max = Math.max(max, max2);\n      }\n      else if(isDirectionRow) {\n        max = Math.max(item.textWidth, max);\n      }\n      else {\n        item.__preLay({\n          x: 0,\n          y: 0,\n          w: Infinity,\n          h: Infinity,\n        }, true);\n        max = Math.max(max, item.height);\n      }\n    });\n    // margin/padding/border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth.value + borderLeftWidth.value + mlw + mrw + plw + prw;\n      max += w;\n    }\n    else {\n      let h = borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n      max += h;\n    }\n    return max;\n  }\n\n  // 本身block布局时计算好所有子元素的基本位置\n  __preLayBlock(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { flowChildren, style, lineGroups, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      textAlign,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        if(item.style.display === 'inline') {\n          // inline开头，不用考虑是否放得下直接放\n          if(x === data.x) {\n            lineGroup.add(item);\n            item.__preLay({\n              x,\n              y,\n              w,\n              h,\n            });\n            x += item.outerWidth;\n          }\n          else {\n            // 非开头先尝试是否放得下\n            let fw = item.__tryLayInline(w - x, w);\n            // 放得下继续\n            if(fw >= 0) {\n              item.__preLay({\n                x,\n                y,\n                w,\n                h,\n              });\n            }\n            // 放不下处理之前的lineGroup，并重新开头\n            else {\n              lineGroups.push(lineGroup);\n              lineGroup.verticalAlign();\n              x = data.x;\n              y += lineGroup.height;\n              item.__preLay({\n                x: data.x,\n                y,\n                w,\n                h,\n              });\n              lineGroup = new LineGroup(x, y);\n            }\n            x += item.outerWidth;\n            lineGroup.add(item);\n          }\n        }\n        else {\n          // block先处理之前可能的lineGroup\n          if(lineGroup.size) {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            y += lineGroup.height;\n            lineGroup = new LineGroup(data.x, y);\n          }\n          item.__preLay({\n            x: data.x,\n            y,\n            w,\n            h,\n          });\n          x = data.x;\n          y += item.outerHeight;\n        }\n      }\n      // 文字和inline类似\n      else {\n        // x开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__preLay({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__preLay({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__preLay({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = w - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // 弹性布局时的计算位置\n  __preLayFlex(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    let { flowChildren, style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      flexDirection,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      justifyContent,\n      alignItems,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    let isDirectionRow = flexDirection === 'row';\n    // column时height可能为auto，此时取消伸展，退化为类似block布局，但所有子元素强制block\n    if(!isDirectionRow && !fixedHeight) {\n      flowChildren.forEach(item => {\n        if(item instanceof Xom) {\n          const { style, style: { display, flexDirection, width }} = item;\n          // column的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 竖向flex的child如果是横向flex，宽度自动的话要等同于父flex的宽度\n          else if(display === 'flex' && flexDirection === 'row' && width.unit === unit.AUTO) {\n            width.value = w;\n            width.unit = unit.PX;\n          }\n          item.__preLay({\n            x,\n            y,\n            w,\n            h,\n          });\n          y += item.outerHeight;\n        }\n        else {\n          item.__preLay({\n            x,\n            y,\n            w,\n            h,\n          });\n          y += item.outerHeight;\n        }\n      });\n      this.__width = w;\n      this.__height = y - data.y;\n      return;\n    }\n    // 计算伸缩基数\n    let growList = [];\n    let shrinkList = [];\n    let basisList = [];\n    let minList = [];\n    let growSum = 0;\n    let shrinkSum = 0;\n    let basisSum = 0;\n    let maxSum = 0;\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        let { flexGrow, flexShrink, flexBasis } = item.style;\n        growList.push(flexGrow);\n        shrinkList.push(flexShrink);\n        growSum += flexGrow;\n        shrinkSum += flexShrink;\n        let { b, min, max } = item.__calAutoBasis(isDirectionRow, w, h);\n        // 根据basis不同，计算方式不同\n        if(flexBasis.unit === unit.AUTO) {\n          basisList.push(max);\n          basisSum += max;\n        }\n        else if(flexBasis.unit === unit.PX) {\n          b = flexBasis.value;\n          basisList.push(b);\n          basisSum += b;\n        }\n        else if(flexBasis.unit === unit.PERCENT) {\n          b = (isDirectionRow ? w : h) * flexBasis.value;\n          basisList.push(b);\n          basisSum += b;\n        }\n        maxSum += max;\n        minList.push(min);\n      }\n      else {\n        growList.push(0);\n        shrinkList.push(1);\n        shrinkSum += 1;\n        if(isDirectionRow) {\n          basisList.push(item.textWidth);\n          basisSum += item.textWidth;\n          maxSum += item.textWidth;\n          minList.push(item.charWidth);\n        }\n        else {\n          item.__preLay({\n            x: 0,\n            y: 0,\n            w,\n            h,\n          }, true);\n          basisList.push(item.height);\n          basisSum += item.height;\n          maxSum += item.height;\n          minList.push(item.height);\n        }\n      }\n    });\n    let maxCross = 0;\n    // 判断是否超出，决定使用grow还是shrink\n    let isOverflow = maxSum > (isDirectionRow ? w : h);\n    flowChildren.forEach((item, i) => {\n      let main;\n      let shrink = shrinkList[i];\n      let grow = growList[i];\n      // 计算主轴长度\n      if(isOverflow) {\n        let overflow = basisSum - (isDirectionRow ? w : h);\n        main = shrink ? (basisList[i] - overflow * shrink / shrinkSum) : basisList[i];\n      }\n      else {\n        let free = (isDirectionRow ? w : h) - basisSum;\n        main = grow ? (basisList[i] + free * grow / growSum) : basisList[i];\n      }\n      // 主轴长度的最小值不能小于元素的最小长度，比如横向时的字符宽度\n      main = Math.max(main, minList[i]);\n      if(item instanceof Xom) {\n        const { style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw, style: {\n          display,\n          flexDirection,\n          width,\n          height,\n          borderTopWidth,\n          borderRightWidth,\n          borderBottomWidth,\n          borderLeftWidth,\n        }} = item;\n        if(isDirectionRow) {\n          // row的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 横向flex的child如果是竖向flex，高度自动的话要等同于父flex的高度\n          else if(display === 'flex' && flexDirection === 'column' && fixedHeight && height.unit === unit.AUTO) {\n            height.value = h;\n            height.unit = unit.PX;\n          }\n          item.__preLay({\n            x,\n            y,\n            w: main,\n            h,\n          })\n        }\n        else {\n          // column的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            style.display = 'block';\n          }\n          // 竖向flex的child如果是横向flex，宽度自动的话要等同于父flex的宽度\n          else if(display === 'flex' && flexDirection === 'row' && width.unit === unit.AUTO) {\n            width.value = w;\n            width.unit = unit.PX;\n          }\n          item.__preLay({\n            x,\n            y,\n            w,\n            h: main,\n          });\n        }\n        // 重设因伸缩而导致的主轴长度\n        if(isOverflow && shrink) {\n          if(isDirectionRow) {\n            item.__width = main - mlw - mrw - plw - prw - borderLeftWidth.value - borderRightWidth.value;\n          }\n          else {\n            item.__height = main - mtw - mbw - ptw - pbw - borderTopWidth.value - borderBottomWidth.value;\n          }\n        }\n        else if(!isOverflow && grow) {\n          if(isDirectionRow) {\n            item.__width = main - mlw - mrw - plw - prw - borderLeftWidth.value - borderRightWidth.value;\n          }\n          else {\n            item.__height = main - mtw - mbw - ptw - pbw - borderTopWidth.value - borderBottomWidth.value;\n          }\n        }\n      }\n      else {\n        item.__preLay({\n          x,\n          y,\n          w: isDirectionRow ? main : w,\n          h: isDirectionRow ? h : main,\n        });\n      }\n      if(isDirectionRow) {\n        x += item.outerWidth;\n        maxCross = Math.max(maxCross, item.outerHeight);\n      }\n      else {\n        y += item.outerHeight;\n        maxCross = Math.max(maxCross, item.outerWidth);\n      }\n    });\n    // 计算主轴剩余时要用真实剩余空间而不能用伸缩剩余空间\n    let diff = isDirectionRow ? w - x + data.x : h - y + data.y;\n    // 主轴侧轴对齐方式\n    if(!isOverflow && growSum === 0 && diff > 0) {\n      let len = flowChildren.length;\n      if(justifyContent === 'flex-end') {\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(diff) : child.__offsetY(diff);\n        }\n      }\n      else if(justifyContent === 'center') {\n        let center = diff * 0.5;\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(center) : child.__offsetY(center);\n        }\n      }\n      else if(justifyContent === 'space-between') {\n        let between = diff / (len - 1);\n        for(let i = 1; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(between * i) : child.__offsetY(between * i);\n        }\n      }\n      else if(justifyContent === 'space-around') {\n        let around = diff / (len + 1);\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(around * (i + 1)) : child.__offsetY(around * (i + 1));\n        }\n      }\n    }\n    // 子元素侧轴伸展\n    if(isDirectionRow) {\n      // 父元素固定高度，子元素可能超过，侧轴最大长度取固定高度\n      if(fixedHeight) {\n        maxCross = h;\n      }\n      y += maxCross;\n    }\n    else {\n      if(fixedWidth) {\n        maxCross = w;\n      }\n    }\n    // 侧轴对齐\n    if(alignItems === 'stretch') {\n      // 短侧轴的children伸张侧轴长度至相同，超过的不动，固定宽高的也不动\n      flowChildren.forEach(item => {\n        let { style, mlw, mtw, mrw, mbw, ptw, prw, plw, pbw } = item;\n        if(isDirectionRow) {\n          if(style.height.unit === unit.AUTO) {\n            item.__height = maxCross - mtw - mbw - ptw - pbw\n              - style.borderTopWidth.value\n              - style.borderBottomWidth.value;\n          }\n        }\n        else {\n          if(style.width.unit === unit.AUTO) {\n            item.__width = maxCross - mlw - mrw - plw - prw\n              - borderRightWidth.value\n              - borderLeftWidth.value;\n          }\n        }\n      });\n    }\n    else if(alignItems === 'center') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff * 0.5);\n        }\n      });\n    }\n    else if(alignItems === 'flex-end') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff);\n        }\n      });\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // inline比较特殊，先简单顶部对其，后续还需根据vertical和lineHeight计算y偏移\n  __preLayInline(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let maxX = x;\n    let { flowChildren, style, lineGroups, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      width,\n      height,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      textAlign,\n    } = style;\n    // 除了auto外都是固定高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width && width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height && height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth.value + mlw + plw;\n    data.x = x;\n    y += borderTopWidth.value + mtw + ptw;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth.value + borderRightWidth.value + mlw + mrw + plw + prw;\n    }\n    h -= borderTopWidth.value + borderBottomWidth.value + mtw + mbw + ptw + pbw;\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom) {\n        // 绝对定位跳过\n        if(item.style.position === 'absolute') {\n          this.absChildren.push(item);\n          return;\n        }\n        item.style.display = 'inline';\n        // inline开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__preLay({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__preLay({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__preLay({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n      }\n      // inline里的其它只有文本\n      else {\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__preLay({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__preLay({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__preLay({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup，children为空时可能size为空\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = w - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : maxX - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__flowY = y;\n  }\n\n  // 只针对绝对定位children布局\n  __preLayAbs(container) {\n    let { x, y, flowY, width, height, children, absChildren, style, mlw, mtw, mrw, mbw, plw, ptw, prw, pbw } = this;\n    let {\n      borderTopWidth,\n      borderLeftWidth,\n    } = style;\n    let pw = width + plw + prw;\n    let ph = height + ptw + pbw;\n    // 递归进行，遇到absolute/relative的设置新容器\n    children.forEach(item => {\n      if(item instanceof Dom) {\n        item.__preLayAbs(['absolute', 'relative'].indexOf(item.style.position) > -1 ? item : container);\n      }\n    });\n    // 对absolute的元素进行相对容器布局\n    absChildren.forEach(item => {\n      let { mtw, mlw, style, style: {\n        left, top, right, bottom, width: width2, height: height2\n      } } = item;\n      let x2, y2, w2, h2;\n      // width优先级高于right高于left，即最高left+right，其次left+width，再次right+width，然后仅申明单个，最次全部auto\n      if(left.unit !== unit.AUTO && right.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + mlw + borderLeftWidth.value + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - x2 : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - x2;\n      }\n      else if(left.unit !== unit.AUTO && width2.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + mlw + borderLeftWidth.value + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = width2.unit === unit.PX ? width2.value : width;\n      }\n      else if(right.unit !== unit.AUTO && width2.unit !== unit.AUTO) {\n        w2 = width2.unit === unit.PX ? width2.value : width;\n        let widthPx = width2.unit === unit.PX ? width2.value : width * width2.value * 0.01;\n        x2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - widthPx : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - widthPx;\n      }\n      else if(left.unit !== unit.AUTO) {\n        x2 = left.unit === unit.PX ? x + left.value : x + mlw + borderLeftWidth.value + width * left.value * 0.01;\n        w2 = item.__calAbs(true);\n      }\n      else if(right.unit !== unit.AUTO) {\n        w2 = item.__calAbs(true);\n        x2 = right.unit === unit.PX ? x + mlw + borderLeftWidth.value + pw - right.value - w2 : x + mlw + borderLeftWidth.value + pw - width * right.value * 0.01 - w2;\n      }\n      else if(width2.unit !== unit.AUTO) {\n        x2 = x + mlw + borderLeftWidth.value;\n        w2 = width2.unit === unit.PX ? width2.value : width;\n      }\n      else {\n        x2 = x + mlw + borderLeftWidth.value;\n        w2 = item.__calAbs(true);\n      }\n      // top/bottom/height优先级同上\n      if(top.unit !== unit.AUTO && bottom.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - y2 : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - y2;\n        style.height = {\n          value: h2,\n          unit: unit.PX,\n        };\n      }\n      else if(top.unit !== unit.AUTO && height2.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = height2.unit === unit.PX ? height2.value : height;\n      }\n      else if(bottom.unit !== unit.AUTO && height2.unit !== unit.AUTO) {\n        h2 = height2.unit === unit.PX ? height2.value : height;\n        let heightPx = height2.unit === unit.PX ? height2.value : height * height2.value * 0.01;\n        y2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - heightPx : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - heightPx;\n      }\n      else if(top.unit !== unit.AUTO) {\n        y2 = top.unit === unit.PX ? y + top.value : y + mtw + borderTopWidth.value + height * top.value * 0.01;\n        h2 = item.__calAbs();\n      }\n      else if(bottom.unit !== unit.AUTO) {\n        h2 = item.__calAbs();\n        y2 = bottom.unit === unit.PX ? y + mtw + borderTopWidth.value + ph - bottom.value - h2 : y + mtw + borderTopWidth.value + ph - height * bottom.value * 0.01 - h2;\n      }\n      else if(height2.unit !== unit.AUTO) {\n        y2 = flowY + mtw + borderTopWidth.value;\n        h2 = height2.unit === unit.PX ? height2.value : height;\n      }\n      else {\n        y2 = flowY + mtw + borderTopWidth.value;\n        h2 = item.__calAbs();\n      }\n      // absolute时inline强制block\n      if(style.display === 'inline') {\n        style.display = 'block';\n      }\n      item.__preLay({\n        x: x2,\n        y: y2,\n        w: w2,\n        h: h2,\n      });\n    });\n  }\n\n  __emitEvent(e, force) {\n    let { event: { type }, x: xe, y: ye, covers } = e;\n    let { listener, children, style, x, y, outerWidth, outerHeight } = this;\n    if(style.display === 'none') {\n      return;\n    }\n    let cb;\n    if(listener.hasOwnProperty(type)) {\n      cb = listener[type];\n    }\n    let hasChildEmit;\n    // 先响应absolute/relative高优先级\n    for(let i = children.length - 1; i >= 0; i--) {\n      let child = children[i];\n      if(child instanceof Xom && ['absolute', 'relative'].indexOf(child.style.position) > -1) {\n        if(child.__emitEvent(e, force)) {\n          hasChildEmit = true;\n        }\n      }\n    }\n    // 再看普通流\n    for(let i = children.length - 1; i >= 0; i--) {\n      let child = children[i];\n      if(child instanceof Xom && ['absolute', 'relative'].indexOf(child.style.position) === -1) {\n        if(child.__emitEvent(e, force)) {\n          hasChildEmit = true;\n        }\n      }\n    }\n    if(force) {\n      cb && cb(e);\n      return;\n    }\n    // child触发则parent一定触发\n    if(hasChildEmit) {\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n    // 否则判断坐标是否位于自己内部，以及没被遮挡\n    else if(xe >= x && ye >= y && xe <= x + outerWidth && ye <= y + outerHeight) {\n      for(let i = 0, len = covers.length; i < len; i++) {\n        let { x: x2, y: y2, w, h: h } = covers[i];\n        if(xe >= x2 && ye >= y2 && xe <= x2 + w && ye <= y2 + h) {\n          return;\n        }\n      }\n      if(!e.target) {\n        e.target = this;\n      }\n      covers.push({\n        x,\n        y,\n        w: outerWidth,\n        h: outerHeight,\n      });\n      cb && cb(e);\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { style: { display }, flowChildren, children } = this;\n    if(display === 'none') {\n      return;\n    }\n    // 先绘制static\n    flowChildren.forEach(item => {\n      if(item instanceof Text || item.style.position === 'static') {\n        item.render(renderMode);\n      }\n    });\n    // 再绘制relative和absolute\n    children.forEach(item => {\n      if((item instanceof Xom) && ['relative', 'absolute'].indexOf(item.style.position) > -1) {\n        item.render(renderMode);\n      }\n    });\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'dom',\n        children: this.children.map(item => item.virtualDom),\n      };\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get children() {\n    return this.__children;\n  }\n  get flowChildren() {\n    return this.__flowChildren;\n  }\n  get absChildren() {\n    return this.__absChildren;\n  }\n  get lineGroups() {\n    return this.__lineGroups;\n  }\n  get baseLine() {\n    let len = this.lineGroups.length;\n    if(len) {\n      let last = this.lineGroups[len - 1];\n      return last.y - this.y + last.baseLine;\n    }\n    return this.y;\n  }\n  get flowY() {\n    return this.__flowY;\n  }\n\n  static isValid(s) {\n    return TAG_NAME.hasOwnProperty(s);\n  }\n}\n\nexport default Dom;\n","import util from './util';\n\nfunction diff(elem, ovd, nvd) {\n  if(ovd.type === 'dom') {\n    if(nvd.type === 'dom') {\n      diffD2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffD2G(elem, ovd, nvd);\n    }\n  }\n  else if(nvd.type === 'text') {\n    if(nvd.type === 'dom') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'text') {\n      diffT2T(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      replaceWith(elem, nvd);\n    }\n  }\n  else if(nvd.type === 'geom') {\n    if(nvd.type === 'dom') {\n      diffG2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffG2G(elem, ovd, nvd);\n    }\n  }\n}\n\nfunction diffD2D(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diff(cns[i], ovd.children[i], nvd.children[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, nvd.children[i]);\n    }\n  }\n}\n\nfunction diffD2G(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.content);\n}\n\nfunction diffT2T(elem, ovd, nvd) {\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, ovd.children[i], nvd.children[i], true);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, nvd.children[i]);\n    }\n  }\n}\n\nfunction diffG2D(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.children);\n}\n\nfunction diffG2G(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  let ol = ovd.content.length;\n  let nl = nvd.content.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(lastChild, i, ovd.content[i], nvd.content[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, nvd.content[i]);\n    }\n  }\n}\n\nfunction diffBb(elem, obb, nbb) {\n  let ol = obb.length;\n  let nl = nbb.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, obb[i], nbb[i]);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, nbb[i]);\n    }\n  }\n}\n\nfunction diffItem(elem, i, ovd, nvd, isText) {\n  let cns = elem.childNodes;\n  if(ovd.tagName !== nvd.tagName) {\n    replaceWith(cns[i], nvd);\n  }\n  else {\n    let op = {};\n    for(let j = 0, len = ovd.props.length; j < len; j++) {\n      let prop = ovd.props[j];\n      let [k, v] = prop;\n      op[k] = v;\n    }\n    for(let j = 0, len = nvd.props.length; j < len; j++) {\n      let prop = nvd.props[j];\n      let [k, v] = prop;\n      // 已有不等更新，没有添加\n      if(op.hasOwnProperty(k)) {\n        if(op[k] !== v) {\n          cns[i].setAttribute(k, v);\n        }\n        delete op[k];\n      }\n      else {\n        cns[i].setAttribute(k, v);\n      }\n    }\n    // 多余的删除\n    for(var k in op) {\n      if(op.hasOwnProperty(k)) {\n        cns[i].removeAttribute(k);\n      }\n    }\n    if(isText && ovd.content !== nvd.content) {\n      cns[i].textContent = nvd.content;\n    }\n  }\n}\n\nfunction replaceWith(elem, vd) {\n  let res;\n  if(Array.isArray(vd)) {\n    res = '';\n    vd.forEach(item => {\n      res += util.joinVirtualDom(item);\n    });\n  }\n  else {\n    res = util.joinVirtualDom(vd);\n  }\n  elem.insertAdjacentHTML('afterend', res);\n  elem.parentNode.removeChild(elem);\n}\n\nfunction insertAt(elem, cns, index, vd) {\n  let res = util.joinVirtualDom(vd);\n  if(index >= cns.length) {\n    elem.insertAdjacentHTML('beforeend', res);\n  }\n  else {\n    cns[index].insertAdjacentHTML('beforebegin', res);\n  }\n}\n\nfunction removeAt(elem, cns, index) {\n  if(cns[index]) {\n    elem.removeChild(cns[index]);\n  }\n}\n\nexport default diff;\n","import Dom from '../node/Dom';\nimport util from '../util';\nimport mode from '../mode';\nimport domDiff from '../domDiff';\n\nfunction getDom(dom) {\n  if(util.isString(dom)) {\n    let o = document.querySelector(dom);\n    if(!o) {\n      throw new Error('can not find dom of selector: ' + dom);\n    }\n    return o;\n  }\n  if(!dom) {\n    throw new Error('can not find dom: ' + dom);\n  }\n  return dom;\n}\n\nfunction renderProp(k, v) {\n  let s = Array.isArray(v) ? util.joinSourceArray(v) : util.stringify(v);\n  if(k === 'className') {\n    k = 'class';\n  }\n  return ' ' + k + '=\"' + util.encodeHtml(s, true) + '\"';\n}\n\nclass CS extends Dom {\n  constructor(tagName, props, children) {\n    super(tagName, props, children);\n    this.__node = null; // 真实DOM引用\n  }\n\n  __initProps() {\n    if(this.props.width !== undefined) {\n      let value = parseInt(this.props.width);\n      if(!isNaN(value) && value > 0) {\n        this.__width = value;\n      }\n    }\n    if(this.props.height !== undefined) {\n      let value = parseInt(this.props.height);\n      if(!isNaN(value) && value > 0) {\n        this.__height = value;\n      }\n    }\n  }\n\n  __genHtml() {\n    let res = `<${this.tagName}`;\n    // 拼接处理属性\n    for(let i = 0, len = this.__props.length; i < len; i++) {\n      let item = this.__props[i];\n      res += renderProp(item[0], item[1]);\n    }\n    res += `></${this.tagName}>`;\n    return res;\n  }\n\n  __cb(e, force) {\n    if(e.touches && e.touches.length > 1) {\n      return;\n    }\n    let { node } = this;\n    let { x, y, top, right } = node.getBoundingClientRect();\n    x = x || top || 0;\n    y = y || right || 0;\n    let { clientX, clientY } = e.touches ? (e.touches[0] || {}) : e;\n    x = clientX - x;\n    y = clientY - y;\n    this.__emitEvent({\n      event: e,\n      x,\n      y,\n      covers: [],\n    }, force);\n  }\n\n  __initEvent() {\n    let { node } = this;\n    ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseup', 'touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach(type => {\n      node.addEventListener(type, e => {\n        this.__cb(e, ['touchend', 'touchcancel'].indexOf(type) > -1);\n      });\n    });\n  }\n\n  appendTo(dom) {\n    dom = getDom(dom);\n    this.__initProps();\n    // 已有root节点\n    if(dom.nodeName.toUpperCase() === this.tagName.toUpperCase()) {\n      this.__node = dom;\n      if(this.width) {\n        dom.setAttribute('width', this.width);\n      }\n      if(this.height) {\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 没有canvas/svg节点则生成一个新的\n    else {\n      this.__node = dom.querySelector(this.tagName);\n      if(!this.__node) {\n        dom.innerHTML = this.__genHtml();\n        this.__node = dom.querySelector(this.tagName);\n      }\n    }\n    // 没有设置width/height则采用css计算形式\n    if(!this.width || !this.height) {\n      let css = window.getComputedStyle(dom, null);\n      if(!this.width) {\n        this.__width = parseInt(css.getPropertyValue('width'));\n        dom.setAttribute('width', this.width);\n      }\n      if(!this.height) {\n        this.__height = parseInt(css.getPropertyValue('height'));\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 只有canvas有ctx，svg用真实dom\n    let renderMode;\n    if(this.tagName === 'canvas') {\n      this.__ctx = this.__node.getContext('2d');\n      this.__ctx.clearRect(0, 0, this.width, this.height);\n      renderMode = mode.CANVAS;\n    }\n    else if(this.tagName === 'svg') {\n      renderMode = mode.SVG;\n    }\n    // canvas/svg作为根节点一定是block或flex，不会是inline\n    let { style } = this;\n    if(['flex', 'block'].indexOf(style.display) === -1) {\n      style.display = 'block';\n    }\n    // 同理position不能为absolute\n    if(style.position === 'absolute') {\n      style.position = 'static';\n    }\n    this.__traverse(this.__ctx, renderMode);\n    // canvas的宽高固定初始化\n    style.width = this.width;\n    style.height = this.height;\n    this.__initStyle();\n    this.__preLay({\n      x: 0,\n      y: 0,\n      w: this.width,\n      h: this.height,\n    });\n    this.__preLayAbs(this);\n    this.render(renderMode);\n    if(renderMode === mode.SVG) {\n      let nvd = this.virtualDom;\n      if(this.node.__karasInit) {\n        domDiff(this.node.firstChild, this.node.__ovd, nvd);\n      } else {\n        this.node.innerHTML = util.joinVirtualDom(nvd);\n      }\n      this.node.__ovd = nvd;\n    }\n    if(!this.node.__karasInit) {\n      this.node.__karasInit = true;\n      this.__initEvent();\n    }\n  }\n\n  get node() {\n    return this.__node;\n  }\n}\n\nexport default CS;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Line extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // start和end表明线段的首尾坐标，control表明控制点坐标\n    this.__start = [];\n    this.__end = [];\n    this.__control = [];\n    if(Array.isArray(this.props.start)) {\n      this.__start = this.props.start;\n    }\n    if(Array.isArray(this.props.end)) {\n      this.__end = this.props.end;\n    }\n    if(Array.isArray(this.props.control)) {\n      this.__control = this.props.control;\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, start, end, control, virtualDom } = this;\n    if(start.length < 2 || end.length < 2) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    width -= borderLeftWidth.value + borderRightWidth.value + marginLeft.value + marginRight.value + paddingLeft.value + paddingRight.value;\n    height -= borderTopWidth.value + borderBottomWidth.value + marginTop.value + marginBottom.value + paddingTop.value + paddingBottom.value;\n    let x1 = originX + start[0] * width;\n    let y1 = originY + start[1] * height;\n    let x2 = originX + end[0] * width;\n    let y2 = originY + end[1] * height;\n    let curve = 0;\n    let cx1, cy1, cx2, cy2;\n    if(Array.isArray(control[0])) {\n      curve++;\n      cx1 = originX + control[0][0] * width;\n      cy1 = originY + control[0][1] * height;\n    }\n    if(Array.isArray(control[1])) {\n      curve++;\n      cx2 = originX + control[1][0] * width;\n      cy2 = originY + control[1][1] * height;\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      if(curve === 2) {\n        ctx.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\n      }\n      else if(curve === 1) {\n        ctx.quadraticCurveTo(cx1, cy1, x2, y2);\n      }\n      else {\n        ctx.lineTo(x2, y2);\n      }\n      ctx.stroke();\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      if(curve === 2) {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'path',\n          props: [\n            ['d', `M${x1} ${y1} C${cx1} ${cy1} ${cx2} ${cy2} ${x2} ${y2}`],\n            ['fill', 'none'],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n      else if(curve === 1) {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'path',\n          props: [\n            ['d', `M${x1} ${y1} Q${cx1} ${cy1} ${x2} ${y2}`],\n            ['fill', 'none'],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n      else {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', x1],\n            ['y1', y1],\n            ['x2', x2],\n            ['y2', y2],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      }\n    }\n  }\n\n  get start() {\n    return this.__start;\n  }\n  get end() {\n    return this.__end;\n  }\n  get control() {\n    return this.__control;\n  }\n}\n\nexport default Line;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Polyline extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 折线所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n    // 原点位置，4个角，默认左下\n    if(['TOP_LEFT', 'TOP_RIGHT', 'BOTTOM_LEFT', 'BOTTOM_RIGHT'].indexOf(this.props.origin) > -1) {\n      this.__origin = this.props.origin;\n    }\n    else {\n      this.__origin = 'BOTTOM_LEFT';\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, points, origin, virtualDom } = this;\n    if(points.length < 2) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    let pts = this.__pts = [];\n    if(origin === 'TOP_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'TOP_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'BOTTOM_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n    }\n    else if(origin === 'BOTTOM_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(pts[0][0], originY + pts[0][1]);\n      for(let i = 1, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        ctx.lineTo(point[0], point[1]);\n      }\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let points = '';\n      for(let i = 0, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        points += `${point[0]},${point[1]} `;\n      }\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'polyline',\n        props: [\n          ['points', points],\n          ['fill', 'none'],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  getPointsByX(x) {\n    let min = Infinity;\n    let len = this.__pts.length;\n    let res = [];\n    for(let i = 0; i < len; i++) {\n      let diff = Math.abs(this.__pts[i][0] - x);\n      if(diff < min) {\n        min = diff;\n      }\n    }\n    for(let i = 0; i < len; i++) {\n      let diff = Math.abs(this.__pts[i][0] - x);\n      if(diff === min) {\n        res.push({\n          index: i,\n          x: this.__pts[i][0],\n          y: this.__pts[i][1],\n        });\n      }\n    }\n    return res;\n  }\n\n  get points() {\n    return this.__points;\n  }\n  get origin() {\n    return this.__origin;\n  }\n}\n\nexport default Polyline;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Polygon extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, points, virtualDom } = this;\n    if(points.length < 3) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    points.forEach(item => {\n      item[0] = originX + item[0] * width;\n      item[1] = originY + item[1] * height;\n    });\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(points[0][0], originY + points[0][1]);\n      for(let i = 1, len = points.length; i < len; i++) {\n        let point = points[i];\n        ctx.lineTo(point[0], point[1]);\n      }\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let points = '';\n      for(let i = 0, len = points.length; i < len; i++) {\n        let point = points[i];\n        points += `${point[0]},${point[1]} `;\n      }\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'polygon',\n        props: [\n          ['points', points],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get points() {\n    return this.__points;\n  }\n}\n\nexport default Polygon;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nconst OFFSET = Math.PI * 0.5;\n\nfunction getCoordByDegree(x, y, r, d) {\n  while(d > 360) {\n    d -= 360;\n  }\n  while(d < 0) {\n    d += 360;\n  }\n  if(d >= 0 && d < 90) {\n    return [\n      x + Math.sin(d * Math.PI / 180) * r,\n      y - Math.cos(d * Math.PI / 180) * r\n    ];\n  }\n  else if(d >= 90 && d < 180) {\n    return [\n      x + Math.cos((d - 90) * Math.PI / 180) * r,\n      y + Math.sin((d - 90) * Math.PI / 180) * r,\n    ];\n  }\n  else if(d >= 180 && d < 270) {\n    return [\n      x - Math.cos((270 - d) * Math.PI / 180) * r,\n      y + Math.sin((270 - d) * Math.PI / 180) * r,\n    ];\n  }\n  else {\n    return [\n      x - Math.sin((360 - d) * Math.PI / 180) * r,\n      y - Math.cos((360 - d) * Math.PI / 180) * r,\n    ];\n  }\n}\n\nclass Sector extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 角度\n    this.__start = 0;\n    this.__end = 0;\n    if(this.props.start) {\n      this.__start = parseFloat(this.props.start);\n      if(isNaN(this.start)) {\n        this.__start = 0;\n      }\n    }\n    if(this.props.end) {\n      this.__end = parseFloat(this.props.end);\n      if(isNaN(this.end)) {\n        this.__end = 0;\n      }\n    }\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, start, end, r, virtualDom } = this;\n    if(start === end) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    r *= Math.min(width, height) * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.arc(originX, originY, r, start * Math.PI / 180 - OFFSET, end * Math.PI / 180 - OFFSET);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let x1, y1, x2, y2;\n      [ x1, y1 ] = getCoordByDegree(originX, originY, r, start);\n      [ x2, y2 ] = getCoordByDegree(originX, originY, r, end);\n      let large = (end - start) > 180 ? 1 : 0;\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'path',\n        props: [\n          ['d', `M${originX} ${originY} L${x1} ${y1} A${r} ${r} 0 ${large} 1 ${x2} ${y2} z`],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get start() {\n    return this.__start;\n  }\n  get end() {\n    return this.__end;\n  }\n  get r() {\n    return this.__r;\n  }\n}\n\nexport default Sector;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Rect extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.lineTo(originX + width, originY);\n      ctx.lineTo(originX + width, originY + height);\n      ctx.lineTo(originX, originY + height);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'rect',\n        props: [\n          ['x', x],\n          ['y', y],\n          ['width', width],\n          ['height', height],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n}\n\nexport default Rect;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Circle extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, r, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    r *= Math.min(width, height) * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.arc(originX, originY, r, 0, 2 * Math.PI);\n      if(fill !== 'transparent') {\n        ctx.fill();\n      }\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'circle',\n        props: [\n          ['cx', originX],\n          ['cy', originY],\n          ['r', r],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get r() {\n    return this.__r;\n  }\n}\n\nexport default Circle;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Ellipse extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__rx = 1;\n    if(this.props.rx) {\n      this.__rx = parseFloat(this.props.rx);\n      if(isNaN(this.rx)) {\n        this.__rx = 1;\n      }\n    }\n    this.__ry = 1;\n    if(this.props.ry) {\n      this.__ry = parseFloat(this.props.ry);\n      if(isNaN(this.rx)) {\n        this.__ry = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, rx, ry, virtualDom } = this;\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      fill,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    originX += width * 0.5;\n    originY += height * 0.5;\n    rx *= width * 0.5;\n    ry *= height * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      ctx.moveTo(originX, originY);\n      ctx.ellipse && ctx.ellipse(originX, originY, rx, ry, 0, 0, 2 * Math.PI);\n      ctx.fill();\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      virtualDom.content.push({\n        type: 'item',\n        tagName: 'ellipse',\n        props: [\n          ['cx', originX],\n          ['cy', originY],\n          ['rx', rx],\n          ['ry', ry],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['stroke-dasharray', strokeDasharray]\n        ],\n      });\n    }\n  }\n\n  get rx() {\n    return this.__rx;\n  }\n  get ry() {\n    return this.__ry;\n  }\n}\n\nexport default Ellipse;\n","import Geom from './Geom';\nimport mode from '../mode';\n\nclass Grid extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // x,y被分为几格\n    this.__nx = 0;\n    if(this.props.nx) {\n      this.__nx = parseFloat(this.props.nx);\n      if(isNaN(this.nx)) {\n        this.__nx = 0;\n      }\n    }\n    this.__ny = 0;\n    if(this.props.ny) {\n      this.__ny = parseFloat(this.props.ny);\n      if(isNaN(this.ny)) {\n        this.__ny = 0;\n      }\n    }\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { x, y, width, height, style, ctx, nx, ny, virtualDom } = this;\n    if(width <= 0 || height <= 0) {\n      return;\n    }\n    if(nx < 3 && ny < 3) {\n      return;\n    }\n    let {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n    } = style;\n    if(display === 'none') {\n      return;\n    }\n    let originX = x + borderLeftWidth.value + marginLeft.value + paddingLeft.value;\n    let originY = y + borderTopWidth.value + marginTop.value + paddingTop.value;\n    let endX = originX + width;\n    let endY = originY + height;\n    let lx = [];\n    let ly = [];\n    if(nx >= 3) {\n      let per = width / (nx - 1);\n      for(let i = 0; i < nx; i++) {\n        ly.push(originX + i * per);\n      }\n    }\n    if(ny >= 3) {\n      let per = height / (ny - 1);\n      for(let i = 0; i < ny; i++) {\n        lx.push(originY + i * per);\n      }\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.setLineDash(strokeDasharray);\n      ctx.beginPath();\n      lx.forEach(item => {\n        ctx.moveTo(originX, item);\n        ctx.lineTo(endX, item);\n      });\n      ly.forEach(item => {\n        ctx.moveTo(item, originY);\n        ctx.lineTo(item, endY);\n      });\n      if(strokeWidth && stroke !== 'transparent') {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      lx.forEach(item => {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', originX],\n            ['y1', item],\n            ['x2', endX],\n            ['y2', item],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      });\n      ly.forEach(item => {\n        virtualDom.content.push({\n          type: 'item',\n          tagName: 'line',\n          props: [\n            ['x1', item],\n            ['y1', originY],\n            ['x2', item],\n            ['y2', endY],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth],\n            ['stroke-dasharray', strokeDasharray]\n          ],\n        });\n      });\n    }\n  }\n\n  get nx() {\n    return this.__nx;\n  }\n  get ny() {\n    return this.__ny;\n  }\n  get dash() {\n    return this.__dash;\n  }\n}\n\nexport default Grid;\n","import Dom from './node/Dom';\nimport CS from './node/CS';\nimport Geom from './geom/Geom';\nimport Line from './geom/Line';\nimport Polyline from './geom/Polyline';\nimport Polygon from './geom/Polygon';\nimport Sector from './geom/Sector';\nimport Rect from './geom/Rect';\nimport Circle from './geom/Circle';\nimport Ellipse from './geom/Ellipse';\nimport Grid from './geom/Grid';\n\nGeom.register('$line', Line);\nGeom.register('$polyline', Polyline);\nGeom.register('$polygon', Polygon);\nGeom.register('$sector', Sector);\nGeom.register('$rect', Rect);\nGeom.register('$circle', Circle);\nGeom.register('$ellipse', Ellipse);\nGeom.register('$grid', Grid);\n\nlet karas = {\n  render(cs, dom) {\n    if(!(cs instanceof CS)) {\n      throw new Error('render root muse be canvas or svg');\n    }\n    if(dom) {\n      cs.appendTo(dom);\n    }\n    return cs;\n  },\n  createVd(tagName, props, children) {\n    if(['canvas', 'svg'].indexOf(tagName) > -1) {\n      return new CS(tagName, props, children);\n    }\n    if(Dom.isValid(tagName)) {\n      return new Dom(tagName, props, children);\n    }\n    throw new Error('can not use marker: ' + tagName);\n  },\n  createGm(tagName, props) {\n    let klass = Geom.getImplement(tagName);\n    return new klass(tagName, props);\n  },\n  createCp(cp, props) {\n    return new cp(props);\n  },\n  Geom,\n};\n\nif(typeof window != 'undefined') {\n  window.karas = karas;\n}\n\nexport default karas;\n"],"names":["Node","__x","__y","__width","__height","__prev","__next","__ctx","__parent","__style","__baseLine","__virtualDom","diff","CANVAS","SVG","div","measure","s","style","document","createElement","position","left","top","visibility","body","appendChild","fontSize","innerText","css","window","getComputedStyle","parseFloat","width","AUTO","PX","PERCENT","arr2hash","arr","hash","i","len","length","item","Array","isArray","list","Object","keys","j","k","hash2arr","push","spread","temp","splice","Xom","tagName","props","__props","__tagName","__listener","forEach","test","slice","toLowerCase","__mtw","__mrw","__mbw","__mlw","__ptw","__prw","__pbw","__plw","data","w","display","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","unit","value","__mpWidth","__preLayBlock","__preLayFlex","__preLayInline","parent","w2","height","right","bottom","__offsetX","__offsetY","mp","renderMode","bb","ctx","x","y","mlw","mtw","plw","ptw","prw","pbw","virtualDom","backgroundColor","borderTopWidth","borderTopColor","borderTopStyle","borderRightWidth","borderRightColor","borderRightStyle","borderBottomWidth","borderBottomColor","borderBottomStyle","borderLeftWidth","borderLeftColor","borderLeftStyle","x1","y1","h","mode","beginPath","fillStyle","rect","fill","closePath","type","x2","lineWidth","strokeStyle","setLineDash","moveTo","lineTo","stroke","y2","mrw","mbw","arial","lhr","car","blr","mdr","lgr","RESET","borderSizing","fontFamily","color","fontStyle","fontWeight","lineHeight","verticalAlign","flexGrow","flexShrink","flexBasis","flexDirection","justifyContent","alignItems","textAlign","strokeWidth","strokeDasharray","reset","v","toString","isType","obj","call","isNumber","joinSourceArray","res","stringify","isNil","encodeHtml","prop","replace","undefined","joinVirtualDom","vd","content","children","util","isObject","isString","isFunction","isBoolean","isDate","parserOneBorder","direction","key","exec","c","indexOf","normalize","hasOwnProperty","background","bgc","flex","border","borderTop","borderRight","borderBottom","borderLeft","margin","padding","font","Math","max","setFontStyle","getBaseLine","normal","LineBox","__content","fillText","CHAR_WIDTH_CACHE","Text","__lineBoxes","__charWidthList","__charWidth","__textWidth","charWidthList","cache","sum","char","charAt","mw","measureText","charWidth","isVirtual","maxX","lineBoxes","begin","count","lineBox","render","map","textWidth","n","min","last","baseLine","__renderMode","LineGroup","__list","__calBaseLine","IMPLEMENT","Geom","total","isDirectionRow","b","main","fixedHeight","fixedWidth","e","force","event","xe","ye","covers","listener","outerWidth","outerHeight","cb","target","name","Error","implement","TAG_NAME","INLINE","Dom","__children","__flowChildren","__absChildren","__lineGroups","__flowY","__traverseChildren","prev","__traverse","text","parentStyle","__initStyle","__measure","flowChildren","__tryLayInline","isRecursion","__calAutoBasis","b2","min2","max2","__preLay","__calAbs","Infinity","lineGroups","lineGroup","add","fw","size","horizonAlign","growList","shrinkList","basisList","minList","growSum","shrinkSum","basisSum","maxSum","maxCross","isOverflow","shrink","grow","overflow","free","child","center","between","around","absChildren","container","flowY","pw","ph","__preLayAbs","width2","height2","h2","widthPx","heightPx","hasChildEmit","__emitEvent","elem","ovd","nvd","diffD2D","replaceWith","diffD2G","diffT2T","diffG2D","diffG2G","diffBb","firstChild","ol","nl","lastChild","cns","childNodes","removeAt","insertAt","diffItem","obb","nbb","isText","op","setAttribute","removeAttribute","textContent","insertAdjacentHTML","parentNode","removeChild","index","getDom","dom","o","querySelector","renderProp","CS","__node","parseInt","isNaN","touches","node","getBoundingClientRect","clientX","clientY","addEventListener","__cb","__initProps","nodeName","toUpperCase","innerHTML","__genHtml","getPropertyValue","getContext","clearRect","__karasInit","domDiff","__ovd","__initEvent","Line","__start","__end","__control","start","end","control","originX","originY","curve","cx1","cy1","cx2","cy2","bezierCurveTo","quadraticCurveTo","Polyline","__points","points","origin","__origin","pts","__pts","point","abs","Polygon","OFFSET","PI","getCoordByDegree","r","d","sin","cos","Sector","__r","arc","large","Rect","Circle","Ellipse","__rx","rx","__ry","ry","ellipse","Grid","__nx","nx","__ny","ny","endX","endY","lx","ly","per","__dash","register","karas","cs","appendTo","createVd","isValid","createGm","klass","getImplement","createCp","cp"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;;;EACJ,kBAAc;EAAA;;EACZ,SAAKC,GAAL,GAAW,CAAX;EACA,SAAKC,GAAL,GAAW,CAAX;EACA,SAAKC,OAAL,GAAe,CAAf;EACA,SAAKC,QAAL,GAAgB,CAAhB;EACA,SAAKC,MAAL,GAAc,IAAd;EACA,SAAKC,MAAL,GAAc,IAAd;EACA,SAAKC,KAAL,GAAa,IAAb,CAPY;;EAQZ,SAAKC,QAAL,GAAgB,IAAhB;EACA,SAAKC,OAAL,GAAe,EAAf,CATY;;EAUZ,SAAKC,UAAL,GAAkB,CAAlB;EACA,SAAKC,YAAL,GAAoB,EAApB;EACD;;;;gCAESC,MAAM;EACd,WAAKX,GAAL,IAAYW,IAAZ;EACD;;;gCAESA,MAAM;EACd,WAAKV,GAAL,IAAYU,IAAZ;EACD;;;0BAEO;EACN,aAAO,KAAKX,GAAZ;EACD;;;0BACO;EACN,aAAO,KAAKC,GAAZ;EACD;;;0BACW;EACV,aAAO,KAAKC,OAAZ;EACD;;;0BACY;EACX,aAAO,KAAKC,QAAZ;EACD;;;0BACgB;EACf,aAAO,KAAKD,OAAZ;EACD;;;0BACiB;EAChB,aAAO,KAAKC,QAAZ;EACD;;;0BACU;EACT,aAAO,KAAKC,MAAZ;EACD;;;0BACU;EACT,aAAO,KAAKC,MAAZ;EACD;;;0BACY;EACX,aAAO,KAAKE,QAAZ;EACD;;;0BACW;EACV,aAAO,KAAKC,OAAZ;EACD;;;0BACS;EACR,aAAO,KAAKF,KAAZ;EACD;;;0BACc;EACb,aAAO,KAAKG,UAAZ;EACD;;;0BACgB;EACf,aAAO,KAAKC,YAAZ;EACD;;;;;;EC7DH,IAAME,MAAM,GAAG,CAAf;EACA,IAAMC,GAAG,GAAG,CAAZ;EAEA,IAAIC,GAAJ;AAEA,aAAe;EACbF,EAAAA,MAAM,EAANA,MADa;EAEbC,EAAAA,GAAG,EAAHA,GAFa;EAGbE,EAAAA,OAHa,mBAGLC,CAHK,EAGFC,KAHE,EAGK;EAChB,QAAG,CAACH,GAAJ,EAAS;EACPA,MAAAA,GAAG,GAAGI,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAN;EACAL,MAAAA,GAAG,CAACG,KAAJ,CAAUG,QAAV,GAAqB,UAArB;EACAN,MAAAA,GAAG,CAACG,KAAJ,CAAUI,IAAV,GAAiB,SAAjB;EACAP,MAAAA,GAAG,CAACG,KAAJ,CAAUK,GAAV,GAAgB,UAAhB;EACAR,MAAAA,GAAG,CAACG,KAAJ,CAAUM,UAAV,GAAuB,QAAvB;EACAL,MAAAA,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BX,GAA1B;EACD;;EACDA,IAAAA,GAAG,CAACG,KAAJ,CAAUS,QAAV,GAAqBT,KAAK,CAACS,QAAN,GAAiB,IAAtC;EACAZ,IAAAA,GAAG,CAACa,SAAJ,GAAgBX,CAAhB;EACA,QAAIY,GAAG,GAAGC,MAAM,CAACC,gBAAP,CAAwBhB,GAAxB,EAA6B,IAA7B,CAAV;EACA,WAAOiB,UAAU,CAACH,GAAG,CAACI,KAAL,CAAjB;EACD;EAhBY,CAAf;;ACLA,aAAe;EACbC,EAAAA,IAAI,EAAE,CADO;EAEbC,EAAAA,EAAE,EAAE,CAFS;EAGbC,EAAAA,OAAO,EAAE;EAHI,CAAf;;ECIA,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;EACrB,MAAIC,IAAI,GAAG,EAAX;;EACA,OAAI,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,GAAG,CAACI,MAAzB,EAAiCF,CAAC,GAAGC,GAArC,EAA0CD,CAAC,EAA3C,EAA+C;EAC7C,QAAIG,IAAI,GAAGL,GAAG,CAACE,CAAD,CAAd;;EACA,QAAGI,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAH,EAAwB;EACtBJ,MAAAA,IAAI,CAACI,IAAI,CAAC,CAAD,CAAL,CAAJ,GAAgBA,IAAI,CAAC,CAAD,CAApB;EACD,KAFD,MAGK;EACH,WAAI,IAAIG,IAAI,GAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,CAAX,EAA8BM,CAAC,GAAGH,IAAI,CAACJ,MAAL,GAAc,CAApD,EAAuDO,CAAC,IAAI,CAA5D,EAA+DA,CAAC,EAAhE,EAAoE;EAClE,YAAIC,CAAC,GAAGJ,IAAI,CAACG,CAAD,CAAZ;EACAV,QAAAA,IAAI,CAACW,CAAD,CAAJ,GAAUP,IAAI,CAACO,CAAD,CAAd;EACD;EACF;EACF;;EACD,SAAOX,IAAP;EACD;;EAED,SAASY,QAAT,CAAkBZ,IAAlB,EAAwB;EACtB,MAAID,GAAG,GAAG,EAAV;;EACA,OAAI,IAAIQ,IAAI,GAAGC,MAAM,CAACC,IAAP,CAAYT,IAAZ,CAAX,EAA8BC,CAAC,GAAG,CAAlC,EAAqCC,GAAG,GAAGK,IAAI,CAACJ,MAApD,EAA4DF,CAAC,GAAGC,GAAhE,EAAqED,CAAC,EAAtE,EAA0E;EACxE,QAAIU,CAAC,GAAGJ,IAAI,CAACN,CAAD,CAAZ;EACAF,IAAAA,GAAG,CAACc,IAAJ,CAAS,CAACF,CAAD,EAAIX,IAAI,CAACW,CAAD,CAAR,CAAT;EACD;;EACD,SAAOZ,GAAP;EACD;;EAED,SAASe,MAAT,CAAgBf,GAAhB,EAAqB;EACnB,OAAI,IAAIE,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,GAAG,CAACI,MAAzB,EAAiCF,CAAC,GAAGC,GAArC,EAA0CD,CAAC,EAA3C,EAA+C;EAC7C,QAAIG,IAAI,GAAGL,GAAG,CAACE,CAAD,CAAd;;EACA,QAAG,CAACI,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAJ,EAAyB;EACvB,UAAIW,IAAI,GAAG,EAAX;;EACA,WAAI,IAAIR,IAAI,GAAGC,MAAM,CAACC,IAAP,CAAYL,IAAZ,CAAX,EAA8BM,CAAC,GAAG,CAAlC,EAAqCR,IAAG,GAAGK,IAAI,CAACJ,MAApD,EAA4DO,CAAC,GAAGR,IAAhE,EAAqEQ,CAAC,EAAtE,EAA0E;EACxE,YAAIC,CAAC,GAAGJ,IAAI,CAACG,CAAD,CAAZ;EACAK,QAAAA,IAAI,CAACF,IAAL,CAAU,CAACF,CAAD,EAAIP,IAAI,CAACO,CAAD,CAAR,CAAV;EACD;;EACDZ,MAAAA,GAAG,CAACiB,MAAJ,OAAAjB,GAAG,GAAQE,CAAR,EAAW,CAAX,SAAiBc,IAAjB,EAAH;EACD;EACF;;EACD,SAAOhB,GAAP;EACD;;MAEKkB;;;;;EACJ,eAAYC,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B;EACAA,IAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB,CAF0B;;EAI1B,QAAGd,KAAK,CAACC,OAAN,CAAca,KAAd,CAAH,EAAyB;EACvB,YAAKA,KAAL,GAAarB,QAAQ,CAACqB,KAAD,CAArB;EACA,YAAKC,OAAL,GAAeN,MAAM,CAACK,KAAD,CAArB;EACD,KAHD,MAIK;EACH,YAAKA,KAAL,GAAaA,KAAb;EACA,YAAKC,OAAL,GAAeR,QAAQ,CAACO,KAAD,CAAvB;EACD;;EACD,UAAKE,SAAL,GAAiBH,OAAjB;EACA,UAAKhD,OAAL,GAAe,MAAKiD,KAAL,CAAWxC,KAAX,IAAoB,EAAnC,CAb0B;;EAc1B,UAAK2C,UAAL,GAAkB,EAAlB;;EACA,UAAKF,OAAL,CAAaG,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,UAAIO,CAAC,GAAGP,IAAI,CAAC,CAAD,CAAZ;;EACA,UAAG,cAAcoB,IAAd,CAAmBb,CAAnB,CAAH,EAA0B;EACxB,cAAKW,UAAL,CAAgBX,CAAC,CAACc,KAAF,CAAQ,CAAR,EAAWC,WAAX,EAAhB,IAA4CtB,IAAI,CAAC,CAAD,CAAhD;EACD;EACF,KALD,EAf0B;;;EAsB1B,UAAKuB,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EACA,UAAKC,KAAL,GAAa,CAAb;EA7B0B;EA8B3B;;;;+BAEQC,MAAM;EAAA,UACPC,CADO,GACDD,IADC,CACPC,CADO;EAAA,UAEPzD,KAFO,GAaP,IAbO,CAEPA,KAFO;EAAA,wBAaP,IAbO,CAEAA,KAFA;EAAA,UAGX0D,OAHW,eAGXA,OAHW;EAAA,UAIX3C,KAJW,eAIXA,KAJW;EAAA,UAKX4C,SALW,eAKXA,SALW;EAAA,UAMXC,WANW,eAMXA,WANW;EAAA,UAOXC,YAPW,eAOXA,YAPW;EAAA,UAQXC,UARW,eAQXA,UARW;EAAA,UASXC,UATW,eASXA,UATW;EAAA,UAUXC,YAVW,eAUXA,YAVW;EAAA,UAWXC,aAXW,eAWXA,aAXW;EAAA,UAYXC,WAZW,eAYXA,WAZW;;EAcb,UAAGR,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD,OAhBY;;;EAkBb,UAAG3C,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC,gBAAOD,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACEuC,YAAAA,CAAC,IAAI1C,KAAK,CAACqD,KAAN,GAAc,IAAnB;EACA;EANJ;EAQD;;EACD,WAAKjB,KAAL,GAAa,KAAKkB,SAAL,CAAeP,UAAf,EAA2BL,CAA3B,CAAb;EACA,WAAKT,KAAL,GAAa,KAAKqB,SAAL,CAAeV,SAAf,EAA0BF,CAA1B,CAAb;EACA,WAAKR,KAAL,GAAa,KAAKoB,SAAL,CAAeT,WAAf,EAA4BH,CAA5B,CAAb;EACA,WAAKP,KAAL,GAAa,KAAKmB,SAAL,CAAeR,YAAf,EAA6BJ,CAA7B,CAAb;EACA,WAAKF,KAAL,GAAa,KAAKc,SAAL,CAAeH,WAAf,EAA4BT,CAA5B,CAAb;EACA,WAAKL,KAAL,GAAa,KAAKiB,SAAL,CAAeN,UAAf,EAA2BN,CAA3B,CAAb;EACA,WAAKJ,KAAL,GAAa,KAAKgB,SAAL,CAAeL,YAAf,EAA6BP,CAA7B,CAAb;EACA,WAAKH,KAAL,GAAa,KAAKe,SAAL,CAAeJ,aAAf,EAA8BR,CAA9B,CAAb;;EACA,UAAGC,OAAO,KAAK,OAAf,EAAwB;EACtB,aAAKY,aAAL,CAAmBd,IAAnB;EACD,OAFD,MAGK,IAAGE,OAAO,KAAK,MAAf,EAAuB;EAC1B,aAAKa,YAAL,CAAkBf,IAAlB;EACD,OAFI,MAGA,IAAGE,OAAO,KAAK,QAAf,EAAyB;EAC5B,aAAKc,cAAL,CAAoBhB,IAApB;EACD,OA5CY;;;EAAA,iBA8Ce,KAAKiB,MAAL,IAAe,IA9C9B;EAAA,UA8CAC,EA9CA,QA8CP3D,KA9CO;EAAA,UA8CI4D,MA9CJ,QA8CIA,MA9CJ;;EAAA,UAgDXxE,QAhDW,GAqDTH,KArDS,CAgDXG,QAhDW;EAAA,UAiDXE,GAjDW,GAqDTL,KArDS,CAiDXK,GAjDW;EAAA,UAkDXuE,KAlDW,GAqDT5E,KArDS,CAkDX4E,KAlDW;EAAA,UAmDXC,MAnDW,GAqDT7E,KArDS,CAmDX6E,MAnDW;EAAA,UAoDXzE,IApDW,GAqDTJ,KArDS,CAoDXI,IApDW;;EAsDb,UAAGD,QAAQ,KAAK,UAAhB,EAA4B;EAC1B,YAAGC,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAACnD,IAAtB,EAA4B;EAC1B,cAAItB,IAAI,GAAGU,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAAClD,EAAnB,GAAwBb,IAAI,CAACgE,KAA7B,GAAqChE,IAAI,CAACgE,KAAL,GAAaM,EAAb,GAAkB,IAAlE;;EACA,eAAKI,SAAL,CAAepF,IAAf;EACD,SAHD,MAIK,IAAGkF,KAAK,CAACT,IAAN,KAAeA,IAAI,CAACnD,IAAvB,EAA6B;EAChC,cAAItB,KAAI,GAAGkF,KAAK,CAACT,IAAN,KAAeA,IAAI,CAAClD,EAApB,GAAyB2D,KAAK,CAACR,KAA/B,GAAuCQ,KAAK,CAACR,KAAN,GAAcM,EAAd,GAAmB,IAArE;;EACA,eAAKI,SAAL,CAAe,CAACpF,KAAhB;EACD;;EACD,YAAGW,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAACnD,IAArB,EAA2B;EACzB,cAAItB,MAAI,GAAGW,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAAClD,EAAlB,GAAuBZ,GAAG,CAAC+D,KAA3B,GAAmC/D,GAAG,CAAC+D,KAAJ,GAAYO,MAAZ,GAAqB,IAAnE;;EACA,eAAKI,SAAL,CAAerF,MAAf;EACD,SAHD,MAIK,IAAGmF,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAACnD,IAAxB,EAA8B;EACjC,cAAItB,MAAI,GAAGmF,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0B4D,MAAM,CAACT,KAAjC,GAAyCS,MAAM,CAACT,KAAP,GAAeO,MAAf,GAAwB,IAA5E;;EACA,eAAKI,SAAL,CAAe,CAACrF,MAAhB;EACD;EACF;EACF;;;gCAESsF,IAAIvB,GAAG;EACf,UAAGuB,EAAE,CAACb,IAAH,KAAYA,IAAI,CAAClD,EAApB,EAAwB;EACtB,eAAO+D,EAAE,CAACZ,KAAV;EACD,OAFD,MAGK,IAAGY,EAAE,CAACb,IAAH,KAAYA,IAAI,CAACjD,OAApB,EAA6B;EAChC,eAAO8D,EAAE,CAACZ,KAAH,GAAWX,CAAX,GAAe,IAAtB;EACD;;EACD,aAAO,CAAP;EACD;;;6BAEMwB,YAAY;EACjB,WAAKxF,YAAL,GAAoB;EAClByF,QAAAA,EAAE,EAAE;EADc,OAApB;EADiB,UAIXC,GAJW,GAImE,IAJnE,CAIXA,GAJW;EAAA,UAINnF,KAJM,GAImE,IAJnE,CAINA,KAJM;EAAA,UAICoF,CAJD,GAImE,IAJnE,CAICA,CAJD;EAAA,UAIIC,CAJJ,GAImE,IAJnE,CAIIA,CAJJ;EAAA,UAIOtE,KAJP,GAImE,IAJnE,CAIOA,KAJP;EAAA,UAIc4D,MAJd,GAImE,IAJnE,CAIcA,MAJd;EAAA,UAIsBW,GAJtB,GAImE,IAJnE,CAIsBA,GAJtB;EAAA,UAI2BC,GAJ3B,GAImE,IAJnE,CAI2BA,GAJ3B;EAAA,UAIgCC,GAJhC,GAImE,IAJnE,CAIgCA,GAJhC;EAAA,UAIqCC,GAJrC,GAImE,IAJnE,CAIqCA,GAJrC;EAAA,UAI0CC,GAJ1C,GAImE,IAJnE,CAI0CA,GAJ1C;EAAA,UAI+CC,GAJ/C,GAImE,IAJnE,CAI+CA,GAJ/C;EAAA,UAIoDC,UAJpD,GAImE,IAJnE,CAIoDA,UAJpD;EAAA,UAMflC,OANe,GAoBb1D,KApBa,CAMf0D,OANe;EAAA,UAOfmC,eAPe,GAoBb7F,KApBa,CAOf6F,eAPe;EAAA,UAQfC,cARe,GAoBb9F,KApBa,CAQf8F,cARe;EAAA,UASfC,cATe,GAoBb/F,KApBa,CASf+F,cATe;EAAA,UAUfC,cAVe,GAoBbhG,KApBa,CAUfgG,cAVe;EAAA,UAWfC,gBAXe,GAoBbjG,KApBa,CAWfiG,gBAXe;EAAA,UAYfC,gBAZe,GAoBblG,KApBa,CAYfkG,gBAZe;EAAA,UAafC,gBAbe,GAoBbnG,KApBa,CAafmG,gBAbe;EAAA,UAcfC,iBAde,GAoBbpG,KApBa,CAcfoG,iBAde;EAAA,UAefC,iBAfe,GAoBbrG,KApBa,CAefqG,iBAfe;EAAA,UAgBfC,iBAhBe,GAoBbtG,KApBa,CAgBfsG,iBAhBe;EAAA,UAiBfC,eAjBe,GAoBbvG,KApBa,CAiBfuG,eAjBe;EAAA,UAkBfC,eAlBe,GAoBbxG,KApBa,CAkBfwG,eAlBe;EAAA,UAmBfC,eAnBe,GAoBbzG,KApBa,CAmBfyG,eAnBe;;EAqBjB,UAAG/C,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD0B,MAAAA,CAAC,IAAIE,GAAL;EACAD,MAAAA,CAAC,IAAIE,GAAL;;EACA,UAAGM,eAAH,EAAoB;EAClB,YAAIa,EAAE,GAAGtB,CAAT;;EACA,YAAGmB,eAAH,EAAoB;EAClBG,UAAAA,EAAE,IAAIH,eAAe,CAACnC,KAAtB;EACD;;EACD,YAAIuC,EAAE,GAAGtB,CAAT;;EACA,YAAGS,cAAH,EAAmB;EACjBa,UAAAA,EAAE,IAAIb,cAAc,CAAC1B,KAArB;EACD;;EACD,YAAIX,CAAC,GAAG1C,KAAK,GAAGyE,GAAR,GAAcE,GAAtB;EACA,YAAIkB,CAAC,GAAGjC,MAAM,GAAGc,GAAT,GAAeE,GAAvB;;EACA,YAAGV,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,UAAAA,GAAG,CAAC2B,SAAJ;EACA3B,UAAAA,GAAG,CAAC4B,SAAJ,GAAgBlB,eAAhB;EACAV,UAAAA,GAAG,CAAC6B,IAAJ,CAASN,EAAT,EAAaC,EAAb,EAAiBlD,CAAjB,EAAoBmD,CAApB;EACAzB,UAAAA,GAAG,CAAC8B,IAAJ;EACA9B,UAAAA,GAAG,CAAC+B,SAAJ;EACD,SAND,MAOK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/BgG,UAAAA,UAAU,CAACV,EAAX,CAAchD,IAAd,CAAmB;EACjBiF,YAAAA,IAAI,EAAE,MADW;EAEjB5E,YAAAA,OAAO,EAAE,MAFQ;EAGjBC,YAAAA,KAAK,EAAE,CACL,CAAC,GAAD,EAAMkE,EAAN,CADK,EAEL,CAAC,GAAD,EAAMC,EAAN,CAFK,EAGL,CAAC,OAAD,EAAUlD,CAAV,CAHK,EAIL,CAAC,QAAD,EAAWmD,CAAX,CAJK,EAKL,CAAC,MAAD,EAASf,eAAT,CALK;EAHU,WAAnB;EAWD;EACF;;EACD,UAAGC,cAAc,CAAC1B,KAAlB,EAAyB;EACvB,YAAIsC,EAAE,GAAGtB,CAAC,GAAGmB,eAAe,CAACnC,KAA7B;;EACA,YAAIuC,EAAE,GAAGtB,CAAC,GAAGS,cAAc,CAAC1B,KAAf,GAAuB,GAApC;;EACA,YAAIgD,EAAE,GAAGV,EAAE,GAAG3F,KAAd;EACAqG,QAAAA,EAAE,IAAI5B,GAAG,GAAGE,GAAZ;;EACA,YAAGT,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,UAAAA,GAAG,CAAC2B,SAAJ;EACA3B,UAAAA,GAAG,CAACkC,SAAJ,GAAgBvB,cAAc,CAAC1B,KAA/B;EACAe,UAAAA,GAAG,CAACmC,WAAJ,GAAkBvB,cAAlB;;EACA,cAAGC,cAAc,KAAK,QAAtB,EAAgC;EAC9Bb,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACzB,cAAc,CAAC1B,KAAf,GAAuB,CAAxB,EAA2B0B,cAAc,CAAC1B,KAAf,GAAuB,CAAlD,CAAhB;EACD,WAFD,MAGK,IAAG4B,cAAc,KAAK,QAAtB,EAAgC;EACnCb,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACzB,cAAc,CAAC1B,KAAhB,EAAuB0B,cAAc,CAAC1B,KAAtC,CAAhB;EACD,WAFI,MAGA;EACHe,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,EAAhB;EACD;;EACDpC,UAAAA,GAAG,CAACqC,MAAJ,CAAWd,EAAX,EAAeC,EAAf;EACAxB,UAAAA,GAAG,CAACsC,MAAJ,CAAWL,EAAX,EAAeT,EAAf;EACAxB,UAAAA,GAAG,CAACuC,MAAJ;EACAvC,UAAAA,GAAG,CAAC+B,SAAJ;EACD,SAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,cAAI6B,IAAI,GAAG;EACT0F,YAAAA,IAAI,EAAE,MADG;EAET5E,YAAAA,OAAO,EAAE,MAFA;EAGTC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOkE,EAAP,CADK,EAEL,CAAC,IAAD,EAAOC,EAAP,CAFK,EAGL,CAAC,IAAD,EAAOS,EAAP,CAHK,EAIL,CAAC,IAAD,EAAOT,EAAP,CAJK,EAKL,CAAC,cAAD,EAAiBb,cAAc,CAAC1B,KAAhC,CALK,EAML,CAAC,QAAD,EAAW2B,cAAX,CANK;EAHE,WAAX;;EAYA,cAAGC,cAAc,KAAK,QAAtB,EAAgC;EAC9BvE,YAAAA,IAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwB4D,cAAc,CAAC1B,KAAf,GAAuB,CAA/C,eAAqD0B,cAAc,CAAC1B,KAAf,GAAuB,CAA5E,EAAhB;EACD,WAFD,MAGK,IAAG4B,cAAc,KAAK,QAAtB,EAAgC;EACnCvE,YAAAA,IAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwB4D,cAAc,CAAC1B,KAAvC,eAAiD0B,cAAc,CAAC1B,KAAhE,EAAhB;EACD;;EACDwB,UAAAA,UAAU,CAACV,EAAX,CAAchD,IAAd,CAAmBT,IAAnB;EACD;EACF;;EACD,UAAGwE,gBAAgB,CAAC7B,KAApB,EAA2B;EACzB,YAAIsC,GAAE,GAAGtB,CAAC,GAAGrE,KAAJ,GAAYwF,eAAe,CAACnC,KAA5B,GAAoC6B,gBAAgB,CAAC7B,KAAjB,GAAyB,GAAtE;;EACA,YAAIuC,GAAE,GAAGtB,CAAT;EACA,YAAIsC,EAAE,GAAGhB,GAAE,GAAGhC,MAAL,GAAcmB,cAAc,CAAC1B,KAA7B,GAAqCgC,iBAAiB,CAAChC,KAAhE;EACAsC,QAAAA,GAAE,IAAIlB,GAAG,GAAGE,GAAZ;EACAiC,QAAAA,EAAE,IAAIlC,GAAG,GAAGE,GAAZ;;EACA,YAAGV,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,UAAAA,GAAG,CAAC2B,SAAJ;EACA3B,UAAAA,GAAG,CAACkC,SAAJ,GAAgBpB,gBAAgB,CAAC7B,KAAjC;EACAe,UAAAA,GAAG,CAACmC,WAAJ,GAAkBpB,gBAAlB;;EACA,cAAGC,gBAAgB,KAAK,QAAxB,EAAkC;EAChChB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACtB,gBAAgB,CAAC7B,KAAjB,GAAyB,CAA1B,EAA6B6B,gBAAgB,CAAC7B,KAAjB,GAAyB,CAAtD,CAAhB;EACD,WAFD,MAGK,IAAG+B,gBAAgB,KAAK,QAAxB,EAAkC;EACrChB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACtB,gBAAgB,CAAC7B,KAAlB,EAAyB6B,gBAAgB,CAAC7B,KAAjB,GAAyB,CAAlD,CAAhB;EACD,WAFI,MAGA;EACHe,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,EAAhB;EACD;;EACDpC,UAAAA,GAAG,CAACqC,MAAJ,CAAWd,GAAX,EAAeC,GAAf;EACAxB,UAAAA,GAAG,CAACsC,MAAJ,CAAWf,GAAX,EAAeiB,EAAf;EACAxC,UAAAA,GAAG,CAACuC,MAAJ;EACAvC,UAAAA,GAAG,CAAC+B,SAAJ;EACD,SAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,cAAI6B,KAAI,GAAG;EACT0F,YAAAA,IAAI,EAAE,MADG;EAET5E,YAAAA,OAAO,EAAE,MAFA;EAGTC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOkE,GAAP,CADK,EAEL,CAAC,IAAD,EAAOC,GAAP,CAFK,EAGL,CAAC,IAAD,EAAOD,GAAP,CAHK,EAIL,CAAC,IAAD,EAAOiB,EAAP,CAJK,EAKL,CAAC,cAAD,EAAiB1B,gBAAgB,CAAC7B,KAAlC,CALK,EAML,CAAC,QAAD,EAAW8B,gBAAX,CANK;EAHE,WAAX;;EAYA,cAAGC,gBAAgB,KAAK,QAAxB,EAAkC;EAChC1E,YAAAA,KAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwB+D,gBAAgB,CAAC7B,KAAjB,GAAyB,CAAjD,eAAuD6B,gBAAgB,CAAC7B,KAAjB,GAAyB,CAAhF,EAAhB;EACD,WAFD,MAGK,IAAG4B,cAAc,KAAK,QAAtB,EAAgC;EACnCvE,YAAAA,KAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwB+D,gBAAgB,CAAC7B,KAAzC,eAAmD6B,gBAAgB,CAAC7B,KAApE,EAAhB;EACD;;EACDwB,UAAAA,UAAU,CAACV,EAAX,CAAchD,IAAd,CAAmBT,KAAnB;EACD;EACF;;EACD,UAAG2E,iBAAiB,CAAChC,KAArB,EAA4B;EAC1B,YAAIsC,GAAE,GAAGtB,CAAC,GAAGmB,eAAe,CAACnC,KAA7B;;EACA,YAAIuC,GAAE,GAAGtB,CAAC,GAAGV,MAAJ,GAAamB,cAAc,CAAC1B,KAA5B,GAAoCgC,iBAAiB,CAAChC,KAAlB,GAA0B,GAAvE;;EACA,YAAIgD,GAAE,GAAGV,GAAE,GAAG3F,KAAd;;EACAqG,QAAAA,GAAE,IAAI5B,GAAG,GAAGE,GAAZ;EACAiB,QAAAA,GAAE,IAAIlB,GAAG,GAAGE,GAAZ;;EACA,YAAGV,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,UAAAA,GAAG,CAAC2B,SAAJ;EACA3B,UAAAA,GAAG,CAACkC,SAAJ,GAAgBjB,iBAAiB,CAAChC,KAAlC;EACAe,UAAAA,GAAG,CAACmC,WAAJ,GAAkBjB,iBAAlB;;EACA,cAAGC,iBAAiB,KAAK,QAAzB,EAAmC;EACjCnB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACnB,iBAAiB,CAAChC,KAAlB,GAA0B,CAA3B,EAA8BgC,iBAAiB,CAAChC,KAAlB,GAA0B,CAAxD,CAAhB;EACD,WAFD,MAGK,IAAGkC,iBAAiB,KAAK,QAAzB,EAAmC;EACtCnB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAACnB,iBAAiB,CAAChC,KAAnB,EAA0BgC,iBAAiB,CAAChC,KAAlB,GAA0B,CAApD,CAAhB;EACD,WAFI,MAGA;EACHe,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,EAAhB;EACD;;EACDpC,UAAAA,GAAG,CAACqC,MAAJ,CAAWd,GAAX,EAAeC,GAAf;EACAxB,UAAAA,GAAG,CAACsC,MAAJ,CAAWL,GAAX,EAAeT,GAAf;EACAxB,UAAAA,GAAG,CAACuC,MAAJ;EACAvC,UAAAA,GAAG,CAAC+B,SAAJ;EACD,SAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,cAAI6B,MAAI,GAAG;EACT0F,YAAAA,IAAI,EAAE,MADG;EAET5E,YAAAA,OAAO,EAAE,MAFA;EAGTC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOkE,GAAP,CADK,EAEL,CAAC,IAAD,EAAOC,GAAP,CAFK,EAGL,CAAC,IAAD,EAAOS,GAAP,CAHK,EAIL,CAAC,IAAD,EAAOT,GAAP,CAJK,EAKL,CAAC,cAAD,EAAiBP,iBAAiB,CAAChC,KAAnC,CALK,EAML,CAAC,QAAD,EAAWiC,iBAAX,CANK;EAHE,WAAX;;EAYA,cAAGC,iBAAiB,KAAK,QAAzB,EAAmC;EACjC7E,YAAAA,MAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwBkE,iBAAiB,CAAChC,KAAlB,GAA0B,CAAlD,eAAwDgC,iBAAiB,CAAChC,KAAlB,GAA0B,CAAlF,EAAhB;EACD,WAFD,MAGK,IAAGkC,iBAAiB,KAAK,QAAzB,EAAmC;EACtC7E,YAAAA,MAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwBkE,iBAAiB,CAAChC,KAA1C,eAAoDgC,iBAAiB,CAAChC,KAAtE,EAAhB;EACD;;EACDwB,UAAAA,UAAU,CAACV,EAAX,CAAchD,IAAd,CAAmBT,MAAnB;EACD;EACF;;EACD,UAAG8E,eAAe,CAACnC,KAAnB,EAA0B;EACxB,YAAIsC,GAAE,GAAGtB,CAAC,GAAGmB,eAAe,CAACnC,KAAhB,GAAwB,GAArC;;EACA,YAAIuC,GAAE,GAAGtB,CAAT;;EACA,YAAIsC,GAAE,GAAGhB,GAAE,GAAGhC,MAAL,GAAcmB,cAAc,CAAC1B,KAA7B,GAAqCgC,iBAAiB,CAAChC,KAAhE;;EACAuD,QAAAA,GAAE,IAAIlC,GAAG,GAAGE,GAAZ;;EACA,YAAGV,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,UAAAA,GAAG,CAAC2B,SAAJ;EACA3B,UAAAA,GAAG,CAACkC,SAAJ,GAAgBd,eAAe,CAACnC,KAAhC;EACAe,UAAAA,GAAG,CAACmC,WAAJ,GAAkBd,eAAlB;;EACA,cAAGC,eAAe,KAAK,QAAvB,EAAiC;EAC/BtB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAAChB,eAAe,CAACnC,KAAhB,GAAwB,CAAzB,EAA4BmC,eAAe,CAACnC,KAAhB,GAAwB,CAApD,CAAhB;EACD,WAFD,MAGK,IAAGqC,eAAe,KAAK,QAAvB,EAAiC;EACpCtB,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,CAAChB,eAAe,CAACnC,KAAjB,EAAwBmC,eAAe,CAACnC,KAAhB,GAAwB,CAAhD,CAAhB;EACD,WAFI,MAGA;EACHe,YAAAA,GAAG,CAACoC,WAAJ,CAAgB,EAAhB;EACD;;EACDpC,UAAAA,GAAG,CAACqC,MAAJ,CAAWd,GAAX,EAAeC,GAAf;EACAxB,UAAAA,GAAG,CAACsC,MAAJ,CAAWf,GAAX,EAAeiB,GAAf;EACAxC,UAAAA,GAAG,CAACuC,MAAJ;EACAvC,UAAAA,GAAG,CAAC+B,SAAJ;EACD,SAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,cAAI6B,MAAI,GAAG;EACT0F,YAAAA,IAAI,EAAE,MADG;EAET5E,YAAAA,OAAO,EAAE,MAFA;EAGTC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOkE,GAAP,CADK,EAEL,CAAC,IAAD,EAAOC,GAAP,CAFK,EAGL,CAAC,IAAD,EAAOD,GAAP,CAHK,EAIL,CAAC,IAAD,EAAOiB,GAAP,CAJK,EAKL,CAAC,cAAD,EAAiBpB,eAAe,CAACnC,KAAjC,CALK,EAML,CAAC,QAAD,EAAWoC,eAAX,CANK;EAHE,WAAX;;EAYA,cAAGC,eAAe,KAAK,QAAvB,EAAiC;EAC/BhF,YAAAA,MAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwBqE,eAAe,CAACnC,KAAhB,GAAwB,CAAhD,eAAsDmC,eAAe,CAACnC,KAAhB,GAAwB,CAA9E,EAAhB;EACD,WAFD,MAGK,IAAGqC,eAAe,KAAK,QAAvB,EAAiC;EACpChF,YAAAA,MAAI,CAACe,KAAL,CAAWN,IAAX,CAAgB,CAAC,kBAAD,YAAwBqE,eAAe,CAACnC,KAAxC,eAAkDmC,eAAe,CAACnC,KAAlE,EAAhB;EACD;;EACDwB,UAAAA,UAAU,CAACV,EAAX,CAAchD,IAAd,CAAmBT,MAAnB;EACD;EACF;EACF;;;0BAEa;EACZ,aAAO,KAAKiB,SAAZ;EACD;;;0BACS;EACR,aAAO,KAAKM,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKI,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACS;EACR,aAAO,KAAKA,KAAZ;EACD;;;0BACgB;EAAA,UACTkC,GADS,GAIT,IAJS,CACTA,GADS;EAAA,UACJsC,GADI,GAIT,IAJS,CACJA,GADI;EAAA,UACCpC,GADD,GAIT,IAJS,CACCA,GADD;EAAA,UACME,GADN,GAIT,IAJS,CACMA,GADN;EAAA,yBAIT,IAJS,CACW1F,KADX;EAAA,UAEbuG,eAFa,gBAEbA,eAFa;EAAA,UAGbN,gBAHa,gBAGbA,gBAHa;EAKf,aAAO,KAAKlF,KAAL,GACHwF,eAAe,CAACnC,KADb,GAEH6B,gBAAgB,CAAC7B,KAFd,GAGHkB,GAHG,GAIHsC,GAJG,GAKHpC,GALG,GAMHE,GANJ;EAOD;;;0BACiB;EAAA,UACVH,GADU,GAIV,IAJU,CACVA,GADU;EAAA,UACLsC,GADK,GAIV,IAJU,CACLA,GADK;EAAA,UACApC,GADA,GAIV,IAJU,CACAA,GADA;EAAA,UACKE,GADL,GAIV,IAJU,CACKA,GADL;EAAA,yBAIV,IAJU,CACU3F,KADV;EAAA,UAEd8F,cAFc,gBAEdA,cAFc;EAAA,UAGdM,iBAHc,gBAGdA,iBAHc;EAKhB,aAAO,KAAKzB,MAAL,GACHmB,cAAc,CAAC1B,KADZ,GAEHgC,iBAAiB,CAAChC,KAFf,GAGHmB,GAHG,GAIHsC,GAJG,GAKHpC,GALG,GAMHE,GANJ;EAOD;;;0BACc;EACb,aAAO,KAAKhD,UAAZ;EACD;;;;IA9Ze7D;;AC3ClB,aAAe;EACbgJ,EAAAA,KAAK,EAAE;EACLC,IAAAA,GAAG,EAAE,aADA;EACe;EACpBC,IAAAA,GAAG,EAAE,SAFA;EAEW;EAChBC,IAAAA,GAAG,EAAE,YAHA;EAGc;EACnBC,IAAAA,GAAG,EAAE,aAJA;EAIe;EACpBC,IAAAA,GAAG,EAAE,aALA;;EAAA;EADM,CAAf;;ECFA,IAAMC,KAAK,GAAG;EACZjI,EAAAA,QAAQ,EAAE,QADE;EAEZuD,EAAAA,OAAO,EAAE,OAFG;EAGZ2E,EAAAA,YAAY,EAAE,aAHF;EAIZhI,EAAAA,GAAG,EAAE,MAJO;EAKZuE,EAAAA,KAAK,EAAE,MALK;EAMZC,EAAAA,MAAM,EAAE,MANI;EAOZzE,EAAAA,IAAI,EAAE,MAPM;EAQZuD,EAAAA,SAAS,EAAE,CARC;EASZC,EAAAA,WAAW,EAAE,CATD;EAUZC,EAAAA,YAAY,EAAE,CAVF;EAWZC,EAAAA,UAAU,EAAE,CAXA;EAYZC,EAAAA,UAAU,EAAE,CAZA;EAaZC,EAAAA,YAAY,EAAE,CAbF;EAcZC,EAAAA,aAAa,EAAE,CAdH;EAeZC,EAAAA,WAAW,EAAE,CAfD;EAgBZzD,EAAAA,QAAQ,EAAE,EAhBE;EAiBZ6H,EAAAA,UAAU,EAAE,OAjBA;EAkBZC,EAAAA,KAAK,EAAE,MAlBK;EAmBZC,EAAAA,SAAS,EAAE,QAnBC;EAoBZC,EAAAA,UAAU,EAAE,GApBA;EAqBZC,EAAAA,UAAU,EAAE,QArBA;EAsBZ5C,EAAAA,cAAc,EAAE,CAtBJ;EAuBZG,EAAAA,gBAAgB,EAAE,CAvBN;EAwBZG,EAAAA,iBAAiB,EAAE,CAxBP;EAyBZG,EAAAA,eAAe,EAAE,CAzBL;EA0BZP,EAAAA,cAAc,EAAE,OA1BJ;EA2BZG,EAAAA,gBAAgB,EAAE,OA3BN;EA4BZG,EAAAA,iBAAiB,EAAE,OA5BP;EA6BZG,EAAAA,eAAe,EAAE,OA7BL;EA8BZkC,EAAAA,aAAa,EAAE,UA9BH;EA+BZ5H,EAAAA,KAAK,EAAE,MA/BK;EAgCZ4D,EAAAA,MAAM,EAAE,MAhCI;EAiCZiE,EAAAA,QAAQ,EAAE,CAjCE;EAkCZC,EAAAA,UAAU,EAAE,CAlCA;EAmCZC,EAAAA,SAAS,EAAE,MAnCC;EAoCZC,EAAAA,aAAa,EAAE,KApCH;EAqCZC,EAAAA,cAAc,EAAE,YArCJ;EAsCZC,EAAAA,UAAU,EAAE,SAtCA;EAuCZC,EAAAA,SAAS,EAAE,MAvCC;EAwCZ5I,EAAAA,UAAU,EAAE,SAxCA;EAyCZ2G,EAAAA,IAAI,EAAE,MAzCM;EA0CZS,EAAAA,MAAM,EAAE,MA1CI;EA2CZyB,EAAAA,WAAW,EAAE,CA3CD;EA4CZC,EAAAA,eAAe,EAAE;EA5CL,CAAd;EA+CA,IAAIC,KAAK,GAAG,EAAZ;EAEAxH,MAAM,CAACC,IAAP,CAAYsG,KAAZ,EAAmBxF,OAAnB,CAA2B,UAAAZ,CAAC,EAAI;EAC9B,MAAIsH,CAAC,GAAGlB,KAAK,CAACpG,CAAD,CAAb;EACAqH,EAAAA,KAAK,CAACnH,IAAN,CAAW;EACTF,IAAAA,CAAC,EAADA,CADS;EAETsH,IAAAA,CAAC,EAADA;EAFS,GAAX;EAID,CAND;;ECjDA,IAAIC,QAAQ,GAAG,GAAGA,QAAlB;;EACA,SAASC,MAAT,CAAgBrC,IAAhB,EAAsB;EACpB,SAAO,UAASsC,GAAT,EAAc;EACnB,WAAOF,QAAQ,CAACG,IAAT,CAAcD,GAAd,MAAuB,aAAatC,IAAb,GAAoB,GAAlD;EACD,GAFD;EAGD;;EAED,IAAIwC,QAAQ,GAAGH,MAAM,CAAC,QAAD,CAArB;;EAEA,SAASI,gBAAT,CAAyBxI,GAAzB,EAA8B;EAC5B,MAAIyI,GAAG,GAAG,EAAV;;EACA,OAAI,IAAIvI,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGH,GAAG,CAACI,MAAzB,EAAiCF,CAAC,GAAGC,GAArC,EAA0CD,CAAC,EAA3C,EAA+C;EAC7C,QAAIG,IAAI,GAAGL,GAAG,CAACE,CAAD,CAAd;;EACA,QAAGI,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAH,EAAwB;EACtBoI,MAAAA,GAAG,IAAID,gBAAe,CAACnI,IAAD,CAAtB;EACD,KAFD,MAGK;EACHoI,MAAAA,GAAG,IAAIC,SAAS,CAACrI,IAAD,CAAhB;EACD;EACF;;EACD,SAAOoI,GAAP;EACD;;EAED,SAASC,SAAT,CAAmB/J,CAAnB,EAAsB;EACpB,MAAGgK,KAAK,CAAChK,CAAD,CAAR,EAAa;EACX,WAAO,EAAP;EACD;;EACD,SAAOA,CAAC,CAACwJ,QAAF,EAAP;EACD;;EAED,SAASS,UAAT,CAAoBjK,CAApB,EAAuBkK,IAAvB,EAA6B;EAC3B,MAAGA,IAAH,EAAS;EACP,WAAOlK,CAAC,CAACmK,OAAF,CAAU,IAAV,EAAgB,QAAhB,CAAP;EACD;;EACD,SAAOnK,CAAC,CAACmK,OAAF,CAAU,IAAV,EAAgB,OAAhB,EAAyBA,OAAzB,CAAiC,IAAjC,EAAuC,MAAvC,CAAP;EACD;;EAED,SAASH,KAAT,CAAeT,CAAf,EAAkB;EAChB,SAAOA,CAAC,KAAKa,SAAN,IAAmBb,CAAC,KAAK,IAAhC;EACD;;EAED,SAASc,cAAT,CAAwBC,EAAxB,EAA4B;EAC1B,MAAGA,EAAE,CAAClD,IAAH,KAAY,MAAf,EAAuB;EACrB,QAAIpH,CAAC,GAAG,EAAR;EACAsK,IAAAA,EAAE,CAAC7H,KAAH,CAASI,OAAT,CAAiB,UAAAnB,IAAI,EAAI;EACvB1B,MAAAA,CAAC,eAAQ0B,IAAI,CAAC,CAAD,CAAZ,gBAAoBA,IAAI,CAAC,CAAD,CAAxB,OAAD;EACD,KAFD;;EAGA,QAAG4I,EAAE,CAAC9H,OAAH,KAAe,MAAlB,EAA0B;EACxB,4BAAexC,CAAf,cAAoBsK,EAAE,CAACC,OAAvB;EACD;;EACD,sBAAWD,EAAE,CAAC9H,OAAd,SAAwBxC,CAAxB;EACD,GATD,MAUK,IAAGsK,EAAE,CAAClD,IAAH,KAAY,MAAf,EAAuB;EAC1B,QAAIpH,EAAC,KAAL;EACAsK,IAAAA,EAAE,CAACE,QAAH,CAAY3H,OAAZ,CAAoB,UAAAnB,IAAI,EAAI;EAC1B1B,MAAAA,EAAC,IAAIqK,cAAc,CAAC3I,IAAD,CAAnB;EACD,KAFD;EAGA,wBAAa1B,EAAb;EACD,GANI,MAOA,IAAGsK,EAAE,CAAClD,IAAH,KAAY,KAAf,EAAsB;EACzB,QAAIpH,GAAC,GAAG,KAAR;EACAsK,IAAAA,EAAE,CAACnF,EAAH,CAAMtC,OAAN,CAAc,UAAAnB,IAAI,EAAI;EACpB1B,MAAAA,GAAC,IAAIqK,cAAc,CAAC3I,IAAD,CAAnB;EACD,KAFD;EAGA1B,IAAAA,GAAC,IAAI,SAAL;EACAsK,IAAAA,EAAE,CAACE,QAAH,CAAY3H,OAAZ,CAAoB,UAAAnB,IAAI,EAAI;EAC1B1B,MAAAA,GAAC,IAAIqK,cAAc,CAAC3I,IAAD,CAAnB;EACD,KAFD;EAGA1B,IAAAA,GAAC,IAAI,MAAL;EACA,wBAAaA,GAAb;EACD,GAXI,MAYA,IAAGsK,EAAE,CAAClD,IAAH,KAAY,MAAf,EAAuB;EAC1B,QAAIpH,GAAC,GAAG,KAAR;EACAsK,IAAAA,EAAE,CAACnF,EAAH,CAAMtC,OAAN,CAAc,UAAAnB,IAAI,EAAI;EACpB1B,MAAAA,GAAC,IAAIqK,cAAc,CAAC3I,IAAD,CAAnB;EACD,KAFD;EAGA1B,IAAAA,GAAC,IAAI,SAAL;EACAsK,IAAAA,EAAE,CAACC,OAAH,CAAW1H,OAAX,CAAmB,UAAAnB,IAAI,EAAI;EACzB1B,MAAAA,GAAC,IAAIqK,cAAc,CAAC3I,IAAD,CAAnB;EACD,KAFD;EAGA1B,IAAAA,GAAC,IAAI,MAAL;EACA,wBAAaA,GAAb;EACD;EACF;;EAED,IAAIyK,IAAI,GAAG;EACTC,EAAAA,QAAQ,EAAEjB,MAAM,CAAC,QAAD,CADP;EAETkB,EAAAA,QAAQ,EAAElB,MAAM,CAAC,QAAD,CAFP;EAGTmB,EAAAA,UAAU,EAAEnB,MAAM,CAAC,UAAD,CAHT;EAITG,EAAAA,QAAQ,EAARA,QAJS;EAKTiB,EAAAA,SAAS,EAAEpB,MAAM,CAAC,SAAD,CALR;EAMTqB,EAAAA,MAAM,EAAErB,MAAM,CAAC,MAAD,CANL;EAOTM,EAAAA,SAAS,EAATA,SAPS;EAQTF,EAAAA,eARS,2BAQOxI,GARP,EAQY;EACnB,WAAOwI,gBAAe,CAACxI,GAAD,CAAtB;EACD,GAVQ;EAWT4I,EAAAA,UAAU,EAAVA,UAXS;EAYTD,EAAAA,KAAK,EAALA,KAZS;EAaTK,EAAAA,cAAc,EAAdA;EAbS,CAAX;;EChFA,SAASU,eAAT,CAAyB9K,KAAzB,EAAgC+K,SAAhC,EAA2C;EACzC,MAAIC,GAAG,mBAAYD,SAAZ,CAAP;;EACA,MAAG,CAAC/K,KAAK,CAACgL,GAAD,CAAT,EAAgB;EACd;EACD;;EACD,MAAIvH,CAAC,GAAG,aAAawH,IAAb,CAAkBjL,KAAK,CAACgL,GAAD,CAAvB,CAAR;;EACA,MAAGvH,CAAH,EAAM;EACJzD,IAAAA,KAAK,CAACgL,GAAG,GAAG,OAAP,CAAL,GAAuBvH,CAAC,CAAC,CAAD,CAAxB;EACD;;EACD,MAAI1D,CAAC,GAAG,6BAA6BkL,IAA7B,CAAkCjL,KAAK,CAACgL,GAAD,CAAvC,CAAR;;EACA,MAAGjL,CAAH,EAAM;EACJC,IAAAA,KAAK,CAACgL,GAAG,GAAG,OAAP,CAAL,GAAuBjL,CAAC,CAAC,CAAD,CAAxB;EACD;;EACD,MAAImL,CAAC,GAAG,kBAAkBD,IAAlB,CAAuBjL,KAAK,CAACgL,GAAD,CAA5B,CAAR;;EACA,MAAGE,CAAC,IAAI,CAAC,CAAD,EAAI,CAAJ,EAAOC,OAAP,CAAeD,CAAC,CAAC,CAAD,CAAD,CAAK1J,MAApB,IAA8B,CAAC,CAAvC,EAA0C;EACxCxB,IAAAA,KAAK,CAACgL,GAAG,GAAG,OAAP,CAAL,GAAuBE,CAAC,CAAC,CAAD,CAAxB;EACD;EACF;;EAED,SAASE,SAAT,CAAmBpL,KAAnB,EAA0B;EACxB;EACAqJ,EAAAA,KAAK,CAACzG,OAAN,CAAc,UAAAnB,IAAI,EAAI;EACpB,QAAG,CAACzB,KAAK,CAACqL,cAAN,CAAqB5J,IAAI,CAACO,CAA1B,CAAJ,EAAkC;EAChChC,MAAAA,KAAK,CAACyB,IAAI,CAACO,CAAN,CAAL,GAAgBP,IAAI,CAAC6H,CAArB;EACD;EACF,GAJD,EAFwB;EAQxB;;EACA,MAAGtJ,KAAK,CAACsL,UAAT,EAAqB;EACnB,QAAIC,GAAG,GAAG,kBAAkBN,IAAlB,CAAuBjL,KAAK,CAACsL,UAA7B,CAAV;;EACA,QAAGC,GAAG,IAAI,CAAC,CAAD,EAAI,CAAJ,EAAOJ,OAAP,CAAeI,GAAG,CAAC,CAAD,CAAH,CAAO/J,MAAtB,IAAgC,CAAC,CAA3C,EAA8C;EAC5CxB,MAAAA,KAAK,CAAC6F,eAAN,GAAwB0F,GAAG,CAAC,CAAD,CAA3B;EACD;EACF;;EACD,MAAGvL,KAAK,CAACwL,IAAT,EAAe;EACb,QAAGxL,KAAK,CAACwL,IAAN,KAAe,MAAlB,EAA0B;EACxBxL,MAAAA,KAAK,CAAC4I,QAAN,GAAiB,CAAjB;EACA5I,MAAAA,KAAK,CAAC6I,UAAN,GAAmB,CAAnB;EACA7I,MAAAA,KAAK,CAAC8I,SAAN,GAAkB,MAAlB;EACD,KAJD,MAKK,IAAG9I,KAAK,CAACwL,IAAN,KAAe,MAAlB,EAA0B;EAC7BxL,MAAAA,KAAK,CAAC4I,QAAN,GAAiB,CAAjB;EACA5I,MAAAA,KAAK,CAAC6I,UAAN,GAAmB,CAAnB;EACA7I,MAAAA,KAAK,CAAC8I,SAAN,GAAkB,MAAlB;EACD,KAJI,MAKA,IAAG,WAAWjG,IAAX,CAAgB7C,KAAK,CAACwL,IAAtB,CAAH,EAAgC;EACnCxL,MAAAA,KAAK,CAAC4I,QAAN,GAAiB9H,UAAU,CAACd,KAAK,CAACwL,IAAP,CAA3B;EACAxL,MAAAA,KAAK,CAAC6I,UAAN,GAAmB,CAAnB;EACA7I,MAAAA,KAAK,CAAC8I,SAAN,GAAkB,CAAlB;EACD,KAJI,MAKA,IAAG,aAAajG,IAAb,CAAkB7C,KAAK,CAACwL,IAAxB,CAAH,EAAkC,CAAlC,MACA,IAAG,YAAY3I,IAAZ,CAAiB7C,KAAK,CAACwL,IAAvB,CAAH,EAAiC,CAAjC,MACA;EACHxL,MAAAA,KAAK,CAAC4I,QAAN,GAAiB,CAAjB;EACA5I,MAAAA,KAAK,CAAC6I,UAAN,GAAmB,CAAnB;EACA7I,MAAAA,KAAK,CAAC8I,SAAN,GAAkB,MAAlB;EACD;EACF;;EACD,MAAG9I,KAAK,CAACyL,MAAT,EAAiB;EACfzL,IAAAA,KAAK,CAAC0L,SAAN,GAAkB1L,KAAK,CAAC2L,WAAN,GAAoB3L,KAAK,CAAC4L,YAAN,GAAqB5L,KAAK,CAAC6L,UAAN,GAAmB7L,KAAK,CAACyL,MAApF;EACD;;EACD,MAAGzL,KAAK,CAAC8L,MAAT,EAAiB;EACf9L,IAAAA,KAAK,CAAC2D,SAAN,GAAkB3D,KAAK,CAAC4D,WAAN,GAAoB5D,KAAK,CAAC6D,YAAN,GAAqB7D,KAAK,CAAC8D,UAAN,GAAmB9D,KAAK,CAAC8L,MAApF;EACD;;EACD,MAAG9L,KAAK,CAAC+L,OAAT,EAAkB;EAChB/L,IAAAA,KAAK,CAAC+D,UAAN,GAAmB/D,KAAK,CAACgE,YAAN,GAAqBhE,KAAK,CAACiE,aAAN,GAAsBjE,KAAK,CAACkE,WAAN,GAAoBlE,KAAK,CAAC+L,OAAxF;EACD;;EACDjB,EAAAA,eAAe,CAAC9K,KAAD,EAAQ,KAAR,CAAf;EACA8K,EAAAA,eAAe,CAAC9K,KAAD,EAAQ,OAAR,CAAf;EACA8K,EAAAA,eAAe,CAAC9K,KAAD,EAAQ,QAAR,CAAf;EACA8K,EAAAA,eAAe,CAAC9K,KAAD,EAAQ,MAAR,CAAf,CAnDwB;;EAqDxB,GACE,WADF,EAEE,aAFF,EAGE,cAHF,EAIE,YAJF,EAKE,YALF,EAME,cANF,EAOE,eAPF,EAQE,aARF,EASE,gBATF,EAUE,kBAVF,EAWE,mBAXF,EAYE,iBAZF,EAaE,KAbF,EAcE,OAdF,EAeE,QAfF,EAgBE,MAhBF,EAiBE,OAjBF,EAkBE,QAlBF,EAmBE,WAnBF,EAoBE4C,OApBF,CAoBU,UAAAZ,CAAC,EAAI;EACb,QAAIsH,CAAC,GAAGtJ,KAAK,CAACgC,CAAD,CAAb,CADa;;EAGb,QAAG,CAACwI,IAAI,CAACT,KAAL,CAAWT,CAAX,CAAD,IAAkBA,CAAC,CAACnF,IAAvB,EAA6B;EAC3B;EACD;;EACD,QAAGmF,CAAC,KAAK,MAAT,EAAiB;EACftJ,MAAAA,KAAK,CAACgC,CAAD,CAAL,GAAW;EACTmC,QAAAA,IAAI,EAAEA,IAAI,CAACnD;EADF,OAAX;EAGD,KAJD,MAKK,IAAG,KAAK6B,IAAL,CAAUyG,CAAV,CAAH,EAAiB;EACpBA,MAAAA,CAAC,GAAGxI,UAAU,CAACwI,CAAD,CAAV,IAAiB,CAArB;EACAtJ,MAAAA,KAAK,CAACgC,CAAD,CAAL,GAAW;EACToC,QAAAA,KAAK,EAAEkF,CADE;EAETnF,QAAAA,IAAI,EAAEA,IAAI,CAACjD;EAFF,OAAX;EAID,KANI,MAOA;EACHoI,MAAAA,CAAC,GAAGxI,UAAU,CAACwI,CAAD,CAAV,IAAiB,CAArB;EACAtJ,MAAAA,KAAK,CAACgC,CAAD,CAAL,GAAW;EACToC,QAAAA,KAAK,EAAEkF,CADE;EAETnF,QAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFF,OAAX;EAID;EACF,GA7CD,EArDwB;;EAoGxB,MAAIyH,UAAU,GAAG1I,KAAK,CAAC0I,UAAvB;;EACA,MAAGA,UAAU,KAAK,QAAlB,EAA4B;EAC1BA,IAAAA,UAAU,GAAG;EACXtE,MAAAA,KAAK,EAAEpE,KAAK,CAACS,QAAN,GAAiBuL,IAAI,CAAClE,KAAL,CAAWC,GADxB;EAEX5D,MAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFA,KAAb;EAID,GALD,MAMK,IAAG,MAAM4B,IAAN,CAAW6F,UAAX,CAAH,EAA2B;EAC9BA,IAAAA,UAAU,GAAG5H,UAAU,CAAC4H,UAAD,CAAvB;EACAA,IAAAA,UAAU,GAAG;EACXtE,MAAAA,KAAK,EAAE6H,IAAI,CAACC,GAAL,CAASlM,KAAK,CAACS,QAAf,EAAyBiI,UAAzB,CADI;EAEXvE,MAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFA,KAAb;EAID,GANI;EAAA,OAQA;EACHyH,MAAAA,UAAU,GAAG5H,UAAU,CAAC4H,UAAD,CAAV,IAA0B,QAAvC,CADG;;EAGH,UAAGA,UAAU,KAAK,QAAlB,EAA4B;EAC1BA,QAAAA,UAAU,GAAG;EACXtE,UAAAA,KAAK,EAAEpE,KAAK,CAACS,QAAN,GAAiBuL,IAAI,CAAClE,KAAL,CAAWC,GADxB;EAEX5D,UAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFA,SAAb;EAID,OALD,MAMK;EACHyH,QAAAA,UAAU,GAAG;EACXtE,UAAAA,KAAK,EAAEsE,UAAU,GAAG1I,KAAK,CAACS,QADf;EAEX0D,UAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFA,SAAb;EAID;EACF;;EACDjB,EAAAA,KAAK,CAAC0I,UAAN,GAAmBA,UAAnB;EACD;;EAED,SAASyD,YAAT,CAAsBnM,KAAtB,EAA6B;EAAA,MACrBwI,SADqB,GAC2BxI,KAD3B,CACrBwI,SADqB;EAAA,MACVC,UADU,GAC2BzI,KAD3B,CACVyI,UADU;EAAA,MACEhI,QADF,GAC2BT,KAD3B,CACES,QADF;EAAA,MACY6H,UADZ,GAC2BtI,KAD3B,CACYsI,UADZ;EAE3B,mBAAUE,SAAV,cAAuBC,UAAvB,cAAqChI,QAArC,gBAAmDA,QAAnD,gBAAiE6H,UAAjE;EACD;;EAED,SAAS8D,WAAT,CAAqBpM,KAArB,EAA4B;EAC1B,MAAIqM,MAAM,GAAGrM,KAAK,CAACS,QAAN,GAAiBuL,IAAI,CAAClE,KAAL,CAAWC,GAAzC;EACA,SAAO,CAAC/H,KAAK,CAAC0I,UAAN,CAAiBtE,KAAjB,GAAyBiI,MAA1B,IAAoC,GAApC,GAA0CrM,KAAK,CAACS,QAAN,GAAiBuL,IAAI,CAAClE,KAAL,CAAWG,GAA7E;EACD;;AAED,YAAe;EACbmD,EAAAA,SAAS,EAATA,SADa;EAEbe,EAAAA,YAAY,EAAZA,YAFa;EAGbC,EAAAA,WAAW,EAAXA;EAHa,CAAf;;MCrKME;;;EACJ,mBAAYlH,CAAZ,EAAeC,CAAf,EAAkB5B,CAAlB,EAAqB6G,OAArB,EAA8BtK,KAA9B,EAAqC;EAAA;;EACnC,SAAKjB,GAAL,GAAWqG,CAAX;EACA,SAAKpG,GAAL,GAAWqG,CAAX;EACA,SAAKpG,OAAL,GAAewE,CAAf;EACA,SAAK8I,SAAL,GAAiBjC,OAAjB;EACA,SAAK/K,OAAL,GAAeS,KAAf;EACA,SAAKP,YAAL,GAAoB,EAApB;EACD;;;;6BAEMwF,YAAYE,KAAK;EAAA,UAChBnF,KADgB,GACS,IADT,CAChBA,KADgB;EAAA,UACTsK,OADS,GACS,IADT,CACTA,OADS;EAAA,UACAlF,CADA,GACS,IADT,CACAA,CADA;EAAA,UACGC,CADH,GACS,IADT,CACGA,CADH;EAEtBA,MAAAA,CAAC,IAAI1E,GAAG,CAACyL,WAAJ,CAAgBpM,KAAhB,CAAL;;EACA,UAAGiF,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACqH,QAAJ,CAAalC,OAAb,EAAsBlF,CAAtB,EAAyBC,CAAzB;EACD,OAFD,MAGK,IAAGJ,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,aAAKH,YAAL,GAAoB;EAClB0H,UAAAA,IAAI,EAAE,MADY;EAElB5E,UAAAA,OAAO,EAAE,MAFS;EAGlBC,UAAAA,KAAK,EAAE,CACL,CAAC,GAAD,EAAM4C,CAAN,CADK,EAEL,CAAC,GAAD,EAAMC,CAAN,CAFK,EAGL,CAAC,MAAD,EAASrF,KAAK,CAACuI,KAAf,CAHK,EAIL,CAAC,WAAD,YAAiBvI,KAAK,CAACS,QAAvB,QAJK,CAHW;EASlB6J,UAAAA,OAAO,EAAPA;EATkB,SAApB,CAD+B;EAahC;EACF;;;gCAES5K,MAAM;EACd,WAAKX,GAAL,IAAYW,IAAZ;EACD;;;gCAESA,MAAM;EACd,WAAKV,GAAL,IAAYU,IAAZ;EACD;;;0BAEO;EACN,aAAO,KAAKX,GAAZ;EACD;;;0BACO;EACN,aAAO,KAAKC,GAAZ;EACD;;;0BACW;EACV,aAAO,KAAKC,OAAZ;EACD;;;0BACa;EACZ,aAAO,KAAKsN,SAAZ;EACD;;;0BACW;EACV,aAAO,KAAKhN,OAAZ;EACD;;;0BACc;EACb,aAAOoB,GAAG,CAACyL,WAAJ,CAAgB,KAAKpM,KAArB,CAAP;EACD;;;0BACgB;EACf,aAAO,KAAKP,YAAZ;EACD;;;;;;EC1DH,IAAMgN,gBAAgB,GAAG,EAAzB;;MAEMC;;;;;EACJ,gBAAYpC,OAAZ,EAAqB;EAAA;;EAAA;;EACnB;EACA,UAAKiC,SAAL,GAAiBjC,OAAO,CAACf,QAAR,EAAjB;EACA,UAAKoD,WAAL,GAAmB,EAAnB;EACA,UAAKC,eAAL,GAAuB,EAAvB;EACA,UAAKC,WAAL,GAAmB,CAAnB;EACA,UAAKC,WAAL,GAAmB,CAAnB;EANmB;EAOpB;;;;;kCAGW;EACV,WAAKF,eAAL,GAAuB,EAAvB;EADU,UAEJzH,GAFI,GAE+C,IAF/C,CAEJA,GAFI;EAAA,UAECmF,OAFD,GAE+C,IAF/C,CAECA,OAFD;EAAA,UAEUtK,KAFV,GAE+C,IAF/C,CAEUA,KAFV;EAAA,UAEiB+M,aAFjB,GAE+C,IAF/C,CAEiBA,aAFjB;EAAA,UAEgC9H,UAFhC,GAE+C,IAF/C,CAEgCA,UAFhC;;EAGV,UAAGA,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAAC6G,IAAJ,GAAWrL,GAAG,CAACwL,YAAJ,CAAiBnM,KAAjB,CAAX;EACD;;EACD,UAAIgN,KAAK,GAAGP,gBAAgB,CAACzM,KAAK,CAACS,QAAP,CAAhB,GAAmCgM,gBAAgB,CAACzM,KAAK,CAACS,QAAP,CAAhB,IAAoC,EAAnF;EACA,UAAIe,MAAM,GAAG8I,OAAO,CAAC9I,MAArB;EACA,UAAIyL,GAAG,GAAG,CAAV;;EACA,WAAI,IAAI3L,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGE,MAAnB,EAA2BF,CAAC,EAA5B,EAAgC;EAC9B,YAAI4L,KAAI,GAAG5C,OAAO,CAAC6C,MAAR,CAAe7L,CAAf,CAAX;;EACA,YAAI8L,EAAE,SAAN;;EACA,YAAGJ,KAAK,CAAC3B,cAAN,CAAqB6B,KAArB,CAAH,EAA+B;EAC7BE,UAAAA,EAAE,GAAGJ,KAAK,CAACE,KAAD,CAAV;EACD,SAFD,MAGK,IAAGjI,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAClCyN,UAAAA,EAAE,GAAGJ,KAAK,CAACE,KAAD,CAAL,GAAc/H,GAAG,CAACkI,WAAJ,CAAgBH,KAAhB,EAAsBnM,KAAzC;EACD,SAFI,MAGA,IAAGkE,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/BwN,UAAAA,EAAE,GAAGJ,KAAK,CAACE,KAAD,CAAL,GAAcrG,IAAI,CAAC/G,OAAL,CAAaoN,KAAb,EAAmBlN,KAAnB,CAAnB;EACD;;EACD+M,QAAAA,aAAa,CAAC7K,IAAd,CAAmBkL,EAAnB;EACAH,QAAAA,GAAG,IAAIG,EAAP;EACA,aAAKP,WAAL,GAAmBZ,IAAI,CAACC,GAAL,CAAS,KAAKoB,SAAd,EAAyBF,EAAzB,CAAnB;EACD;;EACD,WAAKN,WAAL,GAAmBG,GAAnB;EACD;;;+BAEQzJ,MAAM+J,WAAW;EAAA;;EAAA,UAClBnI,CADkB,GACH5B,IADG,CAClB4B,CADkB;EAAA,UACfC,CADe,GACH7B,IADG,CACf6B,CADe;EAAA,UACZ5B,CADY,GACHD,IADG,CACZC,CADY;EAAA,UACTmD,CADS,GACHpD,IADG,CACToD,CADS;EAExB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EACA,UAAImI,IAAI,GAAGpI,CAAX;EAJwB,UAKlBD,GALkB,GAK4C,IAL5C,CAKlBA,GALkB;EAAA,UAKbmF,OALa,GAK4C,IAL5C,CAKbA,OALa;EAAA,UAKJtK,KALI,GAK4C,IAL5C,CAKJA,KALI;EAAA,UAKGyN,SALH,GAK4C,IAL5C,CAKGA,SALH;EAAA,UAKcV,aALd,GAK4C,IAL5C,CAKcA,aALd;EAAA,UAK6B9H,UAL7B,GAK4C,IAL5C,CAK6BA,UAL7B;;EAOxB,UAAIyI,KAAK,GAAG,CAAZ;EACA,UAAIpM,CAAC,GAAG,CAAR;EACA,UAAIqM,KAAK,GAAG,CAAZ;EACA,UAAInM,MAAM,GAAG8I,OAAO,CAAC9I,MAArB;;EACA,aAAMF,CAAC,GAAGE,MAAV,EAAkB;EAChBmM,QAAAA,KAAK,IAAIZ,aAAa,CAACzL,CAAD,CAAtB;;EACA,YAAIqM,KAAK,KAAKlK,CAAd,EAAiB;EACf,cAAImK,OAAO,GAAG,IAAItB,OAAJ,CAAYlH,CAAZ,EAAeC,CAAf,EAAkBsI,KAAlB,EAAyBrD,OAAO,CAACxH,KAAR,CAAc4K,KAAd,EAAqBpM,CAAC,GAAG,CAAzB,CAAzB,EAAsDtB,KAAtD,CAAd;EACAyN,UAAAA,SAAS,CAACvL,IAAV,CAAe0L,OAAf;EACAJ,UAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAC,GAAGuI,KAAnB,CAAP;EACAtI,UAAAA,CAAC,IAAI,KAAKrF,KAAL,CAAW0I,UAAX,CAAsBtE,KAA3B;EACAsJ,UAAAA,KAAK,GAAGpM,CAAC,GAAG,CAAZ;EACAA,UAAAA,CAAC,GAAGoM,KAAK,GAAG,CAAZ;EACAC,UAAAA,KAAK,GAAG,CAAR;EACD,SARD,MASK,IAAIA,KAAK,GAAGlK,CAAZ,EAAe;EAClB;EACA,cAAGnC,CAAC,KAAKoM,KAAT,EAAgB;EACdpM,YAAAA,CAAC,GAAGoM,KAAK,GAAG,CAAZ;EACD;;EACD,cAAIE,QAAO,GAAG,IAAItB,OAAJ,CAAYlH,CAAZ,EAAeC,CAAf,EAAkBsI,KAAK,GAAGZ,aAAa,CAACzL,CAAD,CAAvC,EAA4CgJ,OAAO,CAACxH,KAAR,CAAc4K,KAAd,EAAqBpM,CAArB,CAA5C,EAAqEtB,KAArE,CAAd;;EACAyN,UAAAA,SAAS,CAACvL,IAAV,CAAe0L,QAAf;EACAJ,UAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAC,GAAGuI,KAAJ,GAAYZ,aAAa,CAACzL,CAAD,CAAxC,CAAP;EACA+D,UAAAA,CAAC,IAAI,KAAKrF,KAAL,CAAW0I,UAAX,CAAsBtE,KAA3B;EACAsJ,UAAAA,KAAK,GAAGpM,CAAR;EACAA,UAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;EACAqM,UAAAA,KAAK,GAAG,CAAR;EACD,SAZI,MAaA;EACHrM,UAAAA,CAAC;EACF;EACF;;EACD,UAAGoM,KAAK,GAAGlM,MAAR,IAAkBkM,KAAK,GAAGpM,CAA7B,EAAgC;EAC9BqM,QAAAA,KAAK,GAAG,CAAR;;EACA,aAAIrM,CAAC,GAAGoM,KAAR,EAAepM,CAAC,GAAGE,MAAnB,EAA2BF,CAAC,EAA5B,EAAgC;EAC9BqM,UAAAA,KAAK,IAAIZ,aAAa,CAACzL,CAAD,CAAtB;EACD;;EACD,YAAIsM,SAAO,GAAG,IAAItB,OAAJ,CAAYlH,CAAZ,EAAeC,CAAf,EAAkBsI,KAAlB,EAAyBrD,OAAO,CAACxH,KAAR,CAAc4K,KAAd,EAAqBlM,MAArB,CAAzB,EAAuDxB,KAAvD,CAAd;;EACAyN,QAAAA,SAAS,CAACvL,IAAV,CAAe0L,SAAf;EACAJ,QAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAC,GAAGuI,KAAnB,CAAP;EACAtI,QAAAA,CAAC,IAAIrF,KAAK,CAAC0I,UAAN,CAAiBtE,KAAtB;EACD;;EACD,WAAKnF,OAAL,GAAeuO,IAAI,GAAGpI,CAAtB;EACA,WAAKlG,QAAL,GAAgBmG,CAAC,GAAG7B,IAAI,CAAC6B,CAAzB;;EACA,UAAGkI,SAAH,EAAc;EACZ,aAAKZ,WAAL,GAAmB,EAAnB;EACD,OAFD,MAGK;EAAA,YACGzD,SADH,GACiBlJ,KADjB,CACGkJ,SADH;;EAEH,YAAG,CAAC,QAAD,EAAW,OAAX,EAAoBiC,OAApB,CAA4BjC,SAA5B,IAAyC,CAAC,CAA7C,EAAgD;EAC9CuE,UAAAA,SAAS,CAAC7K,OAAV,CAAkB,UAAAgL,OAAO,EAAI;EAC3B,gBAAIlO,IAAI,GAAG,MAAI,CAACT,OAAL,GAAe2O,OAAO,CAAC7M,KAAlC;;EACA,gBAAGrB,IAAI,GAAG,CAAV,EAAa;EACXkO,cAAAA,OAAO,CAAC9I,SAAR,CAAkBoE,SAAS,KAAK,QAAd,GAAyBxJ,IAAI,GAAG,GAAhC,GAAsCA,IAAxD;EACD;EACF,WALD;EAMD;EACF;EACF;;;6BAEMuF,YAAY;EAAA,UACTE,GADS,GACM,IADN,CACTA,GADS;EAAA,UACJnF,KADI,GACM,IADN,CACJA,KADI;;EAEjB,UAAGiF,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAAC6G,IAAJ,GAAWrL,GAAG,CAACwL,YAAJ,CAAiBnM,KAAjB,CAAX;EACAmF,QAAAA,GAAG,CAAC4B,SAAJ,GAAgB/G,KAAK,CAACuI,KAAtB;EACD;;EACD,WAAKkF,SAAL,CAAe7K,OAAf,CAAuB,UAAAnB,IAAI,EAAI;EAC7BA,QAAAA,IAAI,CAACoM,MAAL,CAAY5I,UAAZ,EAAwBE,GAAxB;EACD,OAFD;;EAGA,UAAGF,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC1B,aAAKH,YAAL,GAAoB;EAClB0H,UAAAA,IAAI,EAAE,MADY;EAElBoD,UAAAA,QAAQ,EAAE,KAAKkD,SAAL,CAAeK,GAAf,CAAmB,UAAAF,OAAO;EAAA,mBAAIA,OAAO,CAAChI,UAAZ;EAAA,WAA1B;EAFQ,SAApB;EAID;EACF;;;qCAEcnC,GAAG;EAChB,aAAOA,CAAC,GAAG,KAAKsK,SAAhB;EACD;;;gCAESrO,MAAM;EACd,0EAAgBA,IAAhB;;EACA,WAAK+N,SAAL,CAAe7K,OAAf,CAAuB,UAAAnB,IAAI,EAAI;EAC7BA,QAAAA,IAAI,CAACqD,SAAL,CAAepF,IAAf;EACD,OAFD;EAGD;;;gCAESA,MAAM;EACd,0EAAgBA,IAAhB;;EACA,WAAK+N,SAAL,CAAe7K,OAAf,CAAuB,UAAAnB,IAAI,EAAI;EAC7BA,QAAAA,IAAI,CAACsD,SAAL,CAAerF,IAAf;EACD,OAFD;EAGD;;;4CAEqB;EACpB,UAAIsO,CAAC,GAAG,CAAR;EACA,WAAKjB,aAAL,CAAmBnK,OAAnB,CAA2B,UAAAnB,IAAI,EAAI;EACjCuM,QAAAA,CAAC,GAAG/B,IAAI,CAACC,GAAL,CAAS8B,CAAT,EAAYvM,IAAZ,CAAJ;EACD,OAFD;EAGA,aAAO;EAAEyK,QAAAA,GAAG,EAAE,KAAK6B,SAAZ;EAAuBE,QAAAA,GAAG,EAAED;EAA5B,OAAP;EACD;;;0BAEa;EACZ,aAAO,KAAKzB,SAAZ;EACD;wBACWjD,GAAG;EACb,WAAKiD,SAAL,GAAiBjD,CAAjB;EACD;;;0BACe;EACd,aAAO,KAAKqD,WAAZ;EACD;;;0BACmB;EAClB,aAAO,KAAKC,eAAZ;EACD;;;0BACe;EACd,aAAO,KAAKC,WAAZ;EACD;;;0BACe;EACd,aAAO,KAAKC,WAAZ;EACD;;;0BACc;EACb,UAAIoB,IAAI,GAAG,KAAKT,SAAL,CAAe,KAAKA,SAAL,CAAejM,MAAf,GAAwB,CAAvC,CAAX;EACA,aAAO0M,IAAI,CAAC7I,CAAL,GAAS,KAAKA,CAAd,GAAkB6I,IAAI,CAACC,QAA9B;EACD;;;0BACgB;EACf,aAAO,KAAKC,YAAZ;EACD;;;;IA7KgBtP;;MCPbuP;;;EACJ,qBAAYjJ,CAAZ,EAAeC,CAAf,EAAkB;EAAA;;EAChB,SAAKiJ,MAAL,GAAc,EAAd;EACA,SAAKvP,GAAL,GAAWqG,CAAX;EACA,SAAKpG,GAAL,GAAWqG,CAAX;EACA,SAAK7F,UAAL,GAAkB,CAAlB;EACD;;;;0BAEGiC,MAAM;EACR,WAAKG,IAAL,CAAUM,IAAV,CAAeT,IAAf;EACD;;;sCAEe;EACd,UAAI0M,QAAQ,GAAG,CAAf;EACA,WAAKvM,IAAL,CAAUgB,OAAV,CAAkB,UAAAnB,IAAI,EAAI;EACxB0M,QAAAA,QAAQ,GAAGlC,IAAI,CAACC,GAAL,CAASiC,QAAT,EAAmB1M,IAAI,CAAC0M,QAAxB,CAAX;EACD,OAFD;EAGA,aAAOA,QAAP;EACD;;;sCAEe;EAAA;;EACd,WAAK3O,UAAL,GAAkB,KAAK+O,aAAL,EAAlB,CADc;;EAGd,UAAG,KAAK3M,IAAL,CAAUJ,MAAV,GAAmB,CAAtB,EAAyB;EACvB,aAAKI,IAAL,CAAUgB,OAAV,CAAkB,UAAAnB,IAAI,EAAI;EACxB,cAAGA,IAAI,CAAC0M,QAAL,KAAkB,KAAI,CAACA,QAA1B,EAAoC;EAClC1M,YAAAA,IAAI,CAACsD,SAAL,CAAe,KAAI,CAACoJ,QAAL,GAAgB1M,IAAI,CAAC0M,QAApC;EACD;EACF,SAJD;EAKD;EACF;;;mCAEYzO,MAAM;EACjB,WAAKkC,IAAL,CAAUgB,OAAV,CAAkB,UAAAnB,IAAI,EAAI;EACxBA,QAAAA,IAAI,CAACqD,SAAL,CAAepF,IAAf;EACD,OAFD;EAGD;;;0BAEU;EACT,aAAO,KAAK4O,MAAZ;EACD;;;0BACO;EACN,aAAO,KAAKvP,GAAZ;EACD;;;0BACO;EACN,aAAO,KAAKC,GAAZ;EACD;;;0BACW;EACV,UAAI+B,KAAK,GAAG,CAAZ;EACA,WAAKa,IAAL,CAAUgB,OAAV,CAAkB,UAAAnB,IAAI,EAAI;EACxBV,QAAAA,KAAK,IAAIU,IAAI,CAACV,KAAd;EACD,OAFD;EAGA,aAAOA,KAAP;EACD;;;0BACY;EACX,UAAI4D,MAAM,GAAG,CAAb;EACA,WAAK/C,IAAL,CAAUgB,OAAV,CAAkB,UAAAnB,IAAI,EAAI;EACxBkD,QAAAA,MAAM,GAAGsH,IAAI,CAACC,GAAL,CAASvH,MAAT,EAAiBlD,IAAI,CAACkD,MAAtB,CAAT;EACD,OAFD;EAGA,aAAOA,MAAP;EACD;;;0BACc;EACb,aAAO,KAAKnF,UAAZ;EACD;;;0BACU;EACT,aAAO,KAAK8O,MAAL,CAAY9M,MAAnB;EACD;;;;;;EC7DH,IAAMgN,SAAS,GAAG,EAAlB;;MAEMC;;;;;EACJ,gBAAYlM,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA,6EACpBD,OADoB,EACXC,KADW;EAE3B;;;;oCAEa;EACZ7B,MAAAA,GAAG,CAACyK,SAAJ,CAAc,KAAKpL,KAAnB;EACD;;;qCAEcyD,GAAGiL,OAAO;EACvB;EADuB,UAER3N,KAFQ,GAEI,IAFJ,CAEjBf,KAFiB,CAERe,KAFQ;;EAGvB,UAAGA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAAClD,EAAvB,EAA2B;EACzB,eAAOwC,CAAC,GAAG1C,KAAK,CAACqD,KAAjB;EACD,OAFD,MAGK,IAAGrD,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACjD,OAAvB,EAAgC;EACnC,eAAOuC,CAAC,GAAGiL,KAAK,GAAG3N,KAAK,CAACqD,KAAd,GAAsB,IAAjC;EACD;;EACD,aAAOX,CAAP;EACD;;;qCAEckL,gBAAgBlL,GAAGmD,GAAG;EACnC,UAAIgI,CAAC,GAAG,CAAR;EACA,UAAIX,GAAG,GAAG,CAAV;EACA,UAAI/B,GAAG,GAAG,CAAV;EAHmC,UAI7BlM,KAJ6B,GAInB,IAJmB,CAI7BA,KAJ6B;;EAAA,UAOjCe,KAPiC,GAa/Bf,KAb+B,CAOjCe,KAPiC;EAAA,UAQjC4D,MARiC,GAa/B3E,KAb+B,CAQjC2E,MARiC;EAAA,UASjCmB,cATiC,GAa/B9F,KAb+B,CASjC8F,cATiC;EAAA,UAUjCG,gBAViC,GAa/BjG,KAb+B,CAUjCiG,gBAViC;EAAA,UAWjCG,iBAXiC,GAa/BpG,KAb+B,CAWjCoG,iBAXiC;EAAA,UAYjCG,eAZiC,GAa/BvG,KAb+B,CAYjCuG,eAZiC;EAcnC,UAAIsI,IAAI,GAAGF,cAAc,GAAG5N,KAAH,GAAW4D,MAApC;;EACA,UAAGkK,IAAI,CAAC1K,IAAL,KAAcA,IAAI,CAACnD,IAAtB,EAA4B;EAC1B4N,QAAAA,CAAC,GAAG1C,GAAG,IAAI2C,IAAI,CAACzK,KAAhB;EACD,OAjBkC;;;EAmBnC,UAAGuK,cAAH,EAAmB;EACjB,YAAIlL,EAAC,GAAGwC,gBAAgB,CAAC7B,KAAjB,GAAyBmC,eAAe,CAACnC,KAAjD;;EACAwK,QAAAA,CAAC,IAAInL,EAAL;EACAyI,QAAAA,GAAG,IAAIzI,EAAP;EACAwK,QAAAA,GAAG,IAAIxK,EAAP;EACD,OALD,MAMK;EACH,YAAImD,EAAC,GAAGd,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAjD;;EACAwK,QAAAA,CAAC,IAAIhI,EAAL;EACAsF,QAAAA,GAAG,IAAItF,EAAP;EACAqH,QAAAA,GAAG,IAAIrH,EAAP;EACD;;EACD,aAAO;EAAEgI,QAAAA,CAAC,EAADA,CAAF;EAAKX,QAAAA,GAAG,EAAHA,GAAL;EAAU/B,QAAAA,GAAG,EAAHA;EAAV,OAAP;EACD;;;oCAEa1I,MAAM;EAAA,UACZ4B,CADY,GACG5B,IADH,CACZ4B,CADY;EAAA,UACTC,CADS,GACG7B,IADH,CACT6B,CADS;EAAA,UACN5B,CADM,GACGD,IADH,CACNC,CADM;EAAA,UACHmD,CADG,GACGpD,IADH,CACHoD,CADG;EAElB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EACA,WAAKpG,OAAL,GAAewE,CAAf;EAJkB,UAKZzD,KALY,GAKF,IALE,CAKZA,KALY;EAAA,UAOhBe,KAPgB,GAadf,KAbc,CAOhBe,KAPgB;EAAA,UAQhB4D,MARgB,GAad3E,KAbc,CAQhB2E,MARgB;EAAA,UAShBmB,cATgB,GAad9F,KAbc,CAShB8F,cATgB;EAAA,UAUhBG,gBAVgB,GAadjG,KAbc,CAUhBiG,gBAVgB;EAAA,UAWhBG,iBAXgB,GAadpG,KAbc,CAWhBoG,iBAXgB;EAAA,UAYhBG,eAZgB,GAadvG,KAbc,CAYhBuG,eAZgB;;EAelB,UAAIuI,WAAJ;;EACA,UAAG/N,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC,gBAAOD,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;EAHJ;EAKD;;EACD,UAAGO,MAAM,IAAIA,MAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAAlC,EAAwC;EACtC8N,QAAAA,WAAW,GAAG,IAAd;;EACA,gBAAOnK,MAAM,CAACR,IAAd;EACE,eAAKA,IAAI,CAAClD,EAAV;EACE2F,YAAAA,CAAC,GAAGjC,MAAM,CAACP,KAAX;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACE0F,YAAAA,CAAC,IAAIjC,MAAM,CAACP,KAAP,GAAe,IAApB;EACA;EANJ;EAQD,OAjCiB;;;EAmClBgB,MAAAA,CAAC,IAAImB,eAAe,CAACnC,KAArB;EACAZ,MAAAA,IAAI,CAAC4B,CAAL,GAASA,CAAT;EACAC,MAAAA,CAAC,IAAIS,cAAc,CAAC1B,KAApB;EACAZ,MAAAA,IAAI,CAAC6B,CAAL,GAASA,CAAT;EACA5B,MAAAA,CAAC,IAAI8C,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAA9C;EACAwC,MAAAA,CAAC,IAAId,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAA9C;EACA,WAAKnF,OAAL,GAAewE,CAAf;EACA,WAAKvE,QAAL,GAAgB4P,WAAW,GAAGlI,CAAH,GAAO,CAAlC;EACD;;;mCAEYpD,MAAM;EACjB;EACA,WAAKc,aAAL,CAAmBd,IAAnB;EACD;;;qCAEcA,MAAM;EAAA,UACb4B,CADa,GACE5B,IADF,CACb4B,CADa;EAAA,UACVC,CADU,GACE7B,IADF,CACV6B,CADU;EAAA,UACP5B,CADO,GACED,IADF,CACPC,CADO;EAAA,UACJmD,CADI,GACEpD,IADF,CACJoD,CADI;EAEnB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EAHmB,UAIbrF,KAJa,GAIH,IAJG,CAIbA,KAJa;EAAA,UAMjBe,KANiB,GAYff,KAZe,CAMjBe,KANiB;EAAA,UAOjB4D,MAPiB,GAYf3E,KAZe,CAOjB2E,MAPiB;EAAA,UAQjBmB,cARiB,GAYf9F,KAZe,CAQjB8F,cARiB;EAAA,UASjBG,gBATiB,GAYfjG,KAZe,CASjBiG,gBATiB;EAAA,UAUjBG,iBAViB,GAYfpG,KAZe,CAUjBoG,iBAViB;EAAA,UAWjBG,eAXiB,GAYfvG,KAZe,CAWjBuG,eAXiB;;EAcnB,UAAIwI,UAAJ;EACA,UAAID,WAAJ;;EACA,UAAG/N,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC+N,QAAAA,UAAU,GAAG,IAAb;;EACA,gBAAOhO,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;EAHJ;EAKD;;EACD,UAAGO,MAAM,IAAIA,MAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAAlC,EAAwC;EACtC8N,QAAAA,WAAW,GAAG,IAAd;;EACA,gBAAOnK,MAAM,CAACR,IAAd;EACE,eAAKA,IAAI,CAAClD,EAAV;EACE2F,YAAAA,CAAC,GAAGjC,MAAM,CAACP,KAAX;EACA;EAHJ;EAKD,OA/BkB;;;EAiCnBgB,MAAAA,CAAC,IAAImB,eAAe,CAACnC,KAArB;EACAZ,MAAAA,IAAI,CAAC4B,CAAL,GAASA,CAAT;EACAC,MAAAA,CAAC,IAAIS,cAAc,CAAC1B,KAApB;EACAZ,MAAAA,IAAI,CAAC6B,CAAL,GAASA,CAAT;EACA5B,MAAAA,CAAC,IAAI8C,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAA9C;EACAwC,MAAAA,CAAC,IAAId,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAA9C,CAtCmB;;EAwCnB,WAAKnF,OAAL,GAAe8P,UAAU,GAAGtL,CAAH,GAAO2B,CAAC,GAAG5B,IAAI,CAAC4B,CAAzC;EACA,WAAKlG,QAAL,GAAgB4P,WAAW,GAAGlI,CAAH,GAAOvB,CAAC,GAAG7B,IAAI,CAAC6B,CAA3C;EACD;;;iCAEU;EACT,aAAO,CAAP;EACD;;;kCAEW2J,GAAGC,OAAO;EAAA,UACL9H,IADK,GAC4B6H,CAD5B,CACdE,KADc,CACL/H,IADK;EAAA,UACMgI,EADN,GAC4BH,CAD5B,CACG5J,CADH;EAAA,UACagK,EADb,GAC4BJ,CAD5B,CACU3J,CADV;EAAA,UACiBgK,MADjB,GAC4BL,CAD5B,CACiBK,MADjB;EAAA,UAEdC,QAFc,GAEqC,IAFrC,CAEdA,QAFc;EAAA,UAEJtP,KAFI,GAEqC,IAFrC,CAEJA,KAFI;EAAA,UAEGoF,CAFH,GAEqC,IAFrC,CAEGA,CAFH;EAAA,UAEMC,CAFN,GAEqC,IAFrC,CAEMA,CAFN;EAAA,UAESkK,UAFT,GAEqC,IAFrC,CAESA,UAFT;EAAA,UAEqBC,WAFrB,GAEqC,IAFrC,CAEqBA,WAFrB;;EAGpB,UAAGxP,KAAK,CAAC0D,OAAN,KAAkB,MAArB,EAA6B;EAC3B;EACD;;EACD,UAAI+L,EAAJ;;EACA,UAAGH,QAAQ,CAACjE,cAAT,CAAwBlE,IAAxB,CAAH,EAAkC;EAChCsI,QAAAA,EAAE,GAAGH,QAAQ,CAACnI,IAAD,CAAb;EACD;;EACD,UAAG8H,KAAH,EAAU;EACRQ,QAAAA,EAAE,IAAIA,EAAE,CAACT,CAAD,CAAR;EACA;EACD;;EACD,UAAGG,EAAE,IAAI/J,CAAN,IAAWgK,EAAE,IAAI/J,CAAjB,IAAsB8J,EAAE,IAAI/J,CAAC,GAAGmK,UAAhC,IAA8CH,EAAE,IAAI/J,CAAC,GAAGmK,WAA3D,EAAwE;EACtE,aAAI,IAAIlO,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG8N,MAAM,CAAC7N,MAA5B,EAAoCF,CAAC,GAAGC,GAAxC,EAA6CD,CAAC,EAA9C,EAAkD;EAAA,0BAChB+N,MAAM,CAAC/N,CAAD,CADU;EAAA,cACvC8F,EADuC,aAC1ChC,CAD0C;EAAA,cAChCuC,EADgC,aACnCtC,CADmC;EAAA,cAC5B5B,CAD4B,aAC5BA,CAD4B;EAAA,cACtBmD,CADsB,aACzBA,CADyB;;EAEhD,cAAGuI,EAAE,IAAI/H,EAAN,IAAYgI,EAAE,IAAIzH,EAAlB,IAAwBwH,EAAE,IAAI/H,EAAE,GAAG3D,CAAnC,IAAwC2L,EAAE,IAAIzH,EAAE,GAAGf,CAAtD,EAAyD;EACvD;EACD;EACF;;EACD,YAAG,CAACoI,CAAC,CAACU,MAAN,EAAc;EACZV,UAAAA,CAAC,CAACU,MAAF,GAAW,IAAX;EACD;;EACDL,QAAAA,MAAM,CAACnN,IAAP,CAAY;EACVkD,UAAAA,CAAC,EAADA,CADU;EAEVC,UAAAA,CAAC,EAADA,CAFU;EAGV5B,UAAAA,CAAC,EAAE8L,UAHO;EAIV3I,UAAAA,CAAC,EAAE4I;EAJO,SAAZ;EAMAC,QAAAA,EAAE,IAAIA,EAAE,CAACT,CAAD,CAAR;EACD;EACF;;;6BAEM/J,YAAY;EACjB,uEAAaA,UAAb;;EACA,UAAGA,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC1B,aAAKH,YAAL;EAEE0H,UAAAA,IAAI,EAAE,MAFR;EAGEmD,UAAAA,OAAO,EAAE;EAHX;EAKD;EACF;;;0BAEa;EACZ,aAAO,KAAK5H,SAAZ;EACD;;;0BACc;EACb,aAAO,KAAKxD,QAAZ;EACD;;;mCAEmByQ,MAAM;EACxB,UAAG,CAACnB,SAAS,CAACnD,cAAV,CAAyBsE,IAAzB,CAAJ,EAAoC;EAClC,cAAM,IAAIC,KAAJ,kCAAoCD,IAApC,EAAN;EACD;;EACD,aAAOnB,SAAS,CAACmB,IAAD,CAAhB;EACD;;;+BACeA,MAAME,WAAW;EAC/B,UAAGrB,SAAS,CAACnD,cAAV,CAAyBsE,IAAzB,CAAH,EAAmC;EACjC,cAAM,IAAIC,KAAJ,sCAAwCD,IAAxC,EAAN;EACD;;EACDnB,MAAAA,SAAS,CAACmB,IAAD,CAAT,GAAkBE,SAAlB;EACD;;;;IAxNgBvN;;ECEnB,IAAMwN,QAAQ,GAAG;EACf,SAAO,IADQ;EAEf,UAAQ;EAFO,CAAjB;EAIA,IAAMC,MAAM,GAAG;EACb,UAAQ;EADK,CAAf;;MAIMC;;;;;EACJ,eAAYzN,OAAZ,EAAqBC,KAArB,EAA4B+H,QAA5B,EAAsC;EAAA;;EAAA;;EACpC,6EAAMhI,OAAN,EAAeC,KAAf;EACA,UAAKyN,UAAL,GAAkB1F,QAAlB;EACA,UAAK2F,cAAL,GAAsB,EAAtB,CAHoC;;EAIpC,UAAKC,aAAL,GAAqB,EAArB,CAJoC;;EAKpC,UAAKC,YAAL,GAAoB,EAApB,CALoC;;EAMpC,UAAKC,OAAL,GAAe,CAAf,CANoC;;EAAA;EAOrC;EAED;;;;;;;;;;;iCAOWlL,KAAKF,YAAY;EAAA;;EAC1B,UAAIrD,IAAI,GAAG,EAAX;;EACA,WAAK0O,kBAAL,CAAwB,KAAK/F,QAA7B,EAAuC3I,IAAvC,EAA6CuD,GAA7C,EAAkDF,UAAlD;;EACA,WAAI,IAAI3D,CAAC,GAAGM,IAAI,CAACJ,MAAL,GAAc,CAA1B,EAA6BF,CAAC,GAAG,CAAjC,EAAoCA,CAAC,EAArC,EAAyC;EACvC,YAAIG,IAAI,GAAGG,IAAI,CAACN,CAAD,CAAf;;EACA,YAAGG,IAAI,YAAYiL,IAAnB,EAAyB;EACvB,cAAI6D,KAAI,GAAG3O,IAAI,CAACN,CAAC,GAAG,CAAL,CAAf;;EACA,cAAGiP,KAAI,YAAY7D,IAAnB,EAAyB;EACvB6D,YAAAA,KAAI,CAACjG,OAAL,IAAgB7I,IAAI,CAAC6I,OAArB;EACA1I,YAAAA,IAAI,CAACS,MAAL,CAAYf,CAAZ,EAAe,CAAf;EACD,WAHD,MAIK;EACHA,YAAAA,CAAC;EACF;EACF;EACF;;EACD,UAAG,KAAKtB,KAAL,CAAW0D,OAAX,KAAuB,QAAvB,IAAmC,KAAKe,MAAL,CAAYzE,KAAZ,CAAkB0D,OAAlB,KAA8B,MAApE,EAA4E;EAC1E,aAAI,IAAIpC,EAAC,GAAGM,IAAI,CAACJ,MAAL,GAAc,CAA1B,EAA6BF,EAAC,IAAI,CAAlC,EAAqCA,EAAC,EAAtC,EAA0C;EACxC,cAAIG,KAAI,GAAGG,IAAI,CAACN,EAAD,CAAf;;EACA,cAAGG,KAAI,YAAYuO,GAAhB,IAAuBvO,KAAI,CAACzB,KAAL,CAAW0D,OAAX,KAAuB,QAAjD,EAA2D;EACzD,kBAAM,IAAIkM,KAAJ,CAAU,mCAAV,CAAN;EACD;EACF;EACF;;EACD,UAAIW,IAAI,GAAG,IAAX;EACA3O,MAAAA,IAAI,CAACgB,OAAL,CAAa,UAAAnB,IAAI,EAAI;EACnBA,QAAAA,IAAI,CAACpC,KAAL,GAAa8F,GAAb;;EAIA1D,QAAAA,IAAI,CAACnC,QAAL,GAAgB,MAAhB;EACAmC,QAAAA,IAAI,CAACtC,MAAL,GAAcoR,IAAd;;EACA,YAAG9O,IAAI,YAAYiL,IAAhB,IAAwBjL,IAAI,CAACzB,KAAL,CAAWG,QAAX,KAAwB,UAAnD,EAA+D;EAC7D,UAAA,MAAI,CAAC+P,cAAL,CAAoBhO,IAApB,CAAyBT,IAAzB;EACD,SAFD,MAGK;EACH,UAAA,MAAI,CAAC0O,aAAL,CAAmBjO,IAAnB,CAAwBT,IAAxB;EACD;EACF,OAbD;EAcA,WAAKwO,UAAL,GAAkBrO,IAAlB;EACD;;;yCAEkB2I,UAAU3I,MAAMuD,KAAKF,YAAY;EAAA;;EAClD,UAAGvD,KAAK,CAACC,OAAN,CAAc4I,QAAd,CAAH,EAA4B;EAC1BA,QAAAA,QAAQ,CAAC3H,OAAT,CAAiB,UAAAnB,IAAI,EAAI;EACvB,UAAA,MAAI,CAAC6O,kBAAL,CAAwB7O,IAAxB,EAA8BG,IAA9B,EAAoCuD,GAApC,EAAyCF,UAAzC;EACD,SAFD;EAGD,OAJD,MAKK,IAAGsF,QAAQ,YAAYyF,GAAvB,EAA4B;EAC/BpO,QAAAA,IAAI,CAACM,IAAL,CAAUqI,QAAV;;EACAA,QAAAA,QAAQ,CAACiG,UAAT,CAAoBrL,GAApB,EAAyBF,UAAzB;EACD,OAHI;EAAA,WAKA,IAAGsF,QAAQ,YAAYkE,IAAvB,EAA6B;EAChC7M,UAAAA,IAAI,CAACM,IAAL,CAAUqI,QAAV;EACD,SAFI;EAAA,aAIA,IAAG,CAACC,IAAI,CAACT,KAAL,CAAWQ,QAAX,CAAJ,EAA0B;EAC7B,gBAAIkG,IAAI,GAAG,IAAI/D,IAAJ,CAASnC,QAAT,CAAX;EACAkG,YAAAA,IAAI,CAACrC,YAAL,GAAoBnJ,UAApB;EACArD,YAAAA,IAAI,CAACM,IAAL,CAAUuO,IAAV;EACD;EACF;;;;oCAGa;EACZ,UAAIzQ,KAAK,GAAG,KAAKT,OAAjB,CADY;;EAGZ,UAAG,CAACS,KAAK,CAAC0D,OAAP,IAAkB,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,MAA5B,EAAoCyH,OAApC,CAA4CnL,KAAK,CAAC0D,OAAlD,MAA+D,CAAC,CAArF,EAAwF;EACtF,YAAGqM,MAAM,CAAC1E,cAAP,CAAsB,KAAK9I,OAA3B,CAAH,EAAwC;EACtCvC,UAAAA,KAAK,CAAC0D,OAAN,GAAgB,QAAhB;EACD,SAFD,MAGK;EACH1D,UAAAA,KAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD;EACF,OAVW;;;EAYZ,UAAIe,MAAM,GAAG,KAAKA,MAAlB;;EACA,UAAGA,MAAH,EAAW;EACT,YAAIiM,WAAW,GAAGjM,MAAM,CAACzE,KAAzB;EACA,SAAC,UAAD,EAAa,YAAb,EAA2B,WAA3B,EAAwC,YAAxC,EAAsD,WAAtD,EAAmE,OAAnE,EAA4E,WAA5E,EAAyF4C,OAAzF,CAAiG,UAAAZ,CAAC,EAAI;EACpG,cAAG,CAAChC,KAAK,CAACqL,cAAN,CAAqBrJ,CAArB,CAAD,IAA4B0O,WAAW,CAACrF,cAAZ,CAA2BrJ,CAA3B,CAA/B,EAA8D;EAC5DhC,YAAAA,KAAK,CAACgC,CAAD,CAAL,GAAW0O,WAAW,CAAC1O,CAAD,CAAtB;EACD;EACF,SAJD;EAKD,OApBW;;;EAsBZrB,MAAAA,GAAG,CAACyK,SAAJ,CAAcpL,KAAd;EACA,WAAKuK,QAAL,CAAc3H,OAAd,CAAsB,UAAAnB,IAAI,EAAI;EAC5B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EACtBb,UAAAA,IAAI,CAACkP,WAAL;EACD,SAFD,MAGK;EACHlP,UAAAA,IAAI,CAAClC,OAAL,GAAeS,KAAf,CADG;;EAGHyB,UAAAA,IAAI,CAACmP,SAAL;EACD;EACF,OATD;EAUD;;;;qCAGcnN,GAAGiL,OAAO;EAAA,UACjBmC,YADiB,GACkB,IADlB,CACjBA,YADiB;EAAA,UACM9P,KADN,GACkB,IADlB,CACHf,KADG,CACMe,KADN;;EAEvB,UAAGA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAAClD,EAAvB,EAA2B;EACzB,eAAOwC,CAAC,GAAG1C,KAAK,CAACqD,KAAjB;EACD,OAFD,MAGK,IAAGrD,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACjD,OAAvB,EAAgC;EACnC,eAAOuC,CAAC,GAAGiL,KAAK,GAAG3N,KAAK,CAACqD,KAAd,GAAsB,IAAjC;EACD;;EACD,WAAI,IAAI9C,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuP,YAAY,CAACrP,MAAhC,EAAwCF,CAAC,EAAzC,EAA6C;EAC3C;EACA,YAAGmC,CAAC,GAAG,CAAP,EAAU;EACR,iBAAOA,CAAP;EACD;;EACD,YAAIhC,IAAI,GAAGoP,YAAY,CAACvP,CAAD,CAAvB;;EACA,YAAGG,IAAI,YAAYa,GAAnB,EAAwB;EACtBmB,UAAAA,CAAC,IAAIhC,IAAI,CAACqP,cAAL,CAAoBrN,CAApB,EAAuBiL,KAAvB,CAAL;EACD,SAFD,MAGK;EACHjL,UAAAA,CAAC,IAAIhC,IAAI,CAACsM,SAAV;EACD;EACF;;EACD,aAAOtK,CAAP;EACD;;;;gCAGS/D,MAAM;EACd,yEAAgBA,IAAhB;;EACA,WAAKmR,YAAL,CAAkBjO,OAAlB,CAA0B,UAAAnB,IAAI,EAAI;EAChC,YAAGA,IAAH,EAAS;EACPA,UAAAA,IAAI,CAACqD,SAAL,CAAepF,IAAf;EACD;EACF,OAJD;EAKD;;;;gCAGSA,MAAM;EACd,yEAAgBA,IAAhB;;EACA,WAAKmR,YAAL,CAAkBjO,OAAlB,CAA0B,UAAAnB,IAAI,EAAI;EAChC,YAAGA,IAAH,EAAS;EACPA,UAAAA,IAAI,CAACsD,SAAL,CAAerF,IAAf;EACD;EACF,OAJD;EAKD;;;qCAEciP,gBAAgBlL,GAAGmD,GAAGmK,aAAa;EAChD,UAAInC,CAAC,GAAG,CAAR;EACA,UAAIX,GAAG,GAAG,CAAV;EACA,UAAI/B,GAAG,GAAG,CAAV;EAHgD,UAI1C3G,GAJ0C,GAIsB,IAJtB,CAI1CA,GAJ0C;EAAA,UAIrCqC,GAJqC,GAIsB,IAJtB,CAIrCA,GAJqC;EAAA,UAIhCC,GAJgC,GAIsB,IAJtB,CAIhCA,GAJgC;EAAA,UAI3BvC,GAJ2B,GAIsB,IAJtB,CAI3BA,GAJ2B;EAAA,UAItBG,GAJsB,GAIsB,IAJtB,CAItBA,GAJsB;EAAA,UAIjBC,GAJiB,GAIsB,IAJtB,CAIjBA,GAJiB;EAAA,UAIZC,GAJY,GAIsB,IAJtB,CAIZA,GAJY;EAAA,UAIPH,GAJO,GAIsB,IAJtB,CAIPA,GAJO;EAAA,UAIFqL,YAJE,GAIsB,IAJtB,CAIFA,YAJE;EAAA,UAIY7Q,KAJZ,GAIsB,IAJtB,CAIYA,KAJZ;;EAAA,UAO9Ce,KAP8C,GAa5Cf,KAb4C,CAO9Ce,KAP8C;EAAA,UAQ9C4D,MAR8C,GAa5C3E,KAb4C,CAQ9C2E,MAR8C;EAAA,UAS9CmB,cAT8C,GAa5C9F,KAb4C,CAS9C8F,cAT8C;EAAA,UAU9CG,gBAV8C,GAa5CjG,KAb4C,CAU9CiG,gBAV8C;EAAA,UAW9CG,iBAX8C,GAa5CpG,KAb4C,CAW9CoG,iBAX8C;EAAA,UAY9CG,eAZ8C,GAa5CvG,KAb4C,CAY9CuG,eAZ8C;EAchD,UAAIsI,IAAI,GAAGF,cAAc,GAAG5N,KAAH,GAAW4D,MAApC;;EACA,UAAGkK,IAAI,CAAC1K,IAAL,KAAcA,IAAI,CAAClD,EAAtB,EAA0B;EACxB2N,QAAAA,CAAC,GAAG1C,GAAG,GAAG2C,IAAI,CAACzK,KAAf,CADwB;;EAGxB,YAAG2M,WAAH,EAAgB;EACd9C,UAAAA,GAAG,GAAGW,CAAN;EACD;EACF,OArB+C;;;EAuBhDiC,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EAAA,qCACgBb,IAAI,CAACuP,cAAL,CAAoBrC,cAApB,EAAoClL,CAApC,EAAuCmD,CAAvC,EAA0C,IAA1C,CADhB;EAAA,cACbqK,EADa,wBAChBrC,CADgB;EAAA,cACJsC,IADI,wBACTjD,GADS;EAAA,cACOkD,IADP,wBACEjF,GADF;;EAEtB0C,UAAAA,CAAC,GAAG3C,IAAI,CAACC,GAAL,CAAS0C,CAAT,EAAYqC,EAAZ,CAAJ;EACAhD,UAAAA,GAAG,GAAGhC,IAAI,CAACC,GAAL,CAAS+B,GAAT,EAAciD,IAAd,CAAN;EACAhF,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASA,GAAT,EAAciF,IAAd,CAAN;EACD,SALD,MAMK,IAAGxC,cAAH,EAAmB;EACtBV,UAAAA,GAAG,GAAGhC,IAAI,CAACC,GAAL,CAASzK,IAAI,CAAC6L,SAAd,EAAyBW,GAAzB,CAAN;EACA/B,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASzK,IAAI,CAACsM,SAAd,EAAyB7B,GAAzB,CAAN;EACD,SAHI,MAIA;EACHzK,UAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,YAAAA,CAAC,EAAE,CADS;EAEZC,YAAAA,CAAC,EAAE,CAFS;EAGZ5B,YAAAA,CAAC,EAADA,CAHY;EAIZmD,YAAAA,CAAC,EAADA;EAJY,WAAd,EAKG,IALH;;EAMAqH,UAAAA,GAAG,GAAGhC,IAAI,CAACC,GAAL,CAAS+B,GAAT,EAAcxM,IAAI,CAACkD,MAAnB,CAAN;EACAuH,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASA,GAAT,EAAczK,IAAI,CAACkD,MAAnB,CAAN;EACD;EACF,OArBD,EAvBgD;;EA8ChD,UAAGgK,cAAH,EAAmB;EACjB,YAAIlL,EAAC,GAAGwC,gBAAgB,CAAC7B,KAAjB,GAAyBmC,eAAe,CAACnC,KAAzC,GAAiDkB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAA3E;;EACAkJ,QAAAA,CAAC,IAAInL,EAAL;EACAyI,QAAAA,GAAG,IAAIzI,EAAP;EACAwK,QAAAA,GAAG,IAAIxK,EAAP;EACD,OALD,MAMK;EACH,YAAImD,EAAC,GAAGd,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDmB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAA3E;;EACAiJ,QAAAA,CAAC,IAAIhI,EAAL;EACAsF,QAAAA,GAAG,IAAItF,EAAP;EACAqH,QAAAA,GAAG,IAAIrH,EAAP;EACD;;EACD,aAAO;EAAEgI,QAAAA,CAAC,EAADA,CAAF;EAAKX,QAAAA,GAAG,EAAHA,GAAL;EAAU/B,QAAAA,GAAG,EAAHA;EAAV,OAAP;EACD;;;+BAEQyC,gBAAgB;EACvB,UAAIzC,GAAG,GAAG,CAAV;EADuB,UAEjB3G,GAFiB,GAE+C,IAF/C,CAEjBA,GAFiB;EAAA,UAEZqC,GAFY,GAE+C,IAF/C,CAEZA,GAFY;EAAA,UAEPC,GAFO,GAE+C,IAF/C,CAEPA,GAFO;EAAA,UAEFvC,GAFE,GAE+C,IAF/C,CAEFA,GAFE;EAAA,UAEGG,GAFH,GAE+C,IAF/C,CAEGA,GAFH;EAAA,UAEQC,GAFR,GAE+C,IAF/C,CAEQA,GAFR;EAAA,UAEaC,GAFb,GAE+C,IAF/C,CAEaA,GAFb;EAAA,UAEkBH,GAFlB,GAE+C,IAF/C,CAEkBA,GAFlB;EAAA,UAEuBqL,YAFvB,GAE+C,IAF/C,CAEuBA,YAFvB;EAAA,UAEqC7Q,KAFrC,GAE+C,IAF/C,CAEqCA,KAFrC;;EAAA,UAKrBe,KALqB,GAWnBf,KAXmB,CAKrBe,KALqB;EAAA,UAMrB4D,MANqB,GAWnB3E,KAXmB,CAMrB2E,MANqB;EAAA,UAOrBmB,cAPqB,GAWnB9F,KAXmB,CAOrB8F,cAPqB;EAAA,UAQrBG,gBARqB,GAWnBjG,KAXmB,CAQrBiG,gBARqB;EAAA,UASrBG,iBATqB,GAWnBpG,KAXmB,CASrBoG,iBATqB;EAAA,UAUrBG,eAVqB,GAWnBvG,KAXmB,CAUrBuG,eAVqB;EAYvB,UAAIsI,IAAI,GAAGF,cAAc,GAAG5N,KAAH,GAAW4D,MAApC;;EACA,UAAGkK,IAAI,CAAC1K,IAAL,KAAcA,IAAI,CAAClD,EAAtB,EAA0B;EACxBiL,QAAAA,GAAG,GAAG2C,IAAI,CAACzK,KAAX;EACD,OAfsB;;;EAiBvByM,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EACtB,cAAI6O,IAAI,GAAG1P,IAAI,CAAC4P,QAAL,CAAc1C,cAAd,CAAX;;EACAzC,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASA,GAAT,EAAciF,IAAd,CAAN;EACD,SAHD,MAIK,IAAGxC,cAAH,EAAmB;EACtBzC,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASzK,IAAI,CAACsM,SAAd,EAAyB7B,GAAzB,CAAN;EACD,SAFI,MAGA;EACHzK,UAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,YAAAA,CAAC,EAAE,CADS;EAEZC,YAAAA,CAAC,EAAE,CAFS;EAGZ5B,YAAAA,CAAC,EAAE6N,QAHS;EAIZ1K,YAAAA,CAAC,EAAE0K;EAJS,WAAd,EAKG,IALH;;EAMApF,UAAAA,GAAG,GAAGD,IAAI,CAACC,GAAL,CAASA,GAAT,EAAczK,IAAI,CAACkD,MAAnB,CAAN;EACD;EACF,OAjBD,EAjBuB;;EAoCvB,UAAGgK,cAAH,EAAmB;EACjB,YAAIlL,CAAC,GAAGwC,gBAAgB,CAAC7B,KAAjB,GAAyBmC,eAAe,CAACnC,KAAzC,GAAiDkB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAA3E;EACAwG,QAAAA,GAAG,IAAIzI,CAAP;EACD,OAHD,MAIK;EACH,YAAImD,CAAC,GAAGd,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDmB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAA3E;EACAuG,QAAAA,GAAG,IAAItF,CAAP;EACD;;EACD,aAAOsF,GAAP;EACD;;;;oCAGa1I,MAAM;EAAA,UACZ4B,CADY,GACG5B,IADH,CACZ4B,CADY;EAAA,UACTC,CADS,GACG7B,IADH,CACT6B,CADS;EAAA,UACN5B,CADM,GACGD,IADH,CACNC,CADM;EAAA,UACHmD,CADG,GACGpD,IADH,CACHoD,CADG;EAElB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EACA,WAAKpG,OAAL,GAAewE,CAAf;EAJkB,UAKZoN,YALY,GAKgE,IALhE,CAKZA,YALY;EAAA,UAKE7Q,KALF,GAKgE,IALhE,CAKEA,KALF;EAAA,UAKSuR,UALT,GAKgE,IALhE,CAKSA,UALT;EAAA,UAKqBjM,GALrB,GAKgE,IALhE,CAKqBA,GALrB;EAAA,UAK0BC,GAL1B,GAKgE,IALhE,CAK0BA,GAL1B;EAAA,UAK+BqC,GAL/B,GAKgE,IALhE,CAK+BA,GAL/B;EAAA,UAKoCC,GALpC,GAKgE,IALhE,CAKoCA,GALpC;EAAA,UAKyCrC,GALzC,GAKgE,IALhE,CAKyCA,GALzC;EAAA,UAK8CC,GAL9C,GAKgE,IALhE,CAK8CA,GAL9C;EAAA,UAKmDC,GALnD,GAKgE,IALhE,CAKmDA,GALnD;EAAA,UAKwDC,GALxD,GAKgE,IALhE,CAKwDA,GALxD;EAAA,UAOhB5E,KAPgB,GAcdf,KAdc,CAOhBe,KAPgB;EAAA,UAQhB4D,MARgB,GAcd3E,KAdc,CAQhB2E,MARgB;EAAA,UAShBmB,cATgB,GAcd9F,KAdc,CAShB8F,cATgB;EAAA,UAUhBG,gBAVgB,GAcdjG,KAdc,CAUhBiG,gBAVgB;EAAA,UAWhBG,iBAXgB,GAcdpG,KAdc,CAWhBoG,iBAXgB;EAAA,UAYhBG,eAZgB,GAcdvG,KAdc,CAYhBuG,eAZgB;EAAA,UAahB2C,SAbgB,GAcdlJ,KAdc,CAahBkJ,SAbgB;;EAgBlB,UAAI4F,WAAJ;;EACA,UAAG/N,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC,gBAAOD,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACEuC,YAAAA,CAAC,IAAI1C,KAAK,CAACqD,KAAN,GAAc,IAAnB;EACA;EANJ;EAQD;;EACD,UAAGO,MAAM,IAAIA,MAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAAlC,EAAwC;EACtC8N,QAAAA,WAAW,GAAG,IAAd;;EACA,gBAAOnK,MAAM,CAACR,IAAd;EACE,eAAKA,IAAI,CAAClD,EAAV;EACE2F,YAAAA,CAAC,GAAGjC,MAAM,CAACP,KAAX;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACE0F,YAAAA,CAAC,IAAIjC,MAAM,CAACP,KAAP,GAAe,IAApB;EACA;EANJ;EAQD,OArCiB;;;EAuClBgB,MAAAA,CAAC,IAAImB,eAAe,CAACnC,KAAhB,GAAwBkB,GAAxB,GAA8BE,GAAnC;EACAhC,MAAAA,IAAI,CAAC4B,CAAL,GAASA,CAAT;EACAC,MAAAA,CAAC,IAAIS,cAAc,CAAC1B,KAAf,GAAuBmB,GAAvB,GAA6BE,GAAlC;EACAjC,MAAAA,IAAI,CAAC6B,CAAL,GAASA,CAAT;;EACA,UAAGtE,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAvB,EAA6B;EAC3ByC,QAAAA,CAAC,IAAI8C,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAAzC,GAAiDkB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE;EACD;;EACDkB,MAAAA,CAAC,IAAId,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDmB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE,CA9CkB;;EAgDlB,UAAI6L,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAhB;EACAwL,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EACtB,cAAGb,IAAI,CAACzB,KAAL,CAAW0D,OAAX,KAAuB,QAA1B,EAAoC;EAClC;EACA,gBAAG0B,CAAC,KAAK5B,IAAI,CAAC4B,CAAd,EAAiB;EACfoM,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;;EACAA,cAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,gBAAAA,CAAC,EAADA,CADY;EAEZC,gBAAAA,CAAC,EAADA,CAFY;EAGZ5B,gBAAAA,CAAC,EAADA,CAHY;EAIZmD,gBAAAA,CAAC,EAADA;EAJY,eAAd;;EAMAxB,cAAAA,CAAC,IAAI3D,IAAI,CAAC8N,UAAV;EACD,aATD,MAUK;EACH;EACA,kBAAImC,EAAE,GAAGjQ,IAAI,CAACqP,cAAL,CAAoBrN,CAAC,GAAG2B,CAAxB,EAA2B3B,CAA3B,CAAT,CAFG;;;EAIH,kBAAGiO,EAAE,IAAI,CAAT,EAAY;EACVjQ,gBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,kBAAAA,CAAC,EAADA,CADY;EAEZC,kBAAAA,CAAC,EAADA,CAFY;EAGZ5B,kBAAAA,CAAC,EAADA,CAHY;EAIZmD,kBAAAA,CAAC,EAADA;EAJY,iBAAd;EAMD,eAPD;EAAA,mBASK;EACH2K,kBAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,kBAAAA,SAAS,CAAC7I,aAAV;EACAvD,kBAAAA,CAAC,GAAG5B,IAAI,CAAC4B,CAAT;EACAC,kBAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;;EACAlD,kBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,oBAAAA,CAAC,EAAE5B,IAAI,CAAC4B,CADI;EAEZC,oBAAAA,CAAC,EAADA,CAFY;EAGZ5B,oBAAAA,CAAC,EAADA,CAHY;EAIZmD,oBAAAA,CAAC,EAADA;EAJY,mBAAd;;EAMA4K,kBAAAA,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAZ;EACD;;EACDD,cAAAA,CAAC,IAAI3D,IAAI,CAAC8N,UAAV;EACAiC,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;EACD;EACF,WAzCD,MA0CK;EACH;EACA,gBAAG+P,SAAS,CAACG,IAAb,EAAmB;EACjBJ,cAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,cAAAA,SAAS,CAAC7I,aAAV;EACAtD,cAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;EACA6M,cAAAA,SAAS,GAAG,IAAInD,SAAJ,CAAc7K,IAAI,CAAC4B,CAAnB,EAAsBC,CAAtB,CAAZ;EACD;;EACD5D,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAAE5B,IAAI,CAAC4B,CADI;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAADA;EAJY,aAAd;;EAMAxB,YAAAA,CAAC,GAAG5B,IAAI,CAAC4B,CAAT;EACAC,YAAAA,CAAC,IAAI5D,IAAI,CAAC+N,WAAV;EACD;EACF,SA5DD;EAAA,aA8DK;EACH;EACA,gBAAGpK,CAAC,KAAK5B,IAAI,CAAC4B,CAAd,EAAiB;EACfoM,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;;EACAA,cAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,gBAAAA,CAAC,EAADA,CADY;EAEZC,gBAAAA,CAAC,EAADA,CAFY;EAGZ5B,gBAAAA,CAAC,EAADA,CAHY;EAIZmD,gBAAAA,CAAC,EAADA;EAJY,eAAd;;EAMAxB,cAAAA,CAAC,IAAI3D,IAAI,CAACV,KAAV;EACD,aATD,MAUK;EACH;EACA,kBAAI2Q,GAAE,GAAGjQ,IAAI,CAACqP,cAAL,CAAoBrN,CAAC,GAAG2B,CAAxB,EAA2B3B,CAA3B,CAAT,CAFG;;;EAIH,kBAAGiO,GAAE,IAAI,CAAT,EAAY;EACVjQ,gBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,kBAAAA,CAAC,EAADA,CADY;EAEZC,kBAAAA,CAAC,EAADA,CAFY;EAGZ5B,kBAAAA,CAAC,EAADA,CAHY;EAIZmD,kBAAAA,CAAC,EAADA;EAJY,iBAAd;EAMD,eAPD;EAAA,mBASK;EACH2K,kBAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,kBAAAA,SAAS,CAAC7I,aAAV;EACAvD,kBAAAA,CAAC,GAAG5B,IAAI,CAAC4B,CAAT;EACAC,kBAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;;EACAlD,kBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,oBAAAA,CAAC,EAAE5B,IAAI,CAAC4B,CADI;EAEZC,oBAAAA,CAAC,EAADA,CAFY;EAGZ5B,oBAAAA,CAAC,EAADA,CAHY;EAIZmD,oBAAAA,CAAC,EAADA;EAJY,mBAAd;;EAMA4K,kBAAAA,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAZ;EACD;;EACDD,cAAAA,CAAC,IAAI3D,IAAI,CAACV,KAAV;EACAyQ,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;EACD;EACF;EACF,OAzGD,EAjDkB;;EA4JlB,UAAG+P,SAAS,CAACG,IAAb,EAAmB;EACjBJ,QAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,QAAAA,SAAS,CAAC7I,aAAV;EACAtD,QAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;EACD,OAhKiB;;;EAkKlB,UAAG,CAAC,QAAD,EAAW,OAAX,EAAoBwG,OAApB,CAA4BjC,SAA5B,IAAyC,CAAC,CAA7C,EAAgD;EAC9CqI,QAAAA,UAAU,CAAC3O,OAAX,CAAmB,UAAA4O,SAAS,EAAI;EAC9B,cAAI9R,IAAI,GAAG+D,CAAC,GAAG+N,SAAS,CAACzQ,KAAzB;;EACA,cAAGrB,IAAI,GAAG,CAAV,EAAa;EACX8R,YAAAA,SAAS,CAACI,YAAV,CAAuB1I,SAAS,KAAK,QAAd,GAAyBxJ,IAAI,GAAG,GAAhC,GAAsCA,IAA7D;EACD;EACF,SALD;EAMD;;EACD,WAAKT,OAAL,GAAewE,CAAf;EACA,WAAKvE,QAAL,GAAgB4P,WAAW,GAAGlI,CAAH,GAAOvB,CAAC,GAAG7B,IAAI,CAAC6B,CAA3C;EACA,WAAKgL,OAAL,GAAehL,CAAf;EACD;;;;mCAGY7B,MAAM;EAAA,UACX4B,CADW,GACI5B,IADJ,CACX4B,CADW;EAAA,UACRC,CADQ,GACI7B,IADJ,CACR6B,CADQ;EAAA,UACL5B,CADK,GACID,IADJ,CACLC,CADK;EAAA,UACFmD,CADE,GACIpD,IADJ,CACFoD,CADE;EAEjB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EACA,WAAKpG,OAAL,GAAewE,CAAf;EAJiB,UAKXoN,YALW,GAKqD,IALrD,CAKXA,YALW;EAAA,UAKG7Q,KALH,GAKqD,IALrD,CAKGA,KALH;EAAA,UAKUsF,GALV,GAKqD,IALrD,CAKUA,GALV;EAAA,UAKeC,GALf,GAKqD,IALrD,CAKeA,GALf;EAAA,UAKoBqC,GALpB,GAKqD,IALrD,CAKoBA,GALpB;EAAA,UAKyBC,GALzB,GAKqD,IALrD,CAKyBA,GALzB;EAAA,UAK8BrC,GAL9B,GAKqD,IALrD,CAK8BA,GAL9B;EAAA,UAKmCC,GALnC,GAKqD,IALrD,CAKmCA,GALnC;EAAA,UAKwCC,GALxC,GAKqD,IALrD,CAKwCA,GALxC;EAAA,UAK6CC,GAL7C,GAKqD,IALrD,CAK6CA,GAL7C;EAAA,UAOf5E,KAPe,GAgBbf,KAhBa,CAOfe,KAPe;EAAA,UAQf4D,MARe,GAgBb3E,KAhBa,CAQf2E,MARe;EAAA,UASfoE,aATe,GAgBb/I,KAhBa,CASf+I,aATe;EAAA,UAUfjD,cAVe,GAgBb9F,KAhBa,CAUf8F,cAVe;EAAA,UAWfG,gBAXe,GAgBbjG,KAhBa,CAWfiG,gBAXe;EAAA,UAYfG,iBAZe,GAgBbpG,KAhBa,CAYfoG,iBAZe;EAAA,UAafG,eAbe,GAgBbvG,KAhBa,CAafuG,eAbe;EAAA,UAcfyC,cAde,GAgBbhJ,KAhBa,CAcfgJ,cAde;EAAA,UAefC,UAfe,GAgBbjJ,KAhBa,CAefiJ,UAfe;;EAkBjB,UAAI8F,UAAJ;EACA,UAAID,WAAJ;;EACA,UAAG/N,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC+N,QAAAA,UAAU,GAAG,IAAb;;EACA,gBAAOhO,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACEuC,YAAAA,CAAC,IAAI1C,KAAK,CAACqD,KAAN,GAAc,IAAnB;EACA;EANJ;EAQD;;EACD,UAAGO,MAAM,IAAIA,MAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAAlC,EAAwC;EACtC8N,QAAAA,WAAW,GAAG,IAAd;;EACA,gBAAOnK,MAAM,CAACR,IAAd;EACE,eAAKA,IAAI,CAAClD,EAAV;EACE2F,YAAAA,CAAC,GAAGjC,MAAM,CAACP,KAAX;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACE0F,YAAAA,CAAC,IAAIjC,MAAM,CAACP,KAAP,GAAe,IAApB;EACA;EANJ;EAQD,OAzCgB;;;EA2CjBgB,MAAAA,CAAC,IAAImB,eAAe,CAACnC,KAAhB,GAAwBkB,GAAxB,GAA8BE,GAAnC;EACAhC,MAAAA,IAAI,CAAC4B,CAAL,GAASA,CAAT;EACAC,MAAAA,CAAC,IAAIS,cAAc,CAAC1B,KAAf,GAAuBmB,GAAvB,GAA6BE,GAAlC;EACAjC,MAAAA,IAAI,CAAC6B,CAAL,GAASA,CAAT;;EACA,UAAGtE,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAvB,EAA6B;EAC3ByC,QAAAA,CAAC,IAAI8C,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAAzC,GAAiDkB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE;EACD;;EACDkB,MAAAA,CAAC,IAAId,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDmB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE;EACA,UAAIgJ,cAAc,GAAG5F,aAAa,KAAK,KAAvC,CAnDiB;;EAqDjB,UAAG,CAAC4F,cAAD,IAAmB,CAACG,WAAvB,EAAoC;EAClC+B,QAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,cAAGA,IAAI,YAAYa,GAAnB,EAAwB;EAAA,gBACdtC,MADc,GACqCyB,IADrC,CACdzB,KADc;EAAA,8BACqCyB,IADrC,CACPzB,KADO;EAAA,gBACE0D,OADF,eACEA,OADF;EAAA,gBACWqF,cADX,eACWA,aADX;EAAA,gBAC0BhI,MAD1B,eAC0BA,KAD1B;;EAGtB,gBAAG2C,OAAO,KAAK,QAAf,EAAyB;EACvB1D,cAAAA,MAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD,aAFD;EAAA,iBAIK,IAAGA,OAAO,KAAK,MAAZ,IAAsBqF,cAAa,KAAK,KAAxC,IAAiDhI,MAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAxE,EAA8E;EACjFD,gBAAAA,MAAK,CAACqD,KAAN,GAAcX,CAAd;EACA1C,gBAAAA,MAAK,CAACoD,IAAN,GAAaA,IAAI,CAAClD,EAAlB;EACD;;EACDQ,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAADA,CADY;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAADA;EAJY,aAAd;;EAMAvB,YAAAA,CAAC,IAAI5D,IAAI,CAAC+N,WAAV;EACD,WAlBD,MAmBK;EACH/N,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAADA,CADY;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAADA;EAJY,aAAd;;EAMAvB,YAAAA,CAAC,IAAI5D,IAAI,CAAC+N,WAAV;EACD;EACF,SA7BD;EA8BA,aAAKvQ,OAAL,GAAewE,CAAf;EACA,aAAKvE,QAAL,GAAgBmG,CAAC,GAAG7B,IAAI,CAAC6B,CAAzB;EACA;EACD,OAvFgB;;;EAyFjB,UAAIwM,QAAQ,GAAG,EAAf;EACA,UAAIC,UAAU,GAAG,EAAjB;EACA,UAAIC,SAAS,GAAG,EAAhB;EACA,UAAIC,OAAO,GAAG,EAAd;EACA,UAAIC,OAAO,GAAG,CAAd;EACA,UAAIC,SAAS,GAAG,CAAhB;EACA,UAAIC,QAAQ,GAAG,CAAf;EACA,UAAIC,MAAM,GAAG,CAAb;EACAvB,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EAAA,6BACoBb,IAAI,CAACzB,KADzB;EAAA,cAChB4I,QADgB,gBAChBA,QADgB;EAAA,cACNC,UADM,gBACNA,UADM;EAAA,cACMC,SADN,gBACMA,SADN;EAEtB+I,UAAAA,QAAQ,CAAC3P,IAAT,CAAc0G,QAAd;EACAkJ,UAAAA,UAAU,CAAC5P,IAAX,CAAgB2G,UAAhB;EACAoJ,UAAAA,OAAO,IAAIrJ,QAAX;EACAsJ,UAAAA,SAAS,IAAIrJ,UAAb;;EALsB,sCAMApH,IAAI,CAACuP,cAAL,CAAoBrC,cAApB,EAAoClL,CAApC,EAAuCmD,CAAvC,CANA;EAAA,cAMhBgI,CANgB,yBAMhBA,CANgB;EAAA,cAMbX,GANa,yBAMbA,GANa;EAAA,cAMR/B,GANQ,yBAMRA,GANQ;;;EAQtB,cAAGpD,SAAS,CAAC3E,IAAV,KAAmBA,IAAI,CAACnD,IAA3B,EAAiC;EAC/B+Q,YAAAA,SAAS,CAAC7P,IAAV,CAAegK,GAAf;EACAiG,YAAAA,QAAQ,IAAIjG,GAAZ;EACD,WAHD,MAIK,IAAGpD,SAAS,CAAC3E,IAAV,KAAmBA,IAAI,CAAClD,EAA3B,EAA+B;EAClC2N,YAAAA,CAAC,GAAG9F,SAAS,CAAC1E,KAAd;EACA2N,YAAAA,SAAS,CAAC7P,IAAV,CAAe0M,CAAf;EACAuD,YAAAA,QAAQ,IAAIvD,CAAZ;EACD,WAJI,MAKA,IAAG9F,SAAS,CAAC3E,IAAV,KAAmBA,IAAI,CAACjD,OAA3B,EAAoC;EACvC0N,YAAAA,CAAC,GAAG,CAACD,cAAc,GAAGlL,CAAH,GAAOmD,CAAtB,IAA2BkC,SAAS,CAAC1E,KAAzC;EACA2N,YAAAA,SAAS,CAAC7P,IAAV,CAAe0M,CAAf;EACAuD,YAAAA,QAAQ,IAAIvD,CAAZ;EACD;;EACDwD,UAAAA,MAAM,IAAIlG,GAAV;EACA8F,UAAAA,OAAO,CAAC9P,IAAR,CAAa+L,GAAb;EACD,SAxBD,MAyBK;EACH4D,UAAAA,QAAQ,CAAC3P,IAAT,CAAc,CAAd;EACA4P,UAAAA,UAAU,CAAC5P,IAAX,CAAgB,CAAhB;EACAgQ,UAAAA,SAAS,IAAI,CAAb;;EACA,cAAGvD,cAAH,EAAmB;EACjBoD,YAAAA,SAAS,CAAC7P,IAAV,CAAeT,IAAI,CAACsM,SAApB;EACAoE,YAAAA,QAAQ,IAAI1Q,IAAI,CAACsM,SAAjB;EACAqE,YAAAA,MAAM,IAAI3Q,IAAI,CAACsM,SAAf;EACAiE,YAAAA,OAAO,CAAC9P,IAAR,CAAaT,IAAI,CAAC6L,SAAlB;EACD,WALD,MAMK;EACH7L,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAAE,CADS;EAEZC,cAAAA,CAAC,EAAE,CAFS;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAADA;EAJY,aAAd,EAKG,IALH;;EAMAmL,YAAAA,SAAS,CAAC7P,IAAV,CAAeT,IAAI,CAACkD,MAApB;EACAwN,YAAAA,QAAQ,IAAI1Q,IAAI,CAACkD,MAAjB;EACAyN,YAAAA,MAAM,IAAI3Q,IAAI,CAACkD,MAAf;EACAqN,YAAAA,OAAO,CAAC9P,IAAR,CAAaT,IAAI,CAACkD,MAAlB;EACD;EACF;EACF,OAjDD;EAkDA,UAAI0N,QAAQ,GAAG,CAAf,CAnJiB;;EAqJjB,UAAIC,UAAU,GAAGF,MAAM,IAAIzD,cAAc,GAAGlL,CAAH,GAAOmD,CAAzB,CAAvB;EACAiK,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAACnB,IAAD,EAAOH,CAAP,EAAa;EAChC,YAAIuN,IAAJ;EACA,YAAI0D,MAAM,GAAGT,UAAU,CAACxQ,CAAD,CAAvB;EACA,YAAIkR,IAAI,GAAGX,QAAQ,CAACvQ,CAAD,CAAnB,CAHgC;;EAKhC,YAAGgR,UAAH,EAAe;EACb,cAAIG,QAAQ,GAAGN,QAAQ,IAAIxD,cAAc,GAAGlL,CAAH,GAAOmD,CAAzB,CAAvB;EACAiI,UAAAA,IAAI,GAAG0D,MAAM,GAAIR,SAAS,CAACzQ,CAAD,CAAT,GAAemR,QAAQ,GAAGF,MAAX,GAAoBL,SAAvC,GAAoDH,SAAS,CAACzQ,CAAD,CAA1E;EACD,SAHD,MAIK;EACH,cAAIoR,IAAI,GAAG,CAAC/D,cAAc,GAAGlL,CAAH,GAAOmD,CAAtB,IAA2BuL,QAAtC;EACAtD,UAAAA,IAAI,GAAG2D,IAAI,GAAIT,SAAS,CAACzQ,CAAD,CAAT,GAAeoR,IAAI,GAAGF,IAAP,GAAcP,OAAjC,GAA4CF,SAAS,CAACzQ,CAAD,CAAhE;EACD,SAZ+B;;;EAchCuN,QAAAA,IAAI,GAAG5C,IAAI,CAACC,GAAL,CAAS2C,IAAT,EAAemD,OAAO,CAAC1Q,CAAD,CAAtB,CAAP;;EACA,YAAGG,IAAI,YAAYa,GAAnB,EAAwB;EAAA,cACdtC,OADc,GAUjByB,IAViB,CACdzB,KADc;EAAA,cACPsF,IADO,GAUjB7D,IAViB,CACP6D,GADO;EAAA,cACFC,IADE,GAUjB9D,IAViB,CACF8D,GADE;EAAA,cACGqC,IADH,GAUjBnG,IAViB,CACGmG,GADH;EAAA,cACQC,IADR,GAUjBpG,IAViB,CACQoG,GADR;EAAA,cACarC,IADb,GAUjB/D,IAViB,CACa+D,GADb;EAAA,cACkBC,IADlB,GAUjBhE,IAViB,CACkBgE,GADlB;EAAA,cACuBC,IADvB,GAUjBjE,IAViB,CACuBiE,GADvB;EAAA,cAC4BC,IAD5B,GAUjBlE,IAViB,CAC4BkE,GAD5B;EAAA,6BAUjBlE,IAViB,CACiCzB,KADjC;EAAA,cAEpB0D,OAFoB,gBAEpBA,OAFoB;EAAA,cAGpBqF,eAHoB,gBAGpBA,aAHoB;EAAA,cAIpBhI,OAJoB,gBAIpBA,KAJoB;EAAA,cAKpB4D,OALoB,gBAKpBA,MALoB;EAAA,cAMpBmB,eANoB,gBAMpBA,cANoB;EAAA,cAOpBG,iBAPoB,gBAOpBA,gBAPoB;EAAA,cAQpBG,kBARoB,gBAQpBA,iBARoB;EAAA,cASpBG,gBAToB,gBASpBA,eAToB;;EAWtB,cAAGoI,cAAH,EAAmB;EACjB;EACA,gBAAGjL,OAAO,KAAK,QAAf,EAAyB;EACvB1D,cAAAA,OAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD,aAFD;EAAA,iBAIK,IAAGA,OAAO,KAAK,MAAZ,IAAsBqF,eAAa,KAAK,QAAxC,IAAoD+F,WAApD,IAAmEnK,OAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAA3F,EAAiG;EACpG2D,gBAAAA,OAAM,CAACP,KAAP,GAAewC,CAAf;EACAjC,gBAAAA,OAAM,CAACR,IAAP,GAAcA,IAAI,CAAClD,EAAnB;EACD;;EACDQ,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAADA,CADY;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAAEoL,IAHS;EAIZjI,cAAAA,CAAC,EAADA;EAJY,aAAd;EAMD,WAhBD,MAiBK;EACH;EACA,gBAAGlD,OAAO,KAAK,QAAf,EAAyB;EACvB1D,cAAAA,OAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD,aAFD;EAAA,iBAIK,IAAGA,OAAO,KAAK,MAAZ,IAAsBqF,eAAa,KAAK,KAAxC,IAAiDhI,OAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAxE,EAA8E;EACjFD,gBAAAA,OAAK,CAACqD,KAAN,GAAcX,CAAd;EACA1C,gBAAAA,OAAK,CAACoD,IAAN,GAAaA,IAAI,CAAClD,EAAlB;EACD;;EACDQ,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAADA,CADY;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAAEiI;EAJS,aAAd;EAMD,WA5CqB;;;EA8CtB,cAAGyD,UAAU,IAAIC,MAAjB,EAAyB;EACvB,gBAAG5D,cAAH,EAAmB;EACjBlN,cAAAA,IAAI,CAACxC,OAAL,GAAe4P,IAAI,GAAGvJ,IAAP,GAAasC,IAAb,GAAmBpC,IAAnB,GAAyBE,IAAzB,GAA+Ba,gBAAe,CAACnC,KAA/C,GAAuD6B,iBAAgB,CAAC7B,KAAvF;EACD,aAFD,MAGK;EACH3C,cAAAA,IAAI,CAACvC,QAAL,GAAgB2P,IAAI,GAAGtJ,IAAP,GAAasC,IAAb,GAAmBpC,IAAnB,GAAyBE,IAAzB,GAA+BG,eAAc,CAAC1B,KAA9C,GAAsDgC,kBAAiB,CAAChC,KAAxF;EACD;EACF,WAPD,MAQK,IAAG,CAACkO,UAAD,IAAeE,IAAlB,EAAwB;EAC3B,gBAAG7D,cAAH,EAAmB;EACjBlN,cAAAA,IAAI,CAACxC,OAAL,GAAe4P,IAAI,GAAGvJ,IAAP,GAAasC,IAAb,GAAmBpC,IAAnB,GAAyBE,IAAzB,GAA+Ba,gBAAe,CAACnC,KAA/C,GAAuD6B,iBAAgB,CAAC7B,KAAvF;EACD,aAFD,MAGK;EACH3C,cAAAA,IAAI,CAACvC,QAAL,GAAgB2P,IAAI,GAAGtJ,IAAP,GAAasC,IAAb,GAAmBpC,IAAnB,GAAyBE,IAAzB,GAA+BG,eAAc,CAAC1B,KAA9C,GAAsDgC,kBAAiB,CAAChC,KAAxF;EACD;EACF;EACF,SA9DD,MA+DK;EACH3C,UAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,YAAAA,CAAC,EAADA,CADY;EAEZC,YAAAA,CAAC,EAADA,CAFY;EAGZ5B,YAAAA,CAAC,EAAEkL,cAAc,GAAGE,IAAH,GAAUpL,CAHf;EAIZmD,YAAAA,CAAC,EAAE+H,cAAc,GAAG/H,CAAH,GAAOiI;EAJZ,WAAd;EAMD;;EACD,YAAGF,cAAH,EAAmB;EACjBvJ,UAAAA,CAAC,IAAI3D,IAAI,CAAC8N,UAAV;EACA8C,UAAAA,QAAQ,GAAGpG,IAAI,CAACC,GAAL,CAASmG,QAAT,EAAmB5Q,IAAI,CAAC+N,WAAxB,CAAX;EACD,SAHD,MAIK;EACHnK,UAAAA,CAAC,IAAI5D,IAAI,CAAC+N,WAAV;EACA6C,UAAAA,QAAQ,GAAGpG,IAAI,CAACC,GAAL,CAASmG,QAAT,EAAmB5Q,IAAI,CAAC8N,UAAxB,CAAX;EACD;EACF,OA9FD,EAtJiB;;EAsPjB,UAAI7P,IAAI,GAAGiP,cAAc,GAAGlL,CAAC,GAAG2B,CAAJ,GAAQ5B,IAAI,CAAC4B,CAAhB,GAAoBwB,CAAC,GAAGvB,CAAJ,GAAQ7B,IAAI,CAAC6B,CAA1D,CAtPiB;;EAwPjB,UAAG,CAACiN,UAAD,IAAeL,OAAO,KAAK,CAA3B,IAAgCvS,IAAI,GAAG,CAA1C,EAA6C;EAC3C,YAAI6B,GAAG,GAAGsP,YAAY,CAACrP,MAAvB;;EACA,YAAGwH,cAAc,KAAK,UAAtB,EAAkC;EAChC,eAAI,IAAI1H,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGC,GAAnB,EAAwBD,CAAC,EAAzB,EAA6B;EAC3B,gBAAIqR,KAAK,GAAG9B,YAAY,CAACvP,CAAD,CAAxB;EACAqN,YAAAA,cAAc,GAAGgE,KAAK,CAAC7N,SAAN,CAAgBpF,IAAhB,CAAH,GAA2BiT,KAAK,CAAC5N,SAAN,CAAgBrF,IAAhB,CAAzC;EACD;EACF,SALD,MAMK,IAAGsJ,cAAc,KAAK,QAAtB,EAAgC;EACnC,cAAI4J,MAAM,GAAGlT,IAAI,GAAG,GAApB;;EACA,eAAI,IAAI4B,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGC,GAAnB,EAAwBD,GAAC,EAAzB,EAA6B;EAC3B,gBAAIqR,MAAK,GAAG9B,YAAY,CAACvP,GAAD,CAAxB;EACAqN,YAAAA,cAAc,GAAGgE,MAAK,CAAC7N,SAAN,CAAgB8N,MAAhB,CAAH,GAA6BD,MAAK,CAAC5N,SAAN,CAAgB6N,MAAhB,CAA3C;EACD;EACF,SANI,MAOA,IAAG5J,cAAc,KAAK,eAAtB,EAAuC;EAC1C,cAAI6J,OAAO,GAAGnT,IAAI,IAAI6B,GAAG,GAAG,CAAV,CAAlB;;EACA,eAAI,IAAID,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGC,GAAnB,EAAwBD,GAAC,EAAzB,EAA6B;EAC3B,gBAAIqR,OAAK,GAAG9B,YAAY,CAACvP,GAAD,CAAxB;EACAqN,YAAAA,cAAc,GAAGgE,OAAK,CAAC7N,SAAN,CAAgB+N,OAAO,GAAGvR,GAA1B,CAAH,GAAkCqR,OAAK,CAAC5N,SAAN,CAAgB8N,OAAO,GAAGvR,GAA1B,CAAhD;EACD;EACF,SANI,MAOA,IAAG0H,cAAc,KAAK,cAAtB,EAAsC;EACzC,cAAI8J,MAAM,GAAGpT,IAAI,IAAI6B,GAAG,GAAG,CAAV,CAAjB;;EACA,eAAI,IAAID,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGC,GAAnB,EAAwBD,GAAC,EAAzB,EAA6B;EAC3B,gBAAIqR,OAAK,GAAG9B,YAAY,CAACvP,GAAD,CAAxB;EACAqN,YAAAA,cAAc,GAAGgE,OAAK,CAAC7N,SAAN,CAAgBgO,MAAM,IAAIxR,GAAC,GAAG,CAAR,CAAtB,CAAH,GAAuCqR,OAAK,CAAC5N,SAAN,CAAgB+N,MAAM,IAAIxR,GAAC,GAAG,CAAR,CAAtB,CAArD;EACD;EACF;EACF,OArRgB;;;EAuRjB,UAAGqN,cAAH,EAAmB;EACjB;EACA,YAAGG,WAAH,EAAgB;EACduD,UAAAA,QAAQ,GAAGzL,CAAX;EACD;;EACDvB,QAAAA,CAAC,IAAIgN,QAAL;EACD,OAND,MAOK;EACH,YAAGtD,UAAH,EAAe;EACbsD,UAAAA,QAAQ,GAAG5O,CAAX;EACD;EACF,OAlSgB;;;EAoSjB,UAAGwF,UAAU,KAAK,SAAlB,EAA6B;EAC3B;EACA4H,QAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAAA,cACrBzB,KADqB,GAC6ByB,IAD7B,CACrBzB,KADqB;EAAA,cACdsF,GADc,GAC6B7D,IAD7B,CACd6D,GADc;EAAA,cACTC,GADS,GAC6B9D,IAD7B,CACT8D,GADS;EAAA,cACJqC,GADI,GAC6BnG,IAD7B,CACJmG,GADI;EAAA,cACCC,GADD,GAC6BpG,IAD7B,CACCoG,GADD;EAAA,cACMpC,GADN,GAC6BhE,IAD7B,CACMgE,GADN;EAAA,cACWC,GADX,GAC6BjE,IAD7B,CACWiE,GADX;EAAA,cACgBF,GADhB,GAC6B/D,IAD7B,CACgB+D,GADhB;EAAA,cACqBG,GADrB,GAC6BlE,IAD7B,CACqBkE,GADrB;;EAE3B,cAAGgJ,cAAH,EAAmB;EACjB,gBAAG3O,KAAK,CAAC2E,MAAN,CAAaR,IAAb,KAAsBA,IAAI,CAACnD,IAA9B,EAAoC;EAClCS,cAAAA,IAAI,CAACvC,QAAL,GAAgBmT,QAAQ,GAAG9M,GAAX,GAAiBsC,GAAjB,GAAuBpC,GAAvB,GAA6BE,GAA7B,GACZ3F,KAAK,CAAC8F,cAAN,CAAqB1B,KADT,GAEZpE,KAAK,CAACoG,iBAAN,CAAwBhC,KAF5B;EAGD;EACF,WAND,MAOK;EACH,gBAAGpE,KAAK,CAACe,KAAN,CAAYoD,IAAZ,KAAqBA,IAAI,CAACnD,IAA7B,EAAmC;EACjCS,cAAAA,IAAI,CAACxC,OAAL,GAAeoT,QAAQ,GAAG/M,GAAX,GAAiBsC,GAAjB,GAAuBpC,GAAvB,GAA6BE,GAA7B,GACXO,gBAAgB,CAAC7B,KADN,GAEXmC,eAAe,CAACnC,KAFpB;EAGD;EACF;EACF,SAhBD;EAiBD,OAnBD,MAoBK,IAAG6E,UAAU,KAAK,QAAlB,EAA4B;EAC/B4H,QAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,cAAI/B,IAAI,GAAG2S,QAAQ,GAAG5Q,IAAI,CAAC+N,WAA3B;;EACA,cAAG9P,IAAI,GAAG,CAAV,EAAa;EACX+B,YAAAA,IAAI,CAACsD,SAAL,CAAerF,IAAI,GAAG,GAAtB;EACD;EACF,SALD;EAMD,OAPI,MAQA,IAAGuJ,UAAU,KAAK,UAAlB,EAA8B;EACjC4H,QAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,cAAI/B,IAAI,GAAG2S,QAAQ,GAAG5Q,IAAI,CAAC+N,WAA3B;;EACA,cAAG9P,IAAI,GAAG,CAAV,EAAa;EACX+B,YAAAA,IAAI,CAACsD,SAAL,CAAerF,IAAf;EACD;EACF,SALD;EAMD;;EACD,WAAKT,OAAL,GAAewE,CAAf;EACA,WAAKvE,QAAL,GAAgB4P,WAAW,GAAGlI,CAAH,GAAOvB,CAAC,GAAG7B,IAAI,CAAC6B,CAA3C;EACA,WAAKgL,OAAL,GAAehL,CAAf;EACD;;;;qCAGc7B,MAAM;EAAA;;EAAA,UACb4B,CADa,GACE5B,IADF,CACb4B,CADa;EAAA,UACVC,CADU,GACE7B,IADF,CACV6B,CADU;EAAA,UACP5B,CADO,GACED,IADF,CACPC,CADO;EAAA,UACJmD,CADI,GACEpD,IADF,CACJoD,CADI;EAEnB,WAAK7H,GAAL,GAAWqG,CAAX;EACA,WAAKpG,GAAL,GAAWqG,CAAX;EACA,UAAImI,IAAI,GAAGpI,CAAX;EAJmB,UAKbyL,YALa,GAK+D,IAL/D,CAKbA,YALa;EAAA,UAKC7Q,KALD,GAK+D,IAL/D,CAKCA,KALD;EAAA,UAKQuR,UALR,GAK+D,IAL/D,CAKQA,UALR;EAAA,UAKoBjM,GALpB,GAK+D,IAL/D,CAKoBA,GALpB;EAAA,UAKyBC,GALzB,GAK+D,IAL/D,CAKyBA,GALzB;EAAA,UAK8BqC,GAL9B,GAK+D,IAL/D,CAK8BA,GAL9B;EAAA,UAKmCC,GALnC,GAK+D,IAL/D,CAKmCA,GALnC;EAAA,UAKwCrC,GALxC,GAK+D,IAL/D,CAKwCA,GALxC;EAAA,UAK6CC,GAL7C,GAK+D,IAL/D,CAK6CA,GAL7C;EAAA,UAKkDC,GALlD,GAK+D,IAL/D,CAKkDA,GALlD;EAAA,UAKuDC,GALvD,GAK+D,IAL/D,CAKuDA,GALvD;EAAA,UAOjB5E,KAPiB,GAcff,KAde,CAOjBe,KAPiB;EAAA,UAQjB4D,MARiB,GAcf3E,KAde,CAQjB2E,MARiB;EAAA,UASjBmB,cATiB,GAcf9F,KAde,CASjB8F,cATiB;EAAA,UAUjBG,gBAViB,GAcfjG,KAde,CAUjBiG,gBAViB;EAAA,UAWjBG,iBAXiB,GAcfpG,KAde,CAWjBoG,iBAXiB;EAAA,UAYjBG,eAZiB,GAcfvG,KAde,CAYjBuG,eAZiB;EAAA,UAajB2C,SAbiB,GAcflJ,KAde,CAajBkJ,SAbiB;;EAgBnB,UAAI6F,UAAJ;EACA,UAAID,WAAJ;;EACA,UAAG/N,KAAK,IAAIA,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAhC,EAAsC;EACpC+N,QAAAA,UAAU,GAAG,IAAb;;EACA,gBAAOhO,KAAK,CAACoD,IAAb;EACE,eAAKA,IAAI,CAAClD,EAAV;EACEwC,YAAAA,CAAC,GAAG1C,KAAK,CAACqD,KAAV;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACEuC,YAAAA,CAAC,IAAI1C,KAAK,CAACqD,KAAN,GAAc,IAAnB;EACA;EANJ;EAQD;;EACD,UAAGO,MAAM,IAAIA,MAAM,CAACR,IAAP,KAAgBA,IAAI,CAACnD,IAAlC,EAAwC;EACtC8N,QAAAA,WAAW,GAAG,IAAd;;EACA,gBAAOnK,MAAM,CAACR,IAAd;EACE,eAAKA,IAAI,CAAClD,EAAV;EACE2F,YAAAA,CAAC,GAAGjC,MAAM,CAACP,KAAX;EACA;;EACF,eAAKD,IAAI,CAACjD,OAAV;EACE0F,YAAAA,CAAC,IAAIjC,MAAM,CAACP,KAAP,GAAe,IAApB;EACA;EANJ;EAQD,OAvCkB;;;EAyCnBgB,MAAAA,CAAC,IAAImB,eAAe,CAACnC,KAAhB,GAAwBkB,GAAxB,GAA8BE,GAAnC;EACAhC,MAAAA,IAAI,CAAC4B,CAAL,GAASA,CAAT;EACAC,MAAAA,CAAC,IAAIS,cAAc,CAAC1B,KAAf,GAAuBmB,GAAvB,GAA6BE,GAAlC;EACAjC,MAAAA,IAAI,CAAC6B,CAAL,GAASA,CAAT;;EACA,UAAGtE,KAAK,CAACoD,IAAN,KAAeA,IAAI,CAACnD,IAAvB,EAA6B;EAC3ByC,QAAAA,CAAC,IAAI8C,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAAzC,GAAiDkB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE;EACD;;EACDkB,MAAAA,CAAC,IAAId,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDmB,GAAjD,GAAuDsC,GAAvD,GAA6DpC,GAA7D,GAAmEE,GAAxE,CAhDmB;;EAkDnB,UAAI6L,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAhB;EACAwL,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYa,GAAnB,EAAwB;EACtB;EACA,cAAGb,IAAI,CAACzB,KAAL,CAAWG,QAAX,KAAwB,UAA3B,EAAuC;EACrC,YAAA,MAAI,CAAC4S,WAAL,CAAiB7Q,IAAjB,CAAsBT,IAAtB;;EACA;EACD;;EACDA,UAAAA,IAAI,CAACzB,KAAL,CAAW0D,OAAX,GAAqB,QAArB,CANsB;;EAQtB,cAAG0B,CAAC,KAAK5B,IAAI,CAAC4B,CAAd,EAAiB;EACfoM,YAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;;EACAA,YAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,cAAAA,CAAC,EAADA,CADY;EAEZC,cAAAA,CAAC,EAADA,CAFY;EAGZ5B,cAAAA,CAAC,EAADA,CAHY;EAIZmD,cAAAA,CAAC,EAADA;EAJY,aAAd;;EAMAxB,YAAAA,CAAC,IAAI3D,IAAI,CAAC8N,UAAV;EACA/B,YAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAf,CAAP;EACD,WAVD,MAWK;EACH;EACA,gBAAIsM,EAAE,GAAGjQ,IAAI,CAACqP,cAAL,CAAoBrN,CAAC,GAAG2B,CAAxB,EAA2B3B,CAA3B,CAAT,CAFG;;;EAIH,gBAAGiO,EAAE,IAAI,CAAT,EAAY;EACVjQ,cAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,gBAAAA,CAAC,EAADA,CADY;EAEZC,gBAAAA,CAAC,EAADA,CAFY;EAGZ5B,gBAAAA,CAAC,EAADA,CAHY;EAIZmD,gBAAAA,CAAC,EAADA;EAJY,eAAd;EAMD,aAPD;EAAA,iBASK;EACH2K,gBAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,gBAAAA,SAAS,CAAC7I,aAAV;EACAvD,gBAAAA,CAAC,GAAG5B,IAAI,CAAC4B,CAAT;EACAC,gBAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;;EACAlD,gBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,kBAAAA,CAAC,EAAE5B,IAAI,CAAC4B,CADI;EAEZC,kBAAAA,CAAC,EAADA,CAFY;EAGZ5B,kBAAAA,CAAC,EAADA,CAHY;EAIZmD,kBAAAA,CAAC,EAADA;EAJY,iBAAd;;EAMA4K,gBAAAA,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAZ;EACD;;EACDD,YAAAA,CAAC,IAAI3D,IAAI,CAAC8N,UAAV;EACA/B,YAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAf,CAAP;EACAoM,YAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;EACD;EACF,SAjDD;EAAA,aAmDK;EACH,gBAAG2D,CAAC,KAAK5B,IAAI,CAAC4B,CAAd,EAAiB;EACfoM,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;;EACAA,cAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,gBAAAA,CAAC,EAADA,CADY;EAEZC,gBAAAA,CAAC,EAADA,CAFY;EAGZ5B,gBAAAA,CAAC,EAADA,CAHY;EAIZmD,gBAAAA,CAAC,EAADA;EAJY,eAAd;;EAMAxB,cAAAA,CAAC,IAAI3D,IAAI,CAACV,KAAV;EACAyM,cAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAf,CAAP;EACD,aAVD,MAWK;EACH;EACA,kBAAIsM,IAAE,GAAGjQ,IAAI,CAACqP,cAAL,CAAoBrN,CAAC,GAAG2B,CAAxB,EAA2B3B,CAA3B,CAAT,CAFG;;;EAIH,kBAAGiO,IAAE,IAAI,CAAT,EAAY;EACVjQ,gBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,kBAAAA,CAAC,EAADA,CADY;EAEZC,kBAAAA,CAAC,EAADA,CAFY;EAGZ5B,kBAAAA,CAAC,EAADA,CAHY;EAIZmD,kBAAAA,CAAC,EAADA;EAJY,iBAAd;EAMD,eAPD;EAAA,mBASK;EACH2K,kBAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,kBAAAA,SAAS,CAAC7I,aAAV;EACAvD,kBAAAA,CAAC,GAAG5B,IAAI,CAAC4B,CAAT;EACAC,kBAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;;EACAlD,kBAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,oBAAAA,CAAC,EAAE5B,IAAI,CAAC4B,CADI;EAEZC,oBAAAA,CAAC,EAADA,CAFY;EAGZ5B,oBAAAA,CAAC,EAADA,CAHY;EAIZmD,oBAAAA,CAAC,EAADA;EAJY,mBAAd;;EAMA4K,kBAAAA,SAAS,GAAG,IAAInD,SAAJ,CAAcjJ,CAAd,EAAiBC,CAAjB,CAAZ;EACD;;EACDD,cAAAA,CAAC,IAAI3D,IAAI,CAACV,KAAV;EACAyM,cAAAA,IAAI,GAAGvB,IAAI,CAACC,GAAL,CAASsB,IAAT,EAAepI,CAAf,CAAP;EACAoM,cAAAA,SAAS,CAACC,GAAV,CAAchQ,IAAd;EACD;EACF;EACF,OA/FD,EAnDmB;;EAoJnB,UAAG+P,SAAS,CAACG,IAAb,EAAmB;EACjBJ,QAAAA,UAAU,CAACrP,IAAX,CAAgBsP,SAAhB;EACAA,QAAAA,SAAS,CAAC7I,aAAV;EACAtD,QAAAA,CAAC,IAAImM,SAAS,CAAC7M,MAAf;EACD,OAxJkB;;;EA0JnB,UAAG,CAAC,QAAD,EAAW,OAAX,EAAoBwG,OAApB,CAA4BjC,SAA5B,IAAyC,CAAC,CAA7C,EAAgD;EAC9CqI,QAAAA,UAAU,CAAC3O,OAAX,CAAmB,UAAA4O,SAAS,EAAI;EAC9B,cAAI9R,IAAI,GAAG+D,CAAC,GAAG+N,SAAS,CAACzQ,KAAzB;;EACA,cAAGrB,IAAI,GAAG,CAAV,EAAa;EACX8R,YAAAA,SAAS,CAACI,YAAV,CAAuB1I,SAAS,KAAK,QAAd,GAAyBxJ,IAAI,GAAG,GAAhC,GAAsCA,IAA7D;EACD;EACF,SALD;EAMD,OAjKkB;;;EAmKnB,WAAKT,OAAL,GAAe8P,UAAU,GAAGtL,CAAH,GAAO+J,IAAI,GAAGhK,IAAI,CAAC4B,CAA5C;EACA,WAAKlG,QAAL,GAAgB4P,WAAW,GAAGlI,CAAH,GAAOvB,CAAC,GAAG7B,IAAI,CAAC6B,CAA3C;EACA,WAAKgL,OAAL,GAAehL,CAAf;EACD;;;;kCAGW2N,WAAW;EAAA,UACf5N,CADe,GACsF,IADtF,CACfA,CADe;EAAA,UACZC,CADY,GACsF,IADtF,CACZA,CADY;EAAA,UACT4N,KADS,GACsF,IADtF,CACTA,KADS;EAAA,UACFlS,KADE,GACsF,IADtF,CACFA,KADE;EAAA,UACK4D,MADL,GACsF,IADtF,CACKA,MADL;EAAA,UACa4F,QADb,GACsF,IADtF,CACaA,QADb;EAAA,UACuBwI,WADvB,GACsF,IADtF,CACuBA,WADvB;EAAA,UACoC/S,KADpC,GACsF,IADtF,CACoCA,KADpC;EAAA,UAC2CsF,GAD3C,GACsF,IADtF,CAC2CA,GAD3C;EAAA,UACgDC,GADhD,GACsF,IADtF,CACgDA,GADhD;EAAA,UACqDqC,GADrD,GACsF,IADtF,CACqDA,GADrD;EAAA,UAC0DC,GAD1D,GACsF,IADtF,CAC0DA,GAD1D;EAAA,UAC+DrC,GAD/D,GACsF,IADtF,CAC+DA,GAD/D;EAAA,UACoEC,GADpE,GACsF,IADtF,CACoEA,GADpE;EAAA,UACyEC,GADzE,GACsF,IADtF,CACyEA,GADzE;EAAA,UAC8EC,GAD9E,GACsF,IADtF,CAC8EA,GAD9E;EAAA,UAGnBG,cAHmB,GAKjB9F,KALiB,CAGnB8F,cAHmB;EAAA,UAInBS,eAJmB,GAKjBvG,KALiB,CAInBuG,eAJmB;EAMrB,UAAI2M,EAAE,GAAGnS,KAAK,GAAGyE,GAAR,GAAcE,GAAvB;EACA,UAAIyN,EAAE,GAAGxO,MAAM,GAAGc,GAAT,GAAeE,GAAxB,CAPqB;;EASrB4E,MAAAA,QAAQ,CAAC3H,OAAT,CAAiB,UAAAnB,IAAI,EAAI;EACvB,YAAGA,IAAI,YAAYuO,GAAnB,EAAwB;EACtBvO,UAAAA,IAAI,CAAC2R,WAAL,CAAiB,CAAC,UAAD,EAAa,UAAb,EAAyBjI,OAAzB,CAAiC1J,IAAI,CAACzB,KAAL,CAAWG,QAA5C,IAAwD,CAAC,CAAzD,GAA6DsB,IAA7D,GAAoEuR,SAArF;EACD;EACF,OAJD,EATqB;;EAerBD,MAAAA,WAAW,CAACnQ,OAAZ,CAAoB,UAAAnB,IAAI,EAAI;EAAA,YACpB8D,GADoB,GAGpB9D,IAHoB,CACpB8D,GADoB;EAAA,YACfD,GADe,GAGpB7D,IAHoB,CACf6D,GADe;EAAA,YACVtF,KADU,GAGpByB,IAHoB,CACVzB,KADU;EAAA,2BAGpByB,IAHoB,CACHzB,KADG;EAAA,YAExBI,IAFwB,gBAExBA,IAFwB;EAAA,YAElBC,GAFkB,gBAElBA,GAFkB;EAAA,YAEbuE,KAFa,gBAEbA,KAFa;EAAA,YAENC,MAFM,gBAENA,MAFM;EAAA,YAESwO,MAFT,gBAEEtS,KAFF;EAAA,YAEyBuS,OAFzB,gBAEiB3O,MAFjB;EAI1B,YAAIyC,EAAJ,EAAQO,EAAR,EAAYjD,EAAZ,EAAgB6O,EAAhB,CAJ0B;;EAM1B,YAAGnT,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAACnD,IAAnB,IAA2B4D,KAAK,CAACT,IAAN,KAAeA,IAAI,CAACnD,IAAlD,EAAwD;EACtDoG,UAAAA,EAAE,GAAGhH,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAAClD,EAAnB,GAAwBmE,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkChE,IAAI,CAACgE,KAA/D,GAAuEgB,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkCrD,KAAK,GAAGX,IAAI,CAACgE,KAAb,GAAqB,IAAnI;EACAM,UAAAA,EAAE,GAAGE,KAAK,CAACT,IAAN,KAAeA,IAAI,CAAClD,EAApB,GAAyBmE,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCtO,KAAK,CAACR,KAA7C,GAAqDgD,EAA9E,GAAmFhC,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCnS,KAAK,GAAG6D,KAAK,CAACR,KAAd,GAAsB,IAA7D,GAAoEgD,EAA5J;EACD,SAHD,MAIK,IAAGhH,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAACnD,IAAnB,IAA2BqS,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAACnD,IAAnD,EAAyD;EAC5DoG,UAAAA,EAAE,GAAGhH,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAAClD,EAAnB,GAAwBmE,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkChE,IAAI,CAACgE,KAA/D,GAAuEgB,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkCrD,KAAK,GAAGX,IAAI,CAACgE,KAAb,GAAqB,IAAnI;EACAM,UAAAA,EAAE,GAAG2O,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoS,MAAM,CAACjP,KAAjC,GAAyCrD,KAA9C;EACD,SAHI,MAIA,IAAG6D,KAAK,CAACT,IAAN,KAAeA,IAAI,CAACnD,IAApB,IAA4BqS,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAACnD,IAApD,EAA0D;EAC7D0D,UAAAA,EAAE,GAAG2O,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoS,MAAM,CAACjP,KAAjC,GAAyCrD,KAA9C;EACA,cAAIyS,OAAO,GAAGH,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoS,MAAM,CAACjP,KAAjC,GAAyCrD,KAAK,GAAGsS,MAAM,CAACjP,KAAf,GAAuB,IAA9E;EACAgD,UAAAA,EAAE,GAAGxC,KAAK,CAACT,IAAN,KAAeA,IAAI,CAAClD,EAApB,GAAyBmE,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCtO,KAAK,CAACR,KAA7C,GAAqDoP,OAA9E,GAAwFpO,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCnS,KAAK,GAAG6D,KAAK,CAACR,KAAd,GAAsB,IAA7D,GAAoEoP,OAAjK;EACD,SAJI,MAKA,IAAGpT,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAACnD,IAAtB,EAA4B;EAC/BoG,UAAAA,EAAE,GAAGhH,IAAI,CAAC+D,IAAL,KAAcA,IAAI,CAAClD,EAAnB,GAAwBmE,CAAC,GAAGhF,IAAI,CAACgE,KAAjC,GAAyCgB,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkCrD,KAAK,GAAGX,IAAI,CAACgE,KAAb,GAAqB,IAArG;EACAM,UAAAA,EAAE,GAAGjD,IAAI,CAAC4P,QAAL,CAAc,IAAd,CAAL;EACD,SAHI,MAIA,IAAGzM,KAAK,CAACT,IAAN,KAAeA,IAAI,CAACnD,IAAvB,EAA6B;EAChC0D,UAAAA,EAAE,GAAGjD,IAAI,CAAC4P,QAAL,CAAc,IAAd,CAAL;EACAjK,UAAAA,EAAE,GAAGxC,KAAK,CAACT,IAAN,KAAeA,IAAI,CAAClD,EAApB,GAAyBmE,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCtO,KAAK,CAACR,KAA7C,GAAqDM,EAA9E,GAAmFU,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA1B,GAAkC8O,EAAlC,GAAuCnS,KAAK,GAAG6D,KAAK,CAACR,KAAd,GAAsB,IAA7D,GAAoEM,EAA5J;EACD,SAHI,MAIA,IAAG2O,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAACnD,IAAxB,EAA8B;EACjCoG,UAAAA,EAAE,GAAGhC,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA/B;EACAM,UAAAA,EAAE,GAAG2O,MAAM,CAAClP,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoS,MAAM,CAACjP,KAAjC,GAAyCrD,KAA9C;EACD,SAHI,MAIA;EACHqG,UAAAA,EAAE,GAAGhC,CAAC,GAAGE,GAAJ,GAAUiB,eAAe,CAACnC,KAA/B;EACAM,UAAAA,EAAE,GAAGjD,IAAI,CAAC4P,QAAL,CAAc,IAAd,CAAL;EACD,SAlCyB;;;EAoC1B,YAAGhR,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAACnD,IAAlB,IAA0B6D,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAACnD,IAAlD,EAAwD;EACtD2G,UAAAA,EAAE,GAAGtH,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAAClD,EAAlB,GAAuBoE,CAAC,GAAGhF,GAAG,CAAC+D,KAA/B,GAAuCiB,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiCO,MAAM,GAAGtE,GAAG,CAAC+D,KAAb,GAAqB,IAAlG;EACAmP,UAAAA,EAAE,GAAG1O,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoE,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCtO,MAAM,CAACT,KAA7C,GAAqDuD,EAA/E,GAAoFtC,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCxO,MAAM,GAAGE,MAAM,CAACT,KAAhB,GAAwB,IAA9D,GAAqEuD,EAA9J;EACA3H,UAAAA,KAAK,CAAC2E,MAAN,GAAe;EACbP,YAAAA,KAAK,EAAEmP,EADM;EAEbpP,YAAAA,IAAI,EAAEA,IAAI,CAAClD;EAFE,WAAf;EAID,SAPD,MAQK,IAAGZ,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAACnD,IAAlB,IAA0BsS,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAACnD,IAAnD,EAAyD;EAC5D2G,UAAAA,EAAE,GAAGtH,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAAClD,EAAlB,GAAuBoE,CAAC,GAAGhF,GAAG,CAAC+D,KAA/B,GAAuCiB,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiCO,MAAM,GAAGtE,GAAG,CAAC+D,KAAb,GAAqB,IAAlG;EACAmP,UAAAA,EAAE,GAAGD,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAAClD,EAAtB,GAA2BqS,OAAO,CAAClP,KAAnC,GAA2CO,MAAhD;EACD,SAHI,MAIA,IAAGE,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAACnD,IAArB,IAA6BsS,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAACnD,IAAtD,EAA4D;EAC/DuS,UAAAA,EAAE,GAAGD,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAAClD,EAAtB,GAA2BqS,OAAO,CAAClP,KAAnC,GAA2CO,MAAhD;EACA,cAAI8O,QAAQ,GAAGH,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAAClD,EAAtB,GAA2BqS,OAAO,CAAClP,KAAnC,GAA2CO,MAAM,GAAG2O,OAAO,CAAClP,KAAjB,GAAyB,IAAnF;EACAuD,UAAAA,EAAE,GAAG9C,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoE,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCtO,MAAM,CAACT,KAA7C,GAAqDqP,QAA/E,GAA0FpO,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCxO,MAAM,GAAGE,MAAM,CAACT,KAAhB,GAAwB,IAA9D,GAAqEqP,QAApK;EACD,SAJI,MAKA,IAAGpT,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAACnD,IAArB,EAA2B;EAC9B2G,UAAAA,EAAE,GAAGtH,GAAG,CAAC8D,IAAJ,KAAaA,IAAI,CAAClD,EAAlB,GAAuBoE,CAAC,GAAGhF,GAAG,CAAC+D,KAA/B,GAAuCiB,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiCO,MAAM,GAAGtE,GAAG,CAAC+D,KAAb,GAAqB,IAAlG;EACAmP,UAAAA,EAAE,GAAG9R,IAAI,CAAC4P,QAAL,EAAL;EACD,SAHI,MAIA,IAAGxM,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAACnD,IAAxB,EAA8B;EACjCuS,UAAAA,EAAE,GAAG9R,IAAI,CAAC4P,QAAL,EAAL;EACA1J,UAAAA,EAAE,GAAG9C,MAAM,CAACV,IAAP,KAAgBA,IAAI,CAAClD,EAArB,GAA0BoE,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCtO,MAAM,CAACT,KAA7C,GAAqDmP,EAA/E,GAAoFlO,CAAC,GAAGE,GAAJ,GAAUO,cAAc,CAAC1B,KAAzB,GAAiC+O,EAAjC,GAAsCxO,MAAM,GAAGE,MAAM,CAACT,KAAhB,GAAwB,IAA9D,GAAqEmP,EAA9J;EACD,SAHI,MAIA,IAAGD,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAACnD,IAAzB,EAA+B;EAClC2G,UAAAA,EAAE,GAAGsL,KAAK,GAAG1N,GAAR,GAAcO,cAAc,CAAC1B,KAAlC;EACAmP,UAAAA,EAAE,GAAGD,OAAO,CAACnP,IAAR,KAAiBA,IAAI,CAAClD,EAAtB,GAA2BqS,OAAO,CAAClP,KAAnC,GAA2CO,MAAhD;EACD,SAHI,MAIA;EACHgD,UAAAA,EAAE,GAAGsL,KAAK,GAAG1N,GAAR,GAAcO,cAAc,CAAC1B,KAAlC;EACAmP,UAAAA,EAAE,GAAG9R,IAAI,CAAC4P,QAAL,EAAL;EACD,SApEyB;;;EAsE1B,YAAGrR,KAAK,CAAC0D,OAAN,KAAkB,QAArB,EAA+B;EAC7B1D,UAAAA,KAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD;;EACDjC,QAAAA,IAAI,CAAC2P,QAAL,CAAc;EACZhM,UAAAA,CAAC,EAAEgC,EADS;EAEZ/B,UAAAA,CAAC,EAAEsC,EAFS;EAGZlE,UAAAA,CAAC,EAAEiB,EAHS;EAIZkC,UAAAA,CAAC,EAAE2M;EAJS,SAAd;EAMD,OA/ED;EAgFD;;;kCAEWvE,GAAGC,OAAO;EAAA,UACL9H,IADK,GAC4B6H,CAD5B,CACdE,KADc,CACL/H,IADK;EAAA,UACMgI,EADN,GAC4BH,CAD5B,CACG5J,CADH;EAAA,UACagK,EADb,GAC4BJ,CAD5B,CACU3J,CADV;EAAA,UACiBgK,MADjB,GAC4BL,CAD5B,CACiBK,MADjB;EAAA,UAEdC,QAFc,GAE+C,IAF/C,CAEdA,QAFc;EAAA,UAEJ/E,QAFI,GAE+C,IAF/C,CAEJA,QAFI;EAAA,UAEMvK,KAFN,GAE+C,IAF/C,CAEMA,KAFN;EAAA,UAEaoF,CAFb,GAE+C,IAF/C,CAEaA,CAFb;EAAA,UAEgBC,CAFhB,GAE+C,IAF/C,CAEgBA,CAFhB;EAAA,UAEmBkK,UAFnB,GAE+C,IAF/C,CAEmBA,UAFnB;EAAA,UAE+BC,WAF/B,GAE+C,IAF/C,CAE+BA,WAF/B;;EAGpB,UAAGxP,KAAK,CAAC0D,OAAN,KAAkB,MAArB,EAA6B;EAC3B;EACD;;EACD,UAAI+L,EAAJ;;EACA,UAAGH,QAAQ,CAACjE,cAAT,CAAwBlE,IAAxB,CAAH,EAAkC;EAChCsI,QAAAA,EAAE,GAAGH,QAAQ,CAACnI,IAAD,CAAb;EACD;;EACD,UAAIuM,YAAJ,CAVoB;;EAYpB,WAAI,IAAIpS,CAAC,GAAGiJ,QAAQ,CAAC/I,MAAT,GAAkB,CAA9B,EAAiCF,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA8C;EAC5C,YAAIqR,KAAK,GAAGpI,QAAQ,CAACjJ,CAAD,CAApB;;EACA,YAAGqR,KAAK,YAAYrQ,GAAjB,IAAwB,CAAC,UAAD,EAAa,UAAb,EAAyB6I,OAAzB,CAAiCwH,KAAK,CAAC3S,KAAN,CAAYG,QAA7C,IAAyD,CAAC,CAArF,EAAwF;EACtF,cAAGwS,KAAK,CAACgB,WAAN,CAAkB3E,CAAlB,EAAqBC,KAArB,CAAH,EAAgC;EAC9ByE,YAAAA,YAAY,GAAG,IAAf;EACD;EACF;EACF,OAnBmB;;;EAqBpB,WAAI,IAAIpS,GAAC,GAAGiJ,QAAQ,CAAC/I,MAAT,GAAkB,CAA9B,EAAiCF,GAAC,IAAI,CAAtC,EAAyCA,GAAC,EAA1C,EAA8C;EAC5C,YAAIqR,OAAK,GAAGpI,QAAQ,CAACjJ,GAAD,CAApB;;EACA,YAAGqR,OAAK,YAAYrQ,GAAjB,IAAwB,CAAC,UAAD,EAAa,UAAb,EAAyB6I,OAAzB,CAAiCwH,OAAK,CAAC3S,KAAN,CAAYG,QAA7C,MAA2D,CAAC,CAAvF,EAA0F;EACxF,cAAGwS,OAAK,CAACgB,WAAN,CAAkB3E,CAAlB,EAAqBC,KAArB,CAAH,EAAgC;EAC9ByE,YAAAA,YAAY,GAAG,IAAf;EACD;EACF;EACF;;EACD,UAAGzE,KAAH,EAAU;EACRQ,QAAAA,EAAE,IAAIA,EAAE,CAACT,CAAD,CAAR;EACA;EACD,OAhCmB;;;EAkCpB,UAAG0E,YAAH,EAAiB;EACfrE,QAAAA,MAAM,CAACnN,IAAP,CAAY;EACVkD,UAAAA,CAAC,EAADA,CADU;EAEVC,UAAAA,CAAC,EAADA,CAFU;EAGV5B,UAAAA,CAAC,EAAE8L,UAHO;EAIV3I,UAAAA,CAAC,EAAE4I;EAJO,SAAZ;EAMAC,QAAAA,EAAE,IAAIA,EAAE,CAACT,CAAD,CAAR;EACD,OARD;EAAA,WAUK,IAAGG,EAAE,IAAI/J,CAAN,IAAWgK,EAAE,IAAI/J,CAAjB,IAAsB8J,EAAE,IAAI/J,CAAC,GAAGmK,UAAhC,IAA8CH,EAAE,IAAI/J,CAAC,GAAGmK,WAA3D,EAAwE;EAC3E,eAAI,IAAIlO,GAAC,GAAG,CAAR,EAAWC,GAAG,GAAG8N,MAAM,CAAC7N,MAA5B,EAAoCF,GAAC,GAAGC,GAAxC,EAA6CD,GAAC,EAA9C,EAAkD;EAAA,6BAChB+N,MAAM,CAAC/N,GAAD,CADU;EAAA,gBACvC8F,EADuC,cAC1ChC,CAD0C;EAAA,gBAChCuC,EADgC,cACnCtC,CADmC;EAAA,gBAC5B5B,CAD4B,cAC5BA,CAD4B;EAAA,gBACtBmD,CADsB,cACzBA,CADyB;;EAEhD,gBAAGuI,EAAE,IAAI/H,EAAN,IAAYgI,EAAE,IAAIzH,EAAlB,IAAwBwH,EAAE,IAAI/H,EAAE,GAAG3D,CAAnC,IAAwC2L,EAAE,IAAIzH,EAAE,GAAGf,CAAtD,EAAyD;EACvD;EACD;EACF;;EACD,cAAG,CAACoI,CAAC,CAACU,MAAN,EAAc;EACZV,YAAAA,CAAC,CAACU,MAAF,GAAW,IAAX;EACD;;EACDL,UAAAA,MAAM,CAACnN,IAAP,CAAY;EACVkD,YAAAA,CAAC,EAADA,CADU;EAEVC,YAAAA,CAAC,EAADA,CAFU;EAGV5B,YAAAA,CAAC,EAAE8L,UAHO;EAIV3I,YAAAA,CAAC,EAAE4I;EAJO,WAAZ;EAMAC,UAAAA,EAAE,IAAIA,EAAE,CAACT,CAAD,CAAR;EACD;EACF;;;6BAEM/J,YAAY;EACjB,sEAAaA,UAAb;;EADiB,UAEFvB,OAFE,GAEoC,IAFpC,CAEX1D,KAFW,CAEF0D,OAFE;EAAA,UAESmN,YAFT,GAEoC,IAFpC,CAESA,YAFT;EAAA,UAEuBtG,QAFvB,GAEoC,IAFpC,CAEuBA,QAFvB;;EAGjB,UAAG7G,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD,OALgB;;;EAOjBmN,MAAAA,YAAY,CAACjO,OAAb,CAAqB,UAAAnB,IAAI,EAAI;EAC3B,YAAGA,IAAI,YAAYiL,IAAhB,IAAwBjL,IAAI,CAACzB,KAAL,CAAWG,QAAX,KAAwB,QAAnD,EAA6D;EAC3DsB,UAAAA,IAAI,CAACoM,MAAL,CAAY5I,UAAZ;EACD;EACF,OAJD,EAPiB;;EAajBsF,MAAAA,QAAQ,CAAC3H,OAAT,CAAiB,UAAAnB,IAAI,EAAI;EACvB,YAAIA,IAAI,YAAYa,GAAjB,IAAyB,CAAC,UAAD,EAAa,UAAb,EAAyB6I,OAAzB,CAAiC1J,IAAI,CAACzB,KAAL,CAAWG,QAA5C,IAAwD,CAAC,CAArF,EAAwF;EACtFsB,UAAAA,IAAI,CAACoM,MAAL,CAAY5I,UAAZ;EACD;EACF,OAJD;;EAKA,UAAGA,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC1B,aAAKH,YAAL;EAEE0H,UAAAA,IAAI,EAAE,KAFR;EAGEoD,UAAAA,QAAQ,EAAE,KAAKA,QAAL,CAAcuD,GAAd,CAAkB,UAAArM,IAAI;EAAA,mBAAIA,IAAI,CAACmE,UAAT;EAAA,WAAtB;EAHZ;EAKD;EACF;;;0BAEa;EACZ,aAAO,KAAKlD,SAAZ;EACD;;;0BACc;EACb,aAAO,KAAKuN,UAAZ;EACD;;;0BACkB;EACjB,aAAO,KAAKC,cAAZ;EACD;;;0BACiB;EAChB,aAAO,KAAKC,aAAZ;EACD;;;0BACgB;EACf,aAAO,KAAKC,YAAZ;EACD;;;0BACc;EACb,UAAI7O,GAAG,GAAG,KAAKgQ,UAAL,CAAgB/P,MAA1B;;EACA,UAAGD,GAAH,EAAQ;EACN,YAAI2M,IAAI,GAAG,KAAKqD,UAAL,CAAgBhQ,GAAG,GAAG,CAAtB,CAAX;EACA,eAAO2M,IAAI,CAAC7I,CAAL,GAAS,KAAKA,CAAd,GAAkB6I,IAAI,CAACC,QAA9B;EACD;;EACD,aAAO,KAAK9I,CAAZ;EACD;;;0BACW;EACV,aAAO,KAAKgL,OAAZ;EACD;;;8BAEctQ,GAAG;EAChB,aAAO+P,QAAQ,CAACzE,cAAT,CAAwBtL,CAAxB,CAAP;EACD;;;;IA/oCeuC;;ECflB,SAAS5C,IAAT,CAAckU,IAAd,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;EAC5B,MAAGD,GAAG,CAAC1M,IAAJ,KAAa,KAAhB,EAAuB;EACrB,QAAG2M,GAAG,CAAC3M,IAAJ,KAAa,KAAhB,EAAuB;EACrB4M,MAAAA,OAAO,CAACH,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAP;EACD,KAFD,MAGK,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B6M,MAAAA,WAAW,CAACJ,IAAD,EAAOE,GAAP,CAAX;EACD,KAFI,MAGA,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B8M,MAAAA,OAAO,CAACL,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAP;EACD;EACF,GAVD,MAWK,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B,QAAG2M,GAAG,CAAC3M,IAAJ,KAAa,KAAhB,EAAuB;EACrB6M,MAAAA,WAAW,CAACJ,IAAD,EAAOE,GAAP,CAAX;EACD,KAFD,MAGK,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B+M,MAAAA,OAAO,CAACN,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAP;EACD,KAFI,MAGA,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B6M,MAAAA,WAAW,CAACJ,IAAD,EAAOE,GAAP,CAAX;EACD;EACF,GAVI,MAWA,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B,QAAG2M,GAAG,CAAC3M,IAAJ,KAAa,KAAhB,EAAuB;EACrBgN,MAAAA,OAAO,CAACP,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAP;EACD,KAFD,MAGK,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3B6M,MAAAA,WAAW,CAACJ,IAAD,EAAOE,GAAP,CAAX;EACD,KAFI,MAGA,IAAGA,GAAG,CAAC3M,IAAJ,KAAa,MAAhB,EAAwB;EAC3BiN,MAAAA,OAAO,CAACR,IAAD,EAAOC,GAAP,EAAYC,GAAZ,CAAP;EACD;EACF;EACF;;EAED,SAASC,OAAT,CAAiBH,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EAC/BO,EAAAA,MAAM,CAACT,IAAI,CAACU,UAAN,EAAkBT,GAAG,CAAC3O,EAAtB,EAA0B4O,GAAG,CAAC5O,EAA9B,CAAN;EACA,MAAIqP,EAAE,GAAGV,GAAG,CAACtJ,QAAJ,CAAa/I,MAAtB;EACA,MAAIgT,EAAE,GAAGV,GAAG,CAACvJ,QAAJ,CAAa/I,MAAtB;EACA,MAAIF,CAAC,GAAG,CAAR;EACA,MAAImT,SAAS,GAAGb,IAAI,CAACa,SAArB;EACA,MAAIC,GAAG,GAAGD,SAAS,CAACE,UAApB;;EACA,SAAMrT,CAAC,GAAG2K,IAAI,CAACgC,GAAL,CAASsG,EAAT,EAAaC,EAAb,CAAV,EAA4BlT,CAAC,EAA7B,EAAiC;EAC/B5B,IAAAA,IAAI,CAACgV,GAAG,CAACpT,CAAD,CAAJ,EAASuS,GAAG,CAACtJ,QAAJ,CAAajJ,CAAb,CAAT,EAA0BwS,GAAG,CAACvJ,QAAJ,CAAajJ,CAAb,CAA1B,CAAJ;EACD;;EACD,MAAGA,CAAC,GAAGiT,EAAP,EAAW;EACT,WAAMjT,CAAC,GAAGiT,EAAV,EAAcjT,CAAC,EAAf,EAAmB;EACjBsT,MAAAA,QAAQ,CAACH,SAAD,EAAYC,GAAZ,EAAiBpT,CAAjB,CAAR;EACD;EACF,GAJD,MAKK,IAAGA,CAAC,GAAGkT,EAAP,EAAW;EACd,WAAMlT,CAAC,GAAGkT,EAAV,EAAclT,CAAC,EAAf,EAAmB;EACjBuT,MAAAA,QAAQ,CAACJ,SAAD,EAAYC,GAAZ,EAAiBpT,CAAjB,EAAoBwS,GAAG,CAACvJ,QAAJ,CAAajJ,CAAb,CAApB,CAAR;EACD;EACF;EACF;;EAED,SAAS2S,OAAT,CAAiBL,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EAC/BO,EAAAA,MAAM,CAACT,IAAI,CAACU,UAAN,EAAkBT,GAAG,CAAC3O,EAAtB,EAA0B4O,GAAG,CAAC5O,EAA9B,CAAN;EACA8O,EAAAA,WAAW,CAACJ,IAAI,CAACa,SAAN,EAAiBX,GAAG,CAACxJ,OAArB,CAAX;EACD;;EAED,SAAS4J,OAAT,CAAiBN,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EAC/B,MAAIS,EAAE,GAAGV,GAAG,CAACtJ,QAAJ,CAAa/I,MAAtB;EACA,MAAIgT,EAAE,GAAGV,GAAG,CAACvJ,QAAJ,CAAa/I,MAAtB;EACA,MAAIF,CAAC,GAAG,CAAR;;EACA,SAAMA,CAAC,GAAG2K,IAAI,CAACgC,GAAL,CAASsG,EAAT,EAAaC,EAAb,CAAV,EAA4BlT,CAAC,EAA7B,EAAiC;EAC/BwT,IAAAA,QAAQ,CAAClB,IAAD,EAAOtS,CAAP,EAAUuS,GAAG,CAACtJ,QAAJ,CAAajJ,CAAb,CAAV,EAA2BwS,GAAG,CAACvJ,QAAJ,CAAajJ,CAAb,CAA3B,EAA4C,IAA5C,CAAR;EACD;;EACD,MAAIoT,GAAG,GAAGd,IAAI,CAACe,UAAf;;EACA,MAAGrT,CAAC,GAAGiT,EAAP,EAAW;EACT,WAAMjT,CAAC,GAAGiT,EAAV,EAAcjT,CAAC,EAAf,EAAmB;EACjBsT,MAAAA,QAAQ,CAAChB,IAAD,EAAOc,GAAP,EAAYpT,CAAZ,CAAR;EACD;EACF,GAJD,MAKK,IAAGA,CAAC,GAAGkT,EAAP,EAAW;EACd,WAAMlT,CAAC,GAAGkT,EAAV,EAAclT,CAAC,EAAf,EAAmB;EACjBuT,MAAAA,QAAQ,CAACjB,IAAD,EAAOc,GAAP,EAAYpT,CAAZ,EAAewS,GAAG,CAACvJ,QAAJ,CAAajJ,CAAb,CAAf,CAAR;EACD;EACF;EACF;;EAED,SAAS6S,OAAT,CAAiBP,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EAC/BO,EAAAA,MAAM,CAACT,IAAI,CAACU,UAAN,EAAkBT,GAAG,CAAC3O,EAAtB,EAA0B4O,GAAG,CAAC5O,EAA9B,CAAN;EACA8O,EAAAA,WAAW,CAACJ,IAAI,CAACa,SAAN,EAAiBX,GAAG,CAACvJ,QAArB,CAAX;EACD;;EAED,SAAS6J,OAAT,CAAiBR,IAAjB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;EAC/BO,EAAAA,MAAM,CAACT,IAAI,CAACU,UAAN,EAAkBT,GAAG,CAAC3O,EAAtB,EAA0B4O,GAAG,CAAC5O,EAA9B,CAAN;EACA,MAAIqP,EAAE,GAAGV,GAAG,CAACvJ,OAAJ,CAAY9I,MAArB;EACA,MAAIgT,EAAE,GAAGV,GAAG,CAACxJ,OAAJ,CAAY9I,MAArB;EACA,MAAIF,CAAC,GAAG,CAAR;EACA,MAAImT,SAAS,GAAGb,IAAI,CAACa,SAArB;EACA,MAAIC,GAAG,GAAGD,SAAS,CAACE,UAApB;;EACA,SAAMrT,CAAC,GAAG2K,IAAI,CAACgC,GAAL,CAASsG,EAAT,EAAaC,EAAb,CAAV,EAA4BlT,CAAC,EAA7B,EAAiC;EAC/BwT,IAAAA,QAAQ,CAACL,SAAD,EAAYnT,CAAZ,EAAeuS,GAAG,CAACvJ,OAAJ,CAAYhJ,CAAZ,CAAf,EAA+BwS,GAAG,CAACxJ,OAAJ,CAAYhJ,CAAZ,CAA/B,CAAR;EACD;;EACD,MAAGA,CAAC,GAAGiT,EAAP,EAAW;EACT,WAAMjT,CAAC,GAAGiT,EAAV,EAAcjT,CAAC,EAAf,EAAmB;EACjBsT,MAAAA,QAAQ,CAACH,SAAD,EAAYC,GAAZ,EAAiBpT,CAAjB,CAAR;EACD;EACF,GAJD,MAKK,IAAGA,CAAC,GAAGkT,EAAP,EAAW;EACd,WAAMlT,CAAC,GAAGkT,EAAV,EAAclT,CAAC,EAAf,EAAmB;EACjBuT,MAAAA,QAAQ,CAACJ,SAAD,EAAYC,GAAZ,EAAiBpT,CAAjB,EAAoBwS,GAAG,CAACxJ,OAAJ,CAAYhJ,CAAZ,CAApB,CAAR;EACD;EACF;EACF;;EAED,SAAS+S,MAAT,CAAgBT,IAAhB,EAAsBmB,GAAtB,EAA2BC,GAA3B,EAAgC;EAC9B,MAAIT,EAAE,GAAGQ,GAAG,CAACvT,MAAb;EACA,MAAIgT,EAAE,GAAGQ,GAAG,CAACxT,MAAb;EACA,MAAIF,CAAC,GAAG,CAAR;;EACA,SAAMA,CAAC,GAAG2K,IAAI,CAACgC,GAAL,CAASsG,EAAT,EAAaC,EAAb,CAAV,EAA4BlT,CAAC,EAA7B,EAAiC;EAC/BwT,IAAAA,QAAQ,CAAClB,IAAD,EAAOtS,CAAP,EAAUyT,GAAG,CAACzT,CAAD,CAAb,EAAkB0T,GAAG,CAAC1T,CAAD,CAArB,CAAR;EACD;;EACD,MAAIoT,GAAG,GAAGd,IAAI,CAACe,UAAf;;EACA,MAAGrT,CAAC,GAAGiT,EAAP,EAAW;EACT,WAAMjT,CAAC,GAAGiT,EAAV,EAAcjT,CAAC,EAAf,EAAmB;EACjBsT,MAAAA,QAAQ,CAAChB,IAAD,EAAOc,GAAP,EAAYpT,CAAZ,CAAR;EACD;EACF,GAJD,MAKK,IAAGA,CAAC,GAAGkT,EAAP,EAAW;EACd,WAAMlT,CAAC,GAAGkT,EAAV,EAAclT,CAAC,EAAf,EAAmB;EACjBuT,MAAAA,QAAQ,CAACjB,IAAD,EAAOc,GAAP,EAAYpT,CAAZ,EAAe0T,GAAG,CAAC1T,CAAD,CAAlB,CAAR;EACD;EACF;EACF;;EAED,SAASwT,QAAT,CAAkBlB,IAAlB,EAAwBtS,CAAxB,EAA2BuS,GAA3B,EAAgCC,GAAhC,EAAqCmB,MAArC,EAA6C;EAC3C,MAAIP,GAAG,GAAGd,IAAI,CAACe,UAAf;;EACA,MAAGd,GAAG,CAACtR,OAAJ,KAAgBuR,GAAG,CAACvR,OAAvB,EAAgC;EAC9ByR,IAAAA,WAAW,CAACU,GAAG,CAACpT,CAAD,CAAJ,EAASwS,GAAT,CAAX;EACD,GAFD,MAGK;EACH,QAAIoB,EAAE,GAAG,EAAT;;EACA,SAAI,IAAInT,CAAC,GAAG,CAAR,EAAWR,GAAG,GAAGsS,GAAG,CAACrR,KAAJ,CAAUhB,MAA/B,EAAuCO,CAAC,GAAGR,GAA3C,EAAgDQ,CAAC,EAAjD,EAAqD;EACnD,UAAIkI,IAAI,GAAG4J,GAAG,CAACrR,KAAJ,CAAUT,CAAV,CAAX;;EADmD,iCAEtCkI,IAFsC;EAAA,UAE9CjI,EAF8C;EAAA,UAE3CsH,CAF2C;;EAGnD4L,MAAAA,EAAE,CAAClT,EAAD,CAAF,GAAQsH,CAAR;EACD;;EACD,SAAI,IAAIvH,EAAC,GAAG,CAAR,EAAWR,IAAG,GAAGuS,GAAG,CAACtR,KAAJ,CAAUhB,MAA/B,EAAuCO,EAAC,GAAGR,IAA3C,EAAgDQ,EAAC,EAAjD,EAAqD;EACnD,UAAIkI,MAAI,GAAG6J,GAAG,CAACtR,KAAJ,CAAUT,EAAV,CAAX;;EADmD,kCAEtCkI,MAFsC;EAAA,UAE9CjI,GAF8C;EAAA,UAE3CsH,CAF2C;;;EAInD,UAAG4L,EAAE,CAAC7J,cAAH,CAAkBrJ,GAAlB,CAAH,EAAyB;EACvB,YAAGkT,EAAE,CAAClT,GAAD,CAAF,KAAUsH,CAAb,EAAgB;EACdoL,UAAAA,GAAG,CAACpT,CAAD,CAAH,CAAO6T,YAAP,CAAoBnT,GAApB,EAAuBsH,CAAvB;EACD;;EACD,eAAO4L,EAAE,CAAClT,GAAD,CAAT;EACD,OALD,MAMK;EACH0S,QAAAA,GAAG,CAACpT,CAAD,CAAH,CAAO6T,YAAP,CAAoBnT,GAApB,EAAuBsH,CAAvB;EACD;EACF,KApBE;;;EAsBH,SAAI,IAAItH,CAAR,IAAakT,EAAb,EAAiB;EACf,UAAGA,EAAE,CAAC7J,cAAH,CAAkBrJ,CAAlB,CAAH,EAAyB;EACvB0S,QAAAA,GAAG,CAACpT,CAAD,CAAH,CAAO8T,eAAP,CAAuBpT,CAAvB;EACD;EACF;;EACD,QAAGiT,MAAM,IAAIpB,GAAG,CAACvJ,OAAJ,KAAgBwJ,GAAG,CAACxJ,OAAjC,EAA0C;EACxCoK,MAAAA,GAAG,CAACpT,CAAD,CAAH,CAAO+T,WAAP,GAAqBvB,GAAG,CAACxJ,OAAzB;EACD;EACF;EACF;;EAED,SAAS0J,WAAT,CAAqBJ,IAArB,EAA2BvJ,EAA3B,EAA+B;EAC7B,MAAIR,GAAJ;;EACA,MAAGnI,KAAK,CAACC,OAAN,CAAc0I,EAAd,CAAH,EAAsB;EACpBR,IAAAA,GAAG,GAAG,EAAN;EACAQ,IAAAA,EAAE,CAACzH,OAAH,CAAW,UAAAnB,IAAI,EAAI;EACjBoI,MAAAA,GAAG,IAAIW,IAAI,CAACJ,cAAL,CAAoB3I,IAApB,CAAP;EACD,KAFD;EAGD,GALD,MAMK;EACHoI,IAAAA,GAAG,GAAGW,IAAI,CAACJ,cAAL,CAAoBC,EAApB,CAAN;EACD;;EACDuJ,EAAAA,IAAI,CAAC0B,kBAAL,CAAwB,UAAxB,EAAoCzL,GAApC;EACA+J,EAAAA,IAAI,CAAC2B,UAAL,CAAgBC,WAAhB,CAA4B5B,IAA5B;EACD;;EAED,SAASiB,QAAT,CAAkBjB,IAAlB,EAAwBc,GAAxB,EAA6Be,KAA7B,EAAoCpL,EAApC,EAAwC;EACtC,MAAIR,GAAG,GAAGW,IAAI,CAACJ,cAAL,CAAoBC,EAApB,CAAV;;EACA,MAAGoL,KAAK,IAAIf,GAAG,CAAClT,MAAhB,EAAwB;EACtBoS,IAAAA,IAAI,CAAC0B,kBAAL,CAAwB,WAAxB,EAAqCzL,GAArC;EACD,GAFD,MAGK;EACH6K,IAAAA,GAAG,CAACe,KAAD,CAAH,CAAWH,kBAAX,CAA8B,aAA9B,EAA6CzL,GAA7C;EACD;EACF;;EAED,SAAS+K,QAAT,CAAkBhB,IAAlB,EAAwBc,GAAxB,EAA6Be,KAA7B,EAAoC;EAClC,MAAGf,GAAG,CAACe,KAAD,CAAN,EAAe;EACb7B,IAAAA,IAAI,CAAC4B,WAAL,CAAiBd,GAAG,CAACe,KAAD,CAApB;EACD;EACF;;EClMD,SAASC,MAAT,CAAgBC,GAAhB,EAAqB;EACnB,MAAGnL,IAAI,CAACE,QAAL,CAAciL,GAAd,CAAH,EAAuB;EACrB,QAAIC,CAAC,GAAG3V,QAAQ,CAAC4V,aAAT,CAAuBF,GAAvB,CAAR;;EACA,QAAG,CAACC,CAAJ,EAAO;EACL,YAAM,IAAIhG,KAAJ,CAAU,mCAAmC+F,GAA7C,CAAN;EACD;;EACD,WAAOC,CAAP;EACD;;EACD,MAAG,CAACD,GAAJ,EAAS;EACP,UAAM,IAAI/F,KAAJ,CAAU,uBAAuB+F,GAAjC,CAAN;EACD;;EACD,SAAOA,GAAP;EACD;;EAED,SAASG,UAAT,CAAoB9T,CAApB,EAAuBsH,CAAvB,EAA0B;EACxB,MAAIvJ,CAAC,GAAG2B,KAAK,CAACC,OAAN,CAAc2H,CAAd,IAAmBkB,IAAI,CAACZ,eAAL,CAAqBN,CAArB,CAAnB,GAA6CkB,IAAI,CAACV,SAAL,CAAeR,CAAf,CAArD;;EACA,MAAGtH,CAAC,KAAK,WAAT,EAAsB;EACpBA,IAAAA,CAAC,GAAG,OAAJ;EACD;;EACD,SAAO,MAAMA,CAAN,GAAU,IAAV,GAAiBwI,IAAI,CAACR,UAAL,CAAgBjK,CAAhB,EAAmB,IAAnB,CAAjB,GAA4C,GAAnD;EACD;;MAEKgW;;;;;EACJ,cAAYxT,OAAZ,EAAqBC,KAArB,EAA4B+H,QAA5B,EAAsC;EAAA;;EAAA;;EACpC,4EAAMhI,OAAN,EAAeC,KAAf,EAAsB+H,QAAtB;EACA,UAAKyL,MAAL,GAAc,IAAd,CAFoC;;EAAA;EAGrC;;;;oCAEa;EACZ,UAAG,KAAKxT,KAAL,CAAWzB,KAAX,KAAqBoJ,SAAxB,EAAmC;EACjC,YAAI/F,KAAK,GAAG6R,QAAQ,CAAC,KAAKzT,KAAL,CAAWzB,KAAZ,CAApB;;EACA,YAAG,CAACmV,KAAK,CAAC9R,KAAD,CAAN,IAAiBA,KAAK,GAAG,CAA5B,EAA+B;EAC7B,eAAKnF,OAAL,GAAemF,KAAf;EACD;EACF;;EACD,UAAG,KAAK5B,KAAL,CAAWmC,MAAX,KAAsBwF,SAAzB,EAAoC;EAClC,YAAI/F,MAAK,GAAG6R,QAAQ,CAAC,KAAKzT,KAAL,CAAWmC,MAAZ,CAApB;;EACA,YAAG,CAACuR,KAAK,CAAC9R,MAAD,CAAN,IAAiBA,MAAK,GAAG,CAA5B,EAA+B;EAC7B,eAAKlF,QAAL,GAAgBkF,MAAhB;EACD;EACF;EACF;;;kCAEW;EACV,UAAIyF,GAAG,cAAO,KAAKtH,OAAZ,CAAP,CADU;;EAGV,WAAI,IAAIjB,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG,KAAKkB,OAAL,CAAajB,MAAlC,EAA0CF,CAAC,GAAGC,GAA9C,EAAmDD,CAAC,EAApD,EAAwD;EACtD,YAAIG,IAAI,GAAG,KAAKgB,OAAL,CAAanB,CAAb,CAAX;EACAuI,QAAAA,GAAG,IAAIiM,UAAU,CAACrU,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,CAAjB;EACD;;EACDoI,MAAAA,GAAG,iBAAU,KAAKtH,OAAf,MAAH;EACA,aAAOsH,GAAP;EACD;;;2BAEImF,GAAGC,OAAO;EACb,UAAGD,CAAC,CAACmH,OAAF,IAAanH,CAAC,CAACmH,OAAF,CAAU3U,MAAV,GAAmB,CAAnC,EAAsC;EACpC;EACD;;EAHY,UAIP4U,IAJO,GAIE,IAJF,CAIPA,IAJO;;EAAA,kCAKcA,IAAI,CAACC,qBAAL,EALd;EAAA,UAKPjR,CALO,yBAKPA,CALO;EAAA,UAKJC,CALI,yBAKJA,CALI;EAAA,UAKDhF,GALC,yBAKDA,GALC;EAAA,UAKIuE,KALJ,yBAKIA,KALJ;;EAMbQ,MAAAA,CAAC,GAAGA,CAAC,IAAI/E,GAAL,IAAY,CAAhB;EACAgF,MAAAA,CAAC,GAAGA,CAAC,IAAIT,KAAL,IAAc,CAAlB;;EAPa,iBAQcoK,CAAC,CAACmH,OAAF,GAAanH,CAAC,CAACmH,OAAF,CAAU,CAAV,KAAgB,EAA7B,GAAmCnH,CARjD;EAAA,UAQPsH,OARO,QAQPA,OARO;EAAA,UAQEC,OARF,QAQEA,OARF;;EASbnR,MAAAA,CAAC,GAAGkR,OAAO,GAAGlR,CAAd;EACAC,MAAAA,CAAC,GAAGkR,OAAO,GAAGlR,CAAd;;EACA,WAAKsO,WAAL,CAAiB;EACfzE,QAAAA,KAAK,EAAEF,CADQ;EAEf5J,QAAAA,CAAC,EAADA,CAFe;EAGfC,QAAAA,CAAC,EAADA,CAHe;EAIfgK,QAAAA,MAAM,EAAE;EAJO,OAAjB,EAKGJ,KALH;EAMD;;;oCAEa;EAAA;;EAAA,UACNmH,IADM,GACG,IADH,CACNA,IADM;EAEZ,OAAC,OAAD,EAAU,UAAV,EAAsB,WAAtB,EAAmC,WAAnC,EAAgD,SAAhD,EAA2D,YAA3D,EAAyE,WAAzE,EAAsF,UAAtF,EAAkG,aAAlG,EAAiHxT,OAAjH,CAAyH,UAAAuE,IAAI,EAAI;EAC/HiP,QAAAA,IAAI,CAACI,gBAAL,CAAsBrP,IAAtB,EAA4B,UAAA6H,CAAC,EAAI;EAC/B,UAAA,MAAI,CAACyH,IAAL,CAAUzH,CAAV,EAAa,CAAC,UAAD,EAAa,aAAb,EAA4B7D,OAA5B,CAAoChE,IAApC,IAA4C,CAAC,CAA1D;EACD,SAFD;EAGD,OAJD;EAKD;;;+BAEQwO,KAAK;EACZA,MAAAA,GAAG,GAAGD,MAAM,CAACC,GAAD,CAAZ;;EACA,WAAKe,WAAL,GAFY;;;EAIZ,UAAGf,GAAG,CAACgB,QAAJ,CAAaC,WAAb,OAA+B,KAAKrU,OAAL,CAAaqU,WAAb,EAAlC,EAA8D;EAC5D,aAAKZ,MAAL,GAAcL,GAAd;;EACA,YAAG,KAAK5U,KAAR,EAAe;EACb4U,UAAAA,GAAG,CAACR,YAAJ,CAAiB,OAAjB,EAA0B,KAAKpU,KAA/B;EACD;;EACD,YAAG,KAAK4D,MAAR,EAAgB;EACdgR,UAAAA,GAAG,CAACR,YAAJ,CAAiB,QAAjB,EAA2B,KAAKxQ,MAAhC;EACD;EACF,OARD;EAAA,WAUK;EACH,eAAKqR,MAAL,GAAcL,GAAG,CAACE,aAAJ,CAAkB,KAAKtT,OAAvB,CAAd;;EACA,cAAG,CAAC,KAAKyT,MAAT,EAAiB;EACfL,YAAAA,GAAG,CAACkB,SAAJ,GAAgB,KAAKC,SAAL,EAAhB;EACA,iBAAKd,MAAL,GAAcL,GAAG,CAACE,aAAJ,CAAkB,KAAKtT,OAAvB,CAAd;EACD;EACF,SApBW;;;EAsBZ,UAAG,CAAC,KAAKxB,KAAN,IAAe,CAAC,KAAK4D,MAAxB,EAAgC;EAC9B,YAAIhE,GAAG,GAAGC,MAAM,CAACC,gBAAP,CAAwB8U,GAAxB,EAA6B,IAA7B,CAAV;;EACA,YAAG,CAAC,KAAK5U,KAAT,EAAgB;EACd,eAAK9B,OAAL,GAAegX,QAAQ,CAACtV,GAAG,CAACoW,gBAAJ,CAAqB,OAArB,CAAD,CAAvB;EACApB,UAAAA,GAAG,CAACR,YAAJ,CAAiB,OAAjB,EAA0B,KAAKpU,KAA/B;EACD;;EACD,YAAG,CAAC,KAAK4D,MAAT,EAAiB;EACf,eAAKzF,QAAL,GAAgB+W,QAAQ,CAACtV,GAAG,CAACoW,gBAAJ,CAAqB,QAArB,CAAD,CAAxB;EACApB,UAAAA,GAAG,CAACR,YAAJ,CAAiB,QAAjB,EAA2B,KAAKxQ,MAAhC;EACD;EACF,OAhCW;;;EAkCZ,UAAIM,UAAJ;;EACA,UAAG,KAAK1C,OAAL,KAAiB,QAApB,EAA8B;EAC5B,aAAKlD,KAAL,GAAa,KAAK2W,MAAL,CAAYgB,UAAZ,CAAuB,IAAvB,CAAb;;EACA,aAAK3X,KAAL,CAAW4X,SAAX,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,KAAKlW,KAAhC,EAAuC,KAAK4D,MAA5C;;EACAM,QAAAA,UAAU,GAAG4B,IAAI,CAAClH,MAAlB;EACD,OAJD,MAKK,IAAG,KAAK4C,OAAL,KAAiB,KAApB,EAA2B;EAC9B0C,QAAAA,UAAU,GAAG4B,IAAI,CAACjH,GAAlB;EACD,OA1CW;;;EAAA,UA4CNI,KA5CM,GA4CI,IA5CJ,CA4CNA,KA5CM;;EA6CZ,UAAG,CAAC,MAAD,EAAS,OAAT,EAAkBmL,OAAlB,CAA0BnL,KAAK,CAAC0D,OAAhC,MAA6C,CAAC,CAAjD,EAAoD;EAClD1D,QAAAA,KAAK,CAAC0D,OAAN,GAAgB,OAAhB;EACD,OA/CW;;;EAiDZ,UAAG1D,KAAK,CAACG,QAAN,KAAmB,UAAtB,EAAkC;EAChCH,QAAAA,KAAK,CAACG,QAAN,GAAiB,QAAjB;EACD;;EACD,WAAKqQ,UAAL,CAAgB,KAAKnR,KAArB,EAA4B4F,UAA5B,EApDY;;;EAsDZjF,MAAAA,KAAK,CAACe,KAAN,GAAc,KAAKA,KAAnB;EACAf,MAAAA,KAAK,CAAC2E,MAAN,GAAe,KAAKA,MAApB;;EACA,WAAKgM,WAAL;;EACA,WAAKS,QAAL,CAAc;EACZhM,QAAAA,CAAC,EAAE,CADS;EAEZC,QAAAA,CAAC,EAAE,CAFS;EAGZ5B,QAAAA,CAAC,EAAE,KAAK1C,KAHI;EAIZ6F,QAAAA,CAAC,EAAE,KAAKjC;EAJI,OAAd;;EAMA,WAAKyO,WAAL,CAAiB,IAAjB;;EACA,WAAKvF,MAAL,CAAY5I,UAAZ;;EACA,UAAGA,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC1B,YAAIkU,GAAG,GAAG,KAAKlO,UAAf;;EACA,YAAG,KAAKwQ,IAAL,CAAUc,WAAb,EAA0B;EACxBC,UAAAA,IAAO,CAAC,KAAKf,IAAL,CAAU9B,UAAX,EAAuB,KAAK8B,IAAL,CAAUgB,KAAjC,EAAwCtD,GAAxC,CAAP;EACD,SAFD,MAEO;EACL,eAAKsC,IAAL,CAAUS,SAAV,GAAsBrM,IAAI,CAACJ,cAAL,CAAoB0J,GAApB,CAAtB;EACD;;EACD,aAAKsC,IAAL,CAAUgB,KAAV,GAAkBtD,GAAlB;EACD;;EACD,UAAG,CAAC,KAAKsC,IAAL,CAAUc,WAAd,EAA2B;EACzB,aAAKd,IAAL,CAAUc,WAAV,GAAwB,IAAxB;;EACA,aAAKG,WAAL;EACD;EACF;;;0BAEU;EACT,aAAO,KAAKrB,MAAZ;EACD;;;;IA9IchG;;MCxBXsH;;;;;EACJ,gBAAY/U,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,8EAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAK+U,OAAL,GAAe,EAAf;EACA,UAAKC,KAAL,GAAa,EAAb;EACA,UAAKC,SAAL,GAAiB,EAAjB;;EACA,QAAG/V,KAAK,CAACC,OAAN,CAAc,MAAKa,KAAL,CAAWkV,KAAzB,CAAH,EAAoC;EAClC,YAAKH,OAAL,GAAe,MAAK/U,KAAL,CAAWkV,KAA1B;EACD;;EACD,QAAGhW,KAAK,CAACC,OAAN,CAAc,MAAKa,KAAL,CAAWmV,GAAzB,CAAH,EAAkC;EAChC,YAAKH,KAAL,GAAa,MAAKhV,KAAL,CAAWmV,GAAxB;EACD;;EACD,QAAGjW,KAAK,CAACC,OAAN,CAAc,MAAKa,KAAL,CAAWoV,OAAzB,CAAH,EAAsC;EACpC,YAAKH,SAAL,GAAiB,MAAKjV,KAAL,CAAWoV,OAA5B;EACD;;EAdyB;EAe3B;;;;6BAEM3S,YAAY;EACjB,uEAAaA,UAAb;;EADiB,UAEXG,CAFW,GAE0D,IAF1D,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAE0D,IAF1D,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAE0D,IAF1D,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAE0D,IAF1D,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAE0D,IAF1D,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAE0D,IAF1D,CAEiBA,GAFjB;EAAA,UAEsBuS,KAFtB,GAE0D,IAF1D,CAEsBA,KAFtB;EAAA,UAE6BC,GAF7B,GAE0D,IAF1D,CAE6BA,GAF7B;EAAA,UAEkCC,OAFlC,GAE0D,IAF1D,CAEkCA,OAFlC;EAAA,UAE2ChS,UAF3C,GAE0D,IAF1D,CAE2CA,UAF3C;;EAGjB,UAAG8R,KAAK,CAAClW,MAAN,GAAe,CAAf,IAAoBmW,GAAG,CAACnW,MAAJ,GAAa,CAApC,EAAuC;EACrC;EACD;;EALgB,UAOfkC,OAPe,GAuBb1D,KAvBa,CAOf0D,OAPe;EAAA,UAQfoC,cARe,GAuBb9F,KAvBa,CAQf8F,cARe;EAAA,UASfG,gBATe,GAuBbjG,KAvBa,CASfiG,gBATe;EAAA,UAUfG,iBAVe,GAuBbpG,KAvBa,CAUfoG,iBAVe;EAAA,UAWfG,eAXe,GAuBbvG,KAvBa,CAWfuG,eAXe;EAAA,UAYf5C,SAZe,GAuBb3D,KAvBa,CAYf2D,SAZe;EAAA,UAafC,WAbe,GAuBb5D,KAvBa,CAaf4D,WAbe;EAAA,UAcfC,YAde,GAuBb7D,KAvBa,CAcf6D,YAde;EAAA,UAefC,UAfe,GAuBb9D,KAvBa,CAef8D,UAfe;EAAA,UAgBfC,UAhBe,GAuBb/D,KAvBa,CAgBf+D,UAhBe;EAAA,UAiBfC,YAjBe,GAuBbhE,KAvBa,CAiBfgE,YAjBe;EAAA,UAkBfC,aAlBe,GAuBbjE,KAvBa,CAkBfiE,aAlBe;EAAA,UAmBfC,WAnBe,GAuBblE,KAvBa,CAmBfkE,WAnBe;EAAA,UAoBfwD,MApBe,GAuBb1H,KAvBa,CAoBf0H,MApBe;EAAA,UAqBfyB,WArBe,GAuBbnJ,KAvBa,CAqBfmJ,WArBe;EAAA,UAsBfC,eAtBe,GAuBbpJ,KAvBa,CAsBfoJ,eAtBe;;EAwBjB,UAAG1F,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACArD,MAAAA,KAAK,IAAIwF,eAAe,CAACnC,KAAhB,GAAwB6B,gBAAgB,CAAC7B,KAAzC,GAAiDN,UAAU,CAACM,KAA5D,GAAoER,WAAW,CAACQ,KAAhF,GAAwFF,WAAW,CAACE,KAApG,GAA4GJ,YAAY,CAACI,KAAlI;EACAO,MAAAA,MAAM,IAAImB,cAAc,CAAC1B,KAAf,GAAuBgC,iBAAiB,CAAChC,KAAzC,GAAiDT,SAAS,CAACS,KAA3D,GAAmEP,YAAY,CAACO,KAAhF,GAAwFL,UAAU,CAACK,KAAnG,GAA2GH,aAAa,CAACG,KAAnI;EACA,UAAIsC,EAAE,GAAGmR,OAAO,GAAGH,KAAK,CAAC,CAAD,CAAL,GAAW3W,KAA9B;EACA,UAAI4F,EAAE,GAAGmR,OAAO,GAAGJ,KAAK,CAAC,CAAD,CAAL,GAAW/S,MAA9B;EACA,UAAIyC,EAAE,GAAGyQ,OAAO,GAAGF,GAAG,CAAC,CAAD,CAAH,GAAS5W,KAA5B;EACA,UAAI4G,EAAE,GAAGmQ,OAAO,GAAGH,GAAG,CAAC,CAAD,CAAH,GAAShT,MAA5B;EACA,UAAIoT,KAAK,GAAG,CAAZ;EACA,UAAIC,GAAJ,EAASC,GAAT,EAAcC,GAAd,EAAmBC,GAAnB;;EACA,UAAGzW,KAAK,CAACC,OAAN,CAAciW,OAAO,CAAC,CAAD,CAArB,CAAH,EAA8B;EAC5BG,QAAAA,KAAK;EACLC,QAAAA,GAAG,GAAGH,OAAO,GAAGD,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,IAAgB7W,KAAhC;EACAkX,QAAAA,GAAG,GAAGH,OAAO,GAAGF,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,IAAgBjT,MAAhC;EACD;;EACD,UAAGjD,KAAK,CAACC,OAAN,CAAciW,OAAO,CAAC,CAAD,CAArB,CAAH,EAA8B;EAC5BG,QAAAA,KAAK;EACLG,QAAAA,GAAG,GAAGL,OAAO,GAAGD,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,IAAgB7W,KAAhC;EACAoX,QAAAA,GAAG,GAAGL,OAAO,GAAGF,OAAO,CAAC,CAAD,CAAP,CAAW,CAAX,IAAgBjT,MAAhC;EACD;;EACD,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWd,EAAX,EAAeC,EAAf;;EACA,YAAGoR,KAAK,KAAK,CAAb,EAAgB;EACd5S,UAAAA,GAAG,CAACiT,aAAJ,CAAkBJ,GAAlB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCC,GAAjC,EAAsC/Q,EAAtC,EAA0CO,EAA1C;EACD,SAFD,MAGK,IAAGoQ,KAAK,KAAK,CAAb,EAAgB;EACnB5S,UAAAA,GAAG,CAACkT,gBAAJ,CAAqBL,GAArB,EAA0BC,GAA1B,EAA+B7Q,EAA/B,EAAmCO,EAAnC;EACD,SAFI,MAGA;EACHxC,UAAAA,GAAG,CAACsC,MAAJ,CAAWL,EAAX,EAAeO,EAAf;EACD;;EACDxC,QAAAA,GAAG,CAACuC,MAAJ;EACAvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,YAAGmY,KAAK,KAAK,CAAb,EAAgB;EACdnS,UAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,YAAAA,IAAI,EAAE,MADgB;EAEtB5E,YAAAA,OAAO,EAAE,MAFa;EAGtBC,YAAAA,KAAK,EAAE,CACL,CAAC,GAAD,aAAUkE,EAAV,cAAgBC,EAAhB,eAAuBqR,GAAvB,cAA8BC,GAA9B,cAAqCC,GAArC,cAA4CC,GAA5C,cAAmD/Q,EAAnD,cAAyDO,EAAzD,EADK,EAEL,CAAC,MAAD,EAAS,MAAT,CAFK,EAGL,CAAC,QAAD,EAAWD,MAAX,CAHK,EAIL,CAAC,cAAD,EAAiByB,WAAjB,CAJK,EAKL,CAAC,kBAAD,EAAqBC,eAArB,CALK;EAHe,WAAxB;EAWD,SAZD,MAaK,IAAG2O,KAAK,KAAK,CAAb,EAAgB;EACnBnS,UAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,YAAAA,IAAI,EAAE,MADgB;EAEtB5E,YAAAA,OAAO,EAAE,MAFa;EAGtBC,YAAAA,KAAK,EAAE,CACL,CAAC,GAAD,aAAUkE,EAAV,cAAgBC,EAAhB,eAAuBqR,GAAvB,cAA8BC,GAA9B,cAAqC7Q,EAArC,cAA2CO,EAA3C,EADK,EAEL,CAAC,MAAD,EAAS,MAAT,CAFK,EAGL,CAAC,QAAD,EAAWD,MAAX,CAHK,EAIL,CAAC,cAAD,EAAiByB,WAAjB,CAJK,EAKL,CAAC,kBAAD,EAAqBC,eAArB,CALK;EAHe,WAAxB;EAWD,SAZI,MAaA;EACHxD,UAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,YAAAA,IAAI,EAAE,MADgB;EAEtB5E,YAAAA,OAAO,EAAE,MAFa;EAGtBC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOkE,EAAP,CADK,EAEL,CAAC,IAAD,EAAOC,EAAP,CAFK,EAGL,CAAC,IAAD,EAAOS,EAAP,CAHK,EAIL,CAAC,IAAD,EAAOO,EAAP,CAJK,EAKL,CAAC,QAAD,EAAWD,MAAX,CALK,EAML,CAAC,cAAD,EAAiByB,WAAjB,CANK,EAOL,CAAC,kBAAD,EAAqBC,eAArB,CAPK;EAHe,WAAxB;EAaD;EACF;EACF;;;0BAEW;EACV,aAAO,KAAKmO,OAAZ;EACD;;;0BACS;EACR,aAAO,KAAKC,KAAZ;EACD;;;0BACa;EACZ,aAAO,KAAKC,SAAZ;EACD;;;;IAxIgBhJ;;MCAb6J;;;;;EACJ,oBAAY/V,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,kFAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAK+V,QAAL,GAAgB,EAAhB;;EACA,QAAG7W,KAAK,CAACC,OAAN,CAAc,MAAKa,KAAL,CAAWgW,MAAzB,CAAH,EAAqC;EACnC,YAAKD,QAAL,GAAgB,MAAK/V,KAAL,CAAWgW,MAA3B;EACD,KANyB;;;EAQ1B,QAAG,CAAC,UAAD,EAAa,WAAb,EAA0B,aAA1B,EAAyC,cAAzC,EAAyDrN,OAAzD,CAAiE,MAAK3I,KAAL,CAAWiW,MAA5E,IAAsF,CAAC,CAA1F,EAA6F;EAC3F,YAAKC,QAAL,GAAgB,MAAKlW,KAAL,CAAWiW,MAA3B;EACD,KAFD,MAGK;EACH,YAAKC,QAAL,GAAgB,aAAhB;EACD;;EAbyB;EAc3B;;;;6BAEMzT,YAAY;EACjB,2EAAaA,UAAb;;EADiB,UAEXG,CAFW,GAEqD,IAFrD,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAEqD,IAFrD,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAEqD,IAFrD,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAEqD,IAFrD,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAEqD,IAFrD,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAEqD,IAFrD,CAEiBA,GAFjB;EAAA,UAEsBqT,MAFtB,GAEqD,IAFrD,CAEsBA,MAFtB;EAAA,UAE8BC,MAF9B,GAEqD,IAFrD,CAE8BA,MAF9B;EAAA,UAEsC7S,UAFtC,GAEqD,IAFrD,CAEsCA,UAFtC;;EAGjB,UAAG4S,MAAM,CAAChX,MAAP,GAAgB,CAAnB,EAAsB;EACpB;EACD;;EACD,WAAI,IAAIF,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGiX,MAAM,CAAChX,MAA5B,EAAoCF,CAAC,GAAGC,GAAxC,EAA6CD,CAAC,EAA9C,EAAkD;EAChD,YAAG,CAACI,KAAK,CAACC,OAAN,CAAc6W,MAAM,CAAClX,CAAD,CAApB,CAAD,IAA6BkX,MAAM,CAAClX,CAAD,CAAN,CAAUE,MAAV,GAAmB,CAAnD,EAAsD;EACpD;EACD;EACF;;EAVgB,UAYfkC,OAZe,GAsBb1D,KAtBa,CAYf0D,OAZe;EAAA,UAafoC,cAbe,GAsBb9F,KAtBa,CAaf8F,cAbe;EAAA,UAcfS,eAde,GAsBbvG,KAtBa,CAcfuG,eAde;EAAA,UAef5C,SAfe,GAsBb3D,KAtBa,CAef2D,SAfe;EAAA,UAgBfG,UAhBe,GAsBb9D,KAtBa,CAgBf8D,UAhBe;EAAA,UAiBfC,UAjBe,GAsBb/D,KAtBa,CAiBf+D,UAjBe;EAAA,UAkBfG,WAlBe,GAsBblE,KAtBa,CAkBfkE,WAlBe;EAAA,UAmBfwD,MAnBe,GAsBb1H,KAtBa,CAmBf0H,MAnBe;EAAA,UAoBfyB,WApBe,GAsBbnJ,KAtBa,CAoBfmJ,WApBe;EAAA,UAqBfC,eArBe,GAsBbpJ,KAtBa,CAqBfoJ,eArBe;;EAuBjB,UAAG1F,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACA,UAAIuU,GAAG,GAAG,KAAKC,KAAL,GAAa,EAAvB;;EACA,UAAGH,MAAM,KAAK,UAAd,EAA0B;EACxBD,QAAAA,MAAM,CAAC5V,OAAP,CAAe,UAAAnB,IAAI,EAAI;EACrBkX,UAAAA,GAAG,CAACzW,IAAJ,CAAS,CACP2V,OAAO,GAAGpW,IAAI,CAAC,CAAD,CAAJ,GAAUV,KADb,EAEP+W,OAAO,GAAGrW,IAAI,CAAC,CAAD,CAAJ,GAAUkD,MAFb,CAAT;EAID,SALD;EAMD,OAPD,MAQK,IAAG8T,MAAM,KAAK,WAAd,EAA2B;EAC9BD,QAAAA,MAAM,CAAC5V,OAAP,CAAe,UAAAnB,IAAI,EAAI;EACrBkX,UAAAA,GAAG,CAACzW,IAAJ,CAAS,CACP2V,OAAO,GAAG9W,KAAV,GAAkBU,IAAI,CAAC,CAAD,CAAJ,GAAUV,KADrB,EAEP+W,OAAO,GAAGrW,IAAI,CAAC,CAAD,CAAJ,GAAUkD,MAFb,CAAT;EAID,SALD;EAMD,OAPI,MAQA,IAAG8T,MAAM,KAAK,aAAd,EAA6B;EAChCD,QAAAA,MAAM,CAAC5V,OAAP,CAAe,UAAAnB,IAAI,EAAI;EACrBkX,UAAAA,GAAG,CAACzW,IAAJ,CAAS,CACP2V,OAAO,GAAGpW,IAAI,CAAC,CAAD,CAAJ,GAAUV,KADb,EAEP+W,OAAO,GAAGnT,MAAV,GAAmBlD,IAAI,CAAC,CAAD,CAAJ,GAAUkD,MAFtB,CAAT;EAID,SALD;EAMD,OAPI,MAQA,IAAG8T,MAAM,KAAK,cAAd,EAA8B;EACjCD,QAAAA,MAAM,CAAC5V,OAAP,CAAe,UAAAnB,IAAI,EAAI;EACrBkX,UAAAA,GAAG,CAACzW,IAAJ,CAAS,CACP2V,OAAO,GAAG9W,KAAV,GAAkBU,IAAI,CAAC,CAAD,CAAJ,GAAUV,KADrB,EAEP+W,OAAO,GAAGnT,MAAV,GAAmBlD,IAAI,CAAC,CAAD,CAAJ,GAAUkD,MAFtB,CAAT;EAID,SALD;EAMD;;EACD,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWmR,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAX,EAAsBb,OAAO,GAAGa,GAAG,CAAC,CAAD,CAAH,CAAO,CAAP,CAAhC;;EACA,aAAI,IAAIrX,EAAC,GAAG,CAAR,EAAWC,IAAG,GAAGoX,GAAG,CAACnX,MAAzB,EAAiCF,EAAC,GAAGC,IAArC,EAA0CD,EAAC,EAA3C,EAA+C;EAC7C,cAAIuX,KAAK,GAAGF,GAAG,CAACrX,EAAD,CAAf;EACA6D,UAAAA,GAAG,CAACsC,MAAJ,CAAWoR,KAAK,CAAC,CAAD,CAAhB,EAAqBA,KAAK,CAAC,CAAD,CAA1B;EACD;;EACD,YAAG1P,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAdD,MAeK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,YAAI4Y,OAAM,GAAG,EAAb;;EACA,aAAI,IAAIlX,GAAC,GAAG,CAAR,EAAWC,KAAG,GAAGoX,GAAG,CAACnX,MAAzB,EAAiCF,GAAC,GAAGC,KAArC,EAA0CD,GAAC,EAA3C,EAA+C;EAC7C,cAAIuX,MAAK,GAAGF,GAAG,CAACrX,GAAD,CAAf;EACAkX,UAAAA,OAAM,cAAOK,MAAK,CAAC,CAAD,CAAZ,cAAmBA,MAAK,CAAC,CAAD,CAAxB,MAAN;EACD;;EACDjT,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,UAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,QAAD,EAAWgW,OAAX,CADK,EAEL,CAAC,MAAD,EAAS,MAAT,CAFK,EAGL,CAAC,QAAD,EAAW9Q,MAAX,CAHK,EAIL,CAAC,cAAD,EAAiByB,WAAjB,CAJK,EAKL,CAAC,kBAAD,EAAqBC,eAArB,CALK;EAHe,SAAxB;EAWD;EACF;;;mCAEYhE,GAAG;EACd,UAAI6I,GAAG,GAAGqD,QAAV;EACA,UAAI/P,GAAG,GAAG,KAAKqX,KAAL,CAAWpX,MAArB;EACA,UAAIqI,GAAG,GAAG,EAAV;;EACA,WAAI,IAAIvI,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGC,GAAnB,EAAwBD,CAAC,EAAzB,EAA6B;EAC3B,YAAI5B,IAAI,GAAGuM,IAAI,CAAC6M,GAAL,CAAS,KAAKF,KAAL,CAAWtX,CAAX,EAAc,CAAd,IAAmB8D,CAA5B,CAAX;;EACA,YAAG1F,IAAI,GAAGuO,GAAV,EAAe;EACbA,UAAAA,GAAG,GAAGvO,IAAN;EACD;EACF;;EACD,WAAI,IAAI4B,GAAC,GAAG,CAAZ,EAAeA,GAAC,GAAGC,GAAnB,EAAwBD,GAAC,EAAzB,EAA6B;EAC3B,YAAI5B,KAAI,GAAGuM,IAAI,CAAC6M,GAAL,CAAS,KAAKF,KAAL,CAAWtX,GAAX,EAAc,CAAd,IAAmB8D,CAA5B,CAAX;;EACA,YAAG1F,KAAI,KAAKuO,GAAZ,EAAiB;EACfpE,UAAAA,GAAG,CAAC3H,IAAJ,CAAS;EACPuT,YAAAA,KAAK,EAAEnU,GADA;EAEP8D,YAAAA,CAAC,EAAE,KAAKwT,KAAL,CAAWtX,GAAX,EAAc,CAAd,CAFI;EAGP+D,YAAAA,CAAC,EAAE,KAAKuT,KAAL,CAAWtX,GAAX,EAAc,CAAd;EAHI,WAAT;EAKD;EACF;;EACD,aAAOuI,GAAP;EACD;;;0BAEY;EACX,aAAO,KAAK0O,QAAZ;EACD;;;0BACY;EACX,aAAO,KAAKG,QAAZ;EACD;;;;IA7IoBjK;;MCAjBsK;;;;;EACJ,mBAAYxW,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,iFAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAK+V,QAAL,GAAgB,EAAhB;;EACA,QAAG7W,KAAK,CAACC,OAAN,CAAc,MAAKa,KAAL,CAAWgW,MAAzB,CAAH,EAAqC;EACnC,YAAKD,QAAL,GAAgB,MAAK/V,KAAL,CAAWgW,MAA3B;EACD;;EANyB;EAO3B;;;;6BAEMvT,YAAY;EACjB,0EAAaA,UAAb;;EADiB,UAEXG,CAFW,GAE6C,IAF7C,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAE6C,IAF7C,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAE6C,IAF7C,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAE6C,IAF7C,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAE6C,IAF7C,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAE6C,IAF7C,CAEiBA,GAFjB;EAAA,UAEsBqT,MAFtB,GAE6C,IAF7C,CAEsBA,MAFtB;EAAA,UAE8B5S,UAF9B,GAE6C,IAF7C,CAE8BA,UAF9B;;EAGjB,UAAG4S,MAAM,CAAChX,MAAP,GAAgB,CAAnB,EAAsB;EACpB;EACD;;EACD,WAAI,IAAIF,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGiX,MAAM,CAAChX,MAA5B,EAAoCF,CAAC,GAAGC,GAAxC,EAA6CD,CAAC,EAA9C,EAAkD;EAChD,YAAG,CAACI,KAAK,CAACC,OAAN,CAAc6W,MAAM,CAAClX,CAAD,CAApB,CAAD,IAA6BkX,MAAM,CAAClX,CAAD,CAAN,CAAUE,MAAV,GAAmB,CAAnD,EAAsD;EACpD;EACD;EACF;;EAVgB,UAYfkC,OAZe,GAuBb1D,KAvBa,CAYf0D,OAZe;EAAA,UAafoC,cAbe,GAuBb9F,KAvBa,CAaf8F,cAbe;EAAA,UAcfS,eAde,GAuBbvG,KAvBa,CAcfuG,eAde;EAAA,UAef5C,SAfe,GAuBb3D,KAvBa,CAef2D,SAfe;EAAA,UAgBfG,UAhBe,GAuBb9D,KAvBa,CAgBf8D,UAhBe;EAAA,UAiBfC,UAjBe,GAuBb/D,KAvBa,CAiBf+D,UAjBe;EAAA,UAkBfG,WAlBe,GAuBblE,KAvBa,CAkBfkE,WAlBe;EAAA,UAmBfwD,MAnBe,GAuBb1H,KAvBa,CAmBf0H,MAnBe;EAAA,UAoBfyB,WApBe,GAuBbnJ,KAvBa,CAoBfmJ,WApBe;EAAA,UAqBfC,eArBe,GAuBbpJ,KAvBa,CAqBfoJ,eArBe;EAAA,UAsBfnC,IAtBe,GAuBbjH,KAvBa,CAsBfiH,IAtBe;;EAwBjB,UAAGvD,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACAoU,MAAAA,MAAM,CAAC5V,OAAP,CAAe,UAAAnB,IAAI,EAAI;EACrBA,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUoW,OAAO,GAAGpW,IAAI,CAAC,CAAD,CAAJ,GAAUV,KAA9B;EACAU,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUqW,OAAO,GAAGrW,IAAI,CAAC,CAAD,CAAJ,GAAUkD,MAA9B;EACD,OAHD;;EAIA,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAAC4B,SAAJ,GAAgBE,IAAhB;EACA9B,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWgR,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAX,EAAyBV,OAAO,GAAGU,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAnC;;EACA,aAAI,IAAIlX,EAAC,GAAG,CAAR,EAAWC,IAAG,GAAGiX,MAAM,CAAChX,MAA5B,EAAoCF,EAAC,GAAGC,IAAxC,EAA6CD,EAAC,EAA9C,EAAkD;EAChD,cAAIuX,KAAK,GAAGL,MAAM,CAAClX,EAAD,CAAlB;EACA6D,UAAAA,GAAG,CAACsC,MAAJ,CAAWoR,KAAK,CAAC,CAAD,CAAhB,EAAqBA,KAAK,CAAC,CAAD,CAA1B;EACD;;EACD1T,QAAAA,GAAG,CAAC8B,IAAJ;;EACA,YAAGkC,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAhBD,MAiBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,YAAI4Y,OAAM,GAAG,EAAb;;EACA,aAAI,IAAIlX,GAAC,GAAG,CAAR,EAAWC,KAAG,GAAGiX,OAAM,CAAChX,MAA5B,EAAoCF,GAAC,GAAGC,KAAxC,EAA6CD,GAAC,EAA9C,EAAkD;EAChD,cAAIuX,MAAK,GAAGL,OAAM,CAAClX,GAAD,CAAlB;EACAkX,UAAAA,OAAM,cAAOK,MAAK,CAAC,CAAD,CAAZ,cAAmBA,MAAK,CAAC,CAAD,CAAxB,MAAN;EACD;;EACDjT,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,SAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,QAAD,EAAWgW,OAAX,CADK,EAEL,CAAC,MAAD,EAASvR,IAAT,CAFK,EAGL,CAAC,QAAD,EAAWS,MAAX,CAHK,EAIL,CAAC,cAAD,EAAiByB,WAAjB,CAJK,EAKL,CAAC,kBAAD,EAAqBC,eAArB,CALK;EAHe,SAAxB;EAWD;EACF;;;0BAEY;EACX,aAAO,KAAKmP,QAAZ;EACD;;;;IAlFmB9J;;ECAtB,IAAMuK,MAAM,GAAG/M,IAAI,CAACgN,EAAL,GAAU,GAAzB;;EAEA,SAASC,gBAAT,CAA0B9T,CAA1B,EAA6BC,CAA7B,EAAgC8T,CAAhC,EAAmCC,CAAnC,EAAsC;EACpC,SAAMA,CAAC,GAAG,GAAV,EAAe;EACbA,IAAAA,CAAC,IAAI,GAAL;EACD;;EACD,SAAMA,CAAC,GAAG,CAAV,EAAa;EACXA,IAAAA,CAAC,IAAI,GAAL;EACD;;EACD,MAAGA,CAAC,IAAI,CAAL,IAAUA,CAAC,GAAG,EAAjB,EAAqB;EACnB,WAAO,CACLhU,CAAC,GAAG6G,IAAI,CAACoN,GAAL,CAASD,CAAC,GAAGnN,IAAI,CAACgN,EAAT,GAAc,GAAvB,IAA8BE,CAD7B,EAEL9T,CAAC,GAAG4G,IAAI,CAACqN,GAAL,CAASF,CAAC,GAAGnN,IAAI,CAACgN,EAAT,GAAc,GAAvB,IAA8BE,CAF7B,CAAP;EAID,GALD,MAMK,IAAGC,CAAC,IAAI,EAAL,IAAWA,CAAC,GAAG,GAAlB,EAAuB;EAC1B,WAAO,CACLhU,CAAC,GAAG6G,IAAI,CAACqN,GAAL,CAAS,CAACF,CAAC,GAAG,EAAL,IAAWnN,IAAI,CAACgN,EAAhB,GAAqB,GAA9B,IAAqCE,CADpC,EAEL9T,CAAC,GAAG4G,IAAI,CAACoN,GAAL,CAAS,CAACD,CAAC,GAAG,EAAL,IAAWnN,IAAI,CAACgN,EAAhB,GAAqB,GAA9B,IAAqCE,CAFpC,CAAP;EAID,GALI,MAMA,IAAGC,CAAC,IAAI,GAAL,IAAYA,CAAC,GAAG,GAAnB,EAAwB;EAC3B,WAAO,CACLhU,CAAC,GAAG6G,IAAI,CAACqN,GAAL,CAAS,CAAC,MAAMF,CAAP,IAAYnN,IAAI,CAACgN,EAAjB,GAAsB,GAA/B,IAAsCE,CADrC,EAEL9T,CAAC,GAAG4G,IAAI,CAACoN,GAAL,CAAS,CAAC,MAAMD,CAAP,IAAYnN,IAAI,CAACgN,EAAjB,GAAsB,GAA/B,IAAsCE,CAFrC,CAAP;EAID,GALI,MAMA;EACH,WAAO,CACL/T,CAAC,GAAG6G,IAAI,CAACoN,GAAL,CAAS,CAAC,MAAMD,CAAP,IAAYnN,IAAI,CAACgN,EAAjB,GAAsB,GAA/B,IAAsCE,CADrC,EAEL9T,CAAC,GAAG4G,IAAI,CAACqN,GAAL,CAAS,CAAC,MAAMF,CAAP,IAAYnN,IAAI,CAACgN,EAAjB,GAAsB,GAA/B,IAAsCE,CAFrC,CAAP;EAID;EACF;;MAEKI;;;;;EACJ,kBAAYhX,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,gFAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAK+U,OAAL,GAAe,CAAf;EACA,UAAKC,KAAL,GAAa,CAAb;;EACA,QAAG,MAAKhV,KAAL,CAAWkV,KAAd,EAAqB;EACnB,YAAKH,OAAL,GAAezW,UAAU,CAAC,MAAK0B,KAAL,CAAWkV,KAAZ,CAAzB;;EACA,UAAGxB,KAAK,CAAC,MAAKwB,KAAN,CAAR,EAAsB;EACpB,cAAKH,OAAL,GAAe,CAAf;EACD;EACF;;EACD,QAAG,MAAK/U,KAAL,CAAWmV,GAAd,EAAmB;EACjB,YAAKH,KAAL,GAAa1W,UAAU,CAAC,MAAK0B,KAAL,CAAWmV,GAAZ,CAAvB;;EACA,UAAGzB,KAAK,CAAC,MAAKyB,GAAN,CAAR,EAAoB;EAClB,cAAKH,KAAL,GAAa,CAAb;EACD;EACF,KAhByB;;;EAkB1B,UAAKgC,GAAL,GAAW,CAAX;;EACA,QAAG,MAAKhX,KAAL,CAAW2W,CAAd,EAAiB;EACf,YAAKK,GAAL,GAAW1Y,UAAU,CAAC,MAAK0B,KAAL,CAAW2W,CAAZ,CAArB;;EACA,UAAGjD,KAAK,CAAC,MAAKiD,CAAN,CAAR,EAAkB;EAChB,cAAKK,GAAL,GAAW,CAAX;EACD;EACF;;EAxByB;EAyB3B;;;;6BAEMvU,YAAY;EACjB,yEAAaA,UAAb;;EADiB,UAEXG,CAFW,GAEoD,IAFpD,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAEoD,IAFpD,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAEoD,IAFpD,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAEoD,IAFpD,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAEoD,IAFpD,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAEoD,IAFpD,CAEiBA,GAFjB;EAAA,UAEsBuS,KAFtB,GAEoD,IAFpD,CAEsBA,KAFtB;EAAA,UAE6BC,GAF7B,GAEoD,IAFpD,CAE6BA,GAF7B;EAAA,UAEkCwB,CAFlC,GAEoD,IAFpD,CAEkCA,CAFlC;EAAA,UAEqCvT,UAFrC,GAEoD,IAFpD,CAEqCA,UAFrC;;EAGjB,UAAG8R,KAAK,KAAKC,GAAb,EAAkB;EAChB;EACD;;EALgB,UAOfjU,OAPe,GAkBb1D,KAlBa,CAOf0D,OAPe;EAAA,UAQfoC,cARe,GAkBb9F,KAlBa,CAQf8F,cARe;EAAA,UASfS,eATe,GAkBbvG,KAlBa,CASfuG,eATe;EAAA,UAUf5C,SAVe,GAkBb3D,KAlBa,CAUf2D,SAVe;EAAA,UAWfG,UAXe,GAkBb9D,KAlBa,CAWf8D,UAXe;EAAA,UAYfC,UAZe,GAkBb/D,KAlBa,CAYf+D,UAZe;EAAA,UAafG,WAbe,GAkBblE,KAlBa,CAafkE,WAbe;EAAA,UAcfwD,MAde,GAkBb1H,KAlBa,CAcf0H,MAde;EAAA,UAefyB,WAfe,GAkBbnJ,KAlBa,CAefmJ,WAfe;EAAA,UAgBfC,eAhBe,GAkBbpJ,KAlBa,CAgBfoJ,eAhBe;EAAA,UAiBfnC,IAjBe,GAkBbjH,KAlBa,CAiBfiH,IAjBe;;EAmBjB,UAAGvD,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACAyT,MAAAA,OAAO,IAAI9W,KAAK,GAAG,GAAnB;EACA+W,MAAAA,OAAO,IAAInT,MAAM,GAAG,GAApB;EACAwU,MAAAA,CAAC,IAAIlN,IAAI,CAACgC,GAAL,CAASlN,KAAT,EAAgB4D,MAAhB,IAA0B,GAA/B;;EACA,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAAC4B,SAAJ,GAAgBE,IAAhB;EACA9B,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWqQ,OAAX,EAAoBC,OAApB;EACA3S,QAAAA,GAAG,CAACsU,GAAJ,CAAQ5B,OAAR,EAAiBC,OAAjB,EAA0BqB,CAA1B,EAA6BzB,KAAK,GAAGzL,IAAI,CAACgN,EAAb,GAAkB,GAAlB,GAAwBD,MAArD,EAA6DrB,GAAG,GAAG1L,IAAI,CAACgN,EAAX,GAAgB,GAAhB,GAAsBD,MAAnF;EACA7T,QAAAA,GAAG,CAAC8B,IAAJ;;EACA,YAAGkC,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAbD,MAcK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B,YAAI8G,EAAJ,EAAQC,EAAR,EAAYS,EAAZ,EAAgBO,EAAhB;;EAD+B,gCAElBuR,gBAAgB,CAACrB,OAAD,EAAUC,OAAV,EAAmBqB,CAAnB,EAAsBzB,KAAtB,CAFE;;EAAA;;EAE7BhR,QAAAA,EAF6B;EAEzBC,QAAAA,EAFyB;;EAAA,iCAGlBuS,gBAAgB,CAACrB,OAAD,EAAUC,OAAV,EAAmBqB,CAAnB,EAAsBxB,GAAtB,CAHE;;EAAA;;EAG7BvQ,QAAAA,EAH6B;EAGzBO,QAAAA,EAHyB;EAI/B,YAAI+R,KAAK,GAAI/B,GAAG,GAAGD,KAAP,GAAgB,GAAhB,GAAsB,CAAtB,GAA0B,CAAtC;EACA9R,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,MAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,GAAD,aAAUqV,OAAV,cAAqBC,OAArB,eAAiCpR,EAAjC,cAAuCC,EAAvC,eAA8CwS,CAA9C,cAAmDA,CAAnD,gBAA0DO,KAA1D,gBAAqEtS,EAArE,cAA2EO,EAA3E,QADK,EAEL,CAAC,MAAD,EAASV,IAAT,CAFK,EAGL,CAAC,QAAD,EAAWS,MAAX,CAHK,EAIL,CAAC,cAAD,EAAiByB,WAAjB,CAJK,EAKL,CAAC,kBAAD,EAAqBC,eAArB,CALK;EAHe,SAAxB;EAWD;EACF;;;0BAEW;EACV,aAAO,KAAKmO,OAAZ;EACD;;;0BACS;EACR,aAAO,KAAKC,KAAZ;EACD;;;0BACO;EACN,aAAO,KAAKgC,GAAZ;EACD;;;;IAhGkB/K;;MCnCfkL;;;;;EACJ,gBAAYpX,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA,6EACpBD,OADoB,EACXC,KADW;EAE3B;;;;6BAEMyC,YAAY;EACjB,uEAAaA,UAAb;;EADiB,UAEXG,CAFW,GAEqC,IAFrC,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAEqC,IAFrC,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAEqC,IAFrC,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAEqC,IAFrC,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAEqC,IAFrC,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAEqC,IAFrC,CAEiBA,GAFjB;EAAA,UAEsBS,UAFtB,GAEqC,IAFrC,CAEsBA,UAFtB;EAAA,UAIflC,OAJe,GAeb1D,KAfa,CAIf0D,OAJe;EAAA,UAKfoC,cALe,GAeb9F,KAfa,CAKf8F,cALe;EAAA,UAMfS,eANe,GAebvG,KAfa,CAMfuG,eANe;EAAA,UAOf5C,SAPe,GAeb3D,KAfa,CAOf2D,SAPe;EAAA,UAQfG,UARe,GAeb9D,KAfa,CAQf8D,UARe;EAAA,UASfC,UATe,GAeb/D,KAfa,CASf+D,UATe;EAAA,UAUfG,WAVe,GAeblE,KAfa,CAUfkE,WAVe;EAAA,UAWfwD,MAXe,GAeb1H,KAfa,CAWf0H,MAXe;EAAA,UAYfyB,WAZe,GAebnJ,KAfa,CAYfmJ,WAZe;EAAA,UAafC,eAbe,GAebpJ,KAfa,CAafoJ,eAbe;EAAA,UAcfnC,IAde,GAebjH,KAfa,CAcfiH,IAde;;EAgBjB,UAAGvD,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;;EACA,UAAGa,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAAC4B,SAAJ,GAAgBE,IAAhB;EACA9B,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWqQ,OAAX,EAAoBC,OAApB;EACA3S,QAAAA,GAAG,CAACsC,MAAJ,CAAWoQ,OAAO,GAAG9W,KAArB,EAA4B+W,OAA5B;EACA3S,QAAAA,GAAG,CAACsC,MAAJ,CAAWoQ,OAAO,GAAG9W,KAArB,EAA4B+W,OAAO,GAAGnT,MAAtC;EACAQ,QAAAA,GAAG,CAACsC,MAAJ,CAAWoQ,OAAX,EAAoBC,OAAO,GAAGnT,MAA9B;EACAQ,QAAAA,GAAG,CAAC8B,IAAJ;;EACA,YAAGkC,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAfD,MAgBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/BgG,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,MAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,GAAD,EAAM4C,CAAN,CADK,EAEL,CAAC,GAAD,EAAMC,CAAN,CAFK,EAGL,CAAC,OAAD,EAAUtE,KAAV,CAHK,EAIL,CAAC,QAAD,EAAW4D,MAAX,CAJK,EAKL,CAAC,MAAD,EAASsC,IAAT,CALK,EAML,CAAC,QAAD,EAAWS,MAAX,CANK,EAOL,CAAC,cAAD,EAAiByB,WAAjB,CAPK,EAQL,CAAC,kBAAD,EAAqBC,eAArB,CARK;EAHe,SAAxB;EAcD;EACF;;;;IA1DgBqF;;MCAbmL;;;;;EACJ,kBAAYrX,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,gFAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAKgX,GAAL,GAAW,CAAX;;EACA,QAAG,MAAKhX,KAAL,CAAW2W,CAAd,EAAiB;EACf,YAAKK,GAAL,GAAW1Y,UAAU,CAAC,MAAK0B,KAAL,CAAW2W,CAAZ,CAArB;;EACA,UAAGjD,KAAK,CAAC,MAAKiD,CAAN,CAAR,EAAkB;EAChB,cAAKK,GAAL,GAAW,CAAX;EACD;EACF;;EATyB;EAU3B;;;;6BAEMvU,YAAY;EACjB,yEAAaA,UAAb;;EADiB,UAEXG,CAFW,GAEwC,IAFxC,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAEwC,IAFxC,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAEwC,IAFxC,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAEwC,IAFxC,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAEwC,IAFxC,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAEwC,IAFxC,CAEiBA,GAFjB;EAAA,UAEsBgU,CAFtB,GAEwC,IAFxC,CAEsBA,CAFtB;EAAA,UAEyBvT,UAFzB,GAEwC,IAFxC,CAEyBA,UAFzB;EAAA,UAIflC,OAJe,GAeb1D,KAfa,CAIf0D,OAJe;EAAA,UAKfoC,cALe,GAeb9F,KAfa,CAKf8F,cALe;EAAA,UAMfS,eANe,GAebvG,KAfa,CAMfuG,eANe;EAAA,UAOf5C,SAPe,GAeb3D,KAfa,CAOf2D,SAPe;EAAA,UAQfG,UARe,GAeb9D,KAfa,CAQf8D,UARe;EAAA,UASfC,UATe,GAeb/D,KAfa,CASf+D,UATe;EAAA,UAUfG,WAVe,GAeblE,KAfa,CAUfkE,WAVe;EAAA,UAWfwD,MAXe,GAeb1H,KAfa,CAWf0H,MAXe;EAAA,UAYfyB,WAZe,GAebnJ,KAfa,CAYfmJ,WAZe;EAAA,UAafC,eAbe,GAebpJ,KAfa,CAafoJ,eAbe;EAAA,UAcfnC,IAde,GAebjH,KAfa,CAcfiH,IAde;;EAgBjB,UAAGvD,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACAyT,MAAAA,OAAO,IAAI9W,KAAK,GAAG,GAAnB;EACA+W,MAAAA,OAAO,IAAInT,MAAM,GAAG,GAApB;EACAwU,MAAAA,CAAC,IAAIlN,IAAI,CAACgC,GAAL,CAASlN,KAAT,EAAgB4D,MAAhB,IAA0B,GAA/B;;EACA,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAAC4B,SAAJ,GAAgBE,IAAhB;EACA9B,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACsU,GAAJ,CAAQ5B,OAAR,EAAiBC,OAAjB,EAA0BqB,CAA1B,EAA6B,CAA7B,EAAgC,IAAIlN,IAAI,CAACgN,EAAzC;;EACA,YAAGhS,IAAI,KAAK,aAAZ,EAA2B;EACzB9B,UAAAA,GAAG,CAAC8B,IAAJ;EACD;;EACD,YAAGkC,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAdD,MAeK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/BgG,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,QAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOqV,OAAP,CADK,EAEL,CAAC,IAAD,EAAOC,OAAP,CAFK,EAGL,CAAC,GAAD,EAAMqB,CAAN,CAHK,EAIL,CAAC,MAAD,EAASlS,IAAT,CAJK,EAKL,CAAC,QAAD,EAAWS,MAAX,CALK,EAML,CAAC,cAAD,EAAiByB,WAAjB,CANK,EAOL,CAAC,kBAAD,EAAqBC,eAArB,CAPK;EAHe,SAAxB;EAaD;EACF;;;0BAEO;EACN,aAAO,KAAKoQ,GAAZ;EACD;;;;IAvEkB/K;;MCAfoL;;;;;EACJ,mBAAYtX,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,iFAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAKsX,IAAL,GAAY,CAAZ;;EACA,QAAG,MAAKtX,KAAL,CAAWuX,EAAd,EAAkB;EAChB,YAAKD,IAAL,GAAYhZ,UAAU,CAAC,MAAK0B,KAAL,CAAWuX,EAAZ,CAAtB;;EACA,UAAG7D,KAAK,CAAC,MAAK6D,EAAN,CAAR,EAAmB;EACjB,cAAKD,IAAL,GAAY,CAAZ;EACD;EACF;;EACD,UAAKE,IAAL,GAAY,CAAZ;;EACA,QAAG,MAAKxX,KAAL,CAAWyX,EAAd,EAAkB;EAChB,YAAKD,IAAL,GAAYlZ,UAAU,CAAC,MAAK0B,KAAL,CAAWyX,EAAZ,CAAtB;;EACA,UAAG/D,KAAK,CAAC,MAAK6D,EAAN,CAAR,EAAmB;EACjB,cAAKC,IAAL,GAAY,CAAZ;EACD;EACF;;EAhByB;EAiB3B;;;;6BAEM/U,YAAY;EACjB,0EAAaA,UAAb;;EADiB,UAEXG,CAFW,GAE6C,IAF7C,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAE6C,IAF7C,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAE6C,IAF7C,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAE6C,IAF7C,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAE6C,IAF7C,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAE6C,IAF7C,CAEiBA,GAFjB;EAAA,UAEsB4U,EAFtB,GAE6C,IAF7C,CAEsBA,EAFtB;EAAA,UAE0BE,EAF1B,GAE6C,IAF7C,CAE0BA,EAF1B;EAAA,UAE8BrU,UAF9B,GAE6C,IAF7C,CAE8BA,UAF9B;EAAA,UAIflC,OAJe,GAeb1D,KAfa,CAIf0D,OAJe;EAAA,UAKfoC,cALe,GAeb9F,KAfa,CAKf8F,cALe;EAAA,UAMfS,eANe,GAebvG,KAfa,CAMfuG,eANe;EAAA,UAOf5C,SAPe,GAeb3D,KAfa,CAOf2D,SAPe;EAAA,UAQfG,UARe,GAeb9D,KAfa,CAQf8D,UARe;EAAA,UASfC,UATe,GAeb/D,KAfa,CASf+D,UATe;EAAA,UAUfG,WAVe,GAeblE,KAfa,CAUfkE,WAVe;EAAA,UAWfwD,MAXe,GAeb1H,KAfa,CAWf0H,MAXe;EAAA,UAYfyB,WAZe,GAebnJ,KAfa,CAYfmJ,WAZe;EAAA,UAafC,eAbe,GAebpJ,KAfa,CAafoJ,eAbe;EAAA,UAcfnC,IAde,GAebjH,KAfa,CAcfiH,IAde;;EAgBjB,UAAGvD,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACAyT,MAAAA,OAAO,IAAI9W,KAAK,GAAG,GAAnB;EACA+W,MAAAA,OAAO,IAAInT,MAAM,GAAG,GAApB;EACAoV,MAAAA,EAAE,IAAIhZ,KAAK,GAAG,GAAd;EACAkZ,MAAAA,EAAE,IAAItV,MAAM,GAAG,GAAf;;EACA,UAAGM,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAAC4B,SAAJ,GAAgBE,IAAhB;EACA9B,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA3B,QAAAA,GAAG,CAACqC,MAAJ,CAAWqQ,OAAX,EAAoBC,OAApB;EACA3S,QAAAA,GAAG,CAAC+U,OAAJ,IAAe/U,GAAG,CAAC+U,OAAJ,CAAYrC,OAAZ,EAAqBC,OAArB,EAA8BiC,EAA9B,EAAkCE,EAAlC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,IAAIhO,IAAI,CAACgN,EAArD,CAAf;EACA9T,QAAAA,GAAG,CAAC8B,IAAJ;;EACA,YAAGkC,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAbD,MAcK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/BgG,QAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,UAAAA,IAAI,EAAE,MADgB;EAEtB5E,UAAAA,OAAO,EAAE,SAFa;EAGtBC,UAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOqV,OAAP,CADK,EAEL,CAAC,IAAD,EAAOC,OAAP,CAFK,EAGL,CAAC,IAAD,EAAOiC,EAAP,CAHK,EAIL,CAAC,IAAD,EAAOE,EAAP,CAJK,EAKL,CAAC,MAAD,EAAShT,IAAT,CALK,EAML,CAAC,QAAD,EAAWS,MAAX,CANK,EAOL,CAAC,cAAD,EAAiByB,WAAjB,CAPK,EAQL,CAAC,kBAAD,EAAqBC,eAArB,CARK;EAHe,SAAxB;EAcD;EACF;;;0BAEQ;EACP,aAAO,KAAK0Q,IAAZ;EACD;;;0BACQ;EACP,aAAO,KAAKE,IAAZ;EACD;;;;IAlFmBvL;;MCAhB0L;;;;;EACJ,gBAAY5X,OAAZ,EAAqBC,KAArB,EAA4B;EAAA;;EAAA;;EAC1B,8EAAMD,OAAN,EAAeC,KAAf,GAD0B;;EAG1B,UAAK4X,IAAL,GAAY,CAAZ;;EACA,QAAG,MAAK5X,KAAL,CAAW6X,EAAd,EAAkB;EAChB,YAAKD,IAAL,GAAYtZ,UAAU,CAAC,MAAK0B,KAAL,CAAW6X,EAAZ,CAAtB;;EACA,UAAGnE,KAAK,CAAC,MAAKmE,EAAN,CAAR,EAAmB;EACjB,cAAKD,IAAL,GAAY,CAAZ;EACD;EACF;;EACD,UAAKE,IAAL,GAAY,CAAZ;;EACA,QAAG,MAAK9X,KAAL,CAAW+X,EAAd,EAAkB;EAChB,YAAKD,IAAL,GAAYxZ,UAAU,CAAC,MAAK0B,KAAL,CAAW+X,EAAZ,CAAtB;;EACA,UAAGrE,KAAK,CAAC,MAAKqE,EAAN,CAAR,EAAmB;EACjB,cAAKD,IAAL,GAAY,CAAZ;EACD;EACF;;EAhByB;EAiB3B;;;;6BAEMrV,YAAY;EACjB,uEAAaA,UAAb;;EADiB,UAEXG,CAFW,GAE6C,IAF7C,CAEXA,CAFW;EAAA,UAERC,CAFQ,GAE6C,IAF7C,CAERA,CAFQ;EAAA,UAELtE,KAFK,GAE6C,IAF7C,CAELA,KAFK;EAAA,UAEE4D,MAFF,GAE6C,IAF7C,CAEEA,MAFF;EAAA,UAEU3E,KAFV,GAE6C,IAF7C,CAEUA,KAFV;EAAA,UAEiBmF,GAFjB,GAE6C,IAF7C,CAEiBA,GAFjB;EAAA,UAEsBkV,EAFtB,GAE6C,IAF7C,CAEsBA,EAFtB;EAAA,UAE0BE,EAF1B,GAE6C,IAF7C,CAE0BA,EAF1B;EAAA,UAE8B3U,UAF9B,GAE6C,IAF7C,CAE8BA,UAF9B;;EAGjB,UAAG7E,KAAK,IAAI,CAAT,IAAc4D,MAAM,IAAI,CAA3B,EAA8B;EAC5B;EACD;;EACD,UAAG0V,EAAE,GAAG,CAAL,IAAUE,EAAE,GAAG,CAAlB,EAAqB;EACnB;EACD;;EARgB,UAUf7W,OAVe,GAoBb1D,KApBa,CAUf0D,OAVe;EAAA,UAWfoC,cAXe,GAoBb9F,KApBa,CAWf8F,cAXe;EAAA,UAYfS,eAZe,GAoBbvG,KApBa,CAYfuG,eAZe;EAAA,UAaf5C,SAbe,GAoBb3D,KApBa,CAaf2D,SAbe;EAAA,UAcfG,UAde,GAoBb9D,KApBa,CAcf8D,UAde;EAAA,UAefC,UAfe,GAoBb/D,KApBa,CAef+D,UAfe;EAAA,UAgBfG,WAhBe,GAoBblE,KApBa,CAgBfkE,WAhBe;EAAA,UAiBfwD,MAjBe,GAoBb1H,KApBa,CAiBf0H,MAjBe;EAAA,UAkBfyB,WAlBe,GAoBbnJ,KApBa,CAkBfmJ,WAlBe;EAAA,UAmBfC,eAnBe,GAoBbpJ,KApBa,CAmBfoJ,eAnBe;;EAqBjB,UAAG1F,OAAO,KAAK,MAAf,EAAuB;EACrB;EACD;;EACD,UAAImU,OAAO,GAAGzS,CAAC,GAAGmB,eAAe,CAACnC,KAApB,GAA4BN,UAAU,CAACM,KAAvC,GAA+CF,WAAW,CAACE,KAAzE;EACA,UAAI0T,OAAO,GAAGzS,CAAC,GAAGS,cAAc,CAAC1B,KAAnB,GAA2BT,SAAS,CAACS,KAArC,GAA6CL,UAAU,CAACK,KAAtE;EACA,UAAIoW,IAAI,GAAG3C,OAAO,GAAG9W,KAArB;EACA,UAAI0Z,IAAI,GAAG3C,OAAO,GAAGnT,MAArB;EACA,UAAI+V,EAAE,GAAG,EAAT;EACA,UAAIC,EAAE,GAAG,EAAT;;EACA,UAAGN,EAAE,IAAI,CAAT,EAAY;EACV,YAAIO,GAAG,GAAG7Z,KAAK,IAAIsZ,EAAE,GAAG,CAAT,CAAf;;EACA,aAAI,IAAI/Y,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG+Y,EAAnB,EAAuB/Y,CAAC,EAAxB,EAA4B;EAC1BqZ,UAAAA,EAAE,CAACzY,IAAH,CAAQ2V,OAAO,GAAGvW,CAAC,GAAGsZ,GAAtB;EACD;EACF;;EACD,UAAGL,EAAE,IAAI,CAAT,EAAY;EACV,YAAIK,IAAG,GAAGjW,MAAM,IAAI4V,EAAE,GAAG,CAAT,CAAhB;;EACA,aAAI,IAAIjZ,EAAC,GAAG,CAAZ,EAAeA,EAAC,GAAGiZ,EAAnB,EAAuBjZ,EAAC,EAAxB,EAA4B;EAC1BoZ,UAAAA,EAAE,CAACxY,IAAH,CAAQ4V,OAAO,GAAGxW,EAAC,GAAGsZ,IAAtB;EACD;EACF;;EACD,UAAG3V,UAAU,KAAK4B,IAAI,CAAClH,MAAvB,EAA+B;EAC7BwF,QAAAA,GAAG,CAACmC,WAAJ,GAAkBI,MAAlB;EACAvC,QAAAA,GAAG,CAACkC,SAAJ,GAAgB8B,WAAhB;EACAhE,QAAAA,GAAG,CAACoC,WAAJ,CAAgB6B,eAAhB;EACAjE,QAAAA,GAAG,CAAC2B,SAAJ;EACA4T,QAAAA,EAAE,CAAC9X,OAAH,CAAW,UAAAnB,IAAI,EAAI;EACjB0D,UAAAA,GAAG,CAACqC,MAAJ,CAAWqQ,OAAX,EAAoBpW,IAApB;EACA0D,UAAAA,GAAG,CAACsC,MAAJ,CAAW+S,IAAX,EAAiB/Y,IAAjB;EACD,SAHD;EAIAkZ,QAAAA,EAAE,CAAC/X,OAAH,CAAW,UAAAnB,IAAI,EAAI;EACjB0D,UAAAA,GAAG,CAACqC,MAAJ,CAAW/F,IAAX,EAAiBqW,OAAjB;EACA3S,UAAAA,GAAG,CAACsC,MAAJ,CAAWhG,IAAX,EAAiBgZ,IAAjB;EACD,SAHD;;EAIA,YAAGtR,WAAW,IAAIzB,MAAM,KAAK,aAA7B,EAA4C;EAC1CvC,UAAAA,GAAG,CAACuC,MAAJ;EACD;;EACDvC,QAAAA,GAAG,CAAC+B,SAAJ;EACD,OAjBD,MAkBK,IAAGjC,UAAU,KAAK4B,IAAI,CAACjH,GAAvB,EAA4B;EAC/B8a,QAAAA,EAAE,CAAC9X,OAAH,CAAW,UAAAnB,IAAI,EAAI;EACjBmE,UAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,YAAAA,IAAI,EAAE,MADgB;EAEtB5E,YAAAA,OAAO,EAAE,MAFa;EAGtBC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOqV,OAAP,CADK,EAEL,CAAC,IAAD,EAAOpW,IAAP,CAFK,EAGL,CAAC,IAAD,EAAO+Y,IAAP,CAHK,EAIL,CAAC,IAAD,EAAO/Y,IAAP,CAJK,EAKL,CAAC,QAAD,EAAWiG,MAAX,CALK,EAML,CAAC,cAAD,EAAiByB,WAAjB,CANK,EAOL,CAAC,kBAAD,EAAqBC,eAArB,CAPK;EAHe,WAAxB;EAaD,SAdD;EAeAuR,QAAAA,EAAE,CAAC/X,OAAH,CAAW,UAAAnB,IAAI,EAAI;EACjBmE,UAAAA,UAAU,CAAC0E,OAAX,CAAmBpI,IAAnB,CAAwB;EACtBiF,YAAAA,IAAI,EAAE,MADgB;EAEtB5E,YAAAA,OAAO,EAAE,MAFa;EAGtBC,YAAAA,KAAK,EAAE,CACL,CAAC,IAAD,EAAOf,IAAP,CADK,EAEL,CAAC,IAAD,EAAOqW,OAAP,CAFK,EAGL,CAAC,IAAD,EAAOrW,IAAP,CAHK,EAIL,CAAC,IAAD,EAAOgZ,IAAP,CAJK,EAKL,CAAC,QAAD,EAAW/S,MAAX,CALK,EAML,CAAC,cAAD,EAAiByB,WAAjB,CANK,EAOL,CAAC,kBAAD,EAAqBC,eAArB,CAPK;EAHe,WAAxB;EAaD,SAdD;EAeD;EACF;;;0BAEQ;EACP,aAAO,KAAKgR,IAAZ;EACD;;;0BACQ;EACP,aAAO,KAAKE,IAAZ;EACD;;;0BACU;EACT,aAAO,KAAKO,MAAZ;EACD;;;;IA1HgBpM;;ECSnBA,IAAI,CAACqM,QAAL,CAAc,OAAd,EAAuBxD,IAAvB;EACA7I,IAAI,CAACqM,QAAL,CAAc,WAAd,EAA2BxC,QAA3B;EACA7J,IAAI,CAACqM,QAAL,CAAc,UAAd,EAA0B/B,OAA1B;EACAtK,IAAI,CAACqM,QAAL,CAAc,SAAd,EAAyBvB,MAAzB;EACA9K,IAAI,CAACqM,QAAL,CAAc,OAAd,EAAuBnB,IAAvB;EACAlL,IAAI,CAACqM,QAAL,CAAc,SAAd,EAAyBlB,MAAzB;EACAnL,IAAI,CAACqM,QAAL,CAAc,UAAd,EAA0BjB,OAA1B;EACApL,IAAI,CAACqM,QAAL,CAAc,OAAd,EAAuBX,IAAvB;EAEA,IAAIY,KAAK,GAAG;EACVlN,EAAAA,MADU,kBACHmN,EADG,EACCrF,GADD,EACM;EACd,QAAG,EAAEqF,EAAE,YAAYjF,EAAhB,CAAH,EAAwB;EACtB,YAAM,IAAInG,KAAJ,CAAU,mCAAV,CAAN;EACD;;EACD,QAAG+F,GAAH,EAAQ;EACNqF,MAAAA,EAAE,CAACC,QAAH,CAAYtF,GAAZ;EACD;;EACD,WAAOqF,EAAP;EACD,GATS;EAUVE,EAAAA,QAVU,oBAUD3Y,OAVC,EAUQC,KAVR,EAUe+H,QAVf,EAUyB;EACjC,QAAG,CAAC,QAAD,EAAW,KAAX,EAAkBY,OAAlB,CAA0B5I,OAA1B,IAAqC,CAAC,CAAzC,EAA4C;EAC1C,aAAO,IAAIwT,EAAJ,CAAOxT,OAAP,EAAgBC,KAAhB,EAAuB+H,QAAvB,CAAP;EACD;;EACD,QAAGyF,GAAG,CAACmL,OAAJ,CAAY5Y,OAAZ,CAAH,EAAyB;EACvB,aAAO,IAAIyN,GAAJ,CAAQzN,OAAR,EAAiBC,KAAjB,EAAwB+H,QAAxB,CAAP;EACD;;EACD,UAAM,IAAIqF,KAAJ,CAAU,yBAAyBrN,OAAnC,CAAN;EACD,GAlBS;EAmBV6Y,EAAAA,QAnBU,oBAmBD7Y,OAnBC,EAmBQC,KAnBR,EAmBe;EACvB,QAAI6Y,KAAK,GAAG5M,IAAI,CAAC6M,YAAL,CAAkB/Y,OAAlB,CAAZ;EACA,WAAO,IAAI8Y,KAAJ,CAAU9Y,OAAV,EAAmBC,KAAnB,CAAP;EACD,GAtBS;EAuBV+Y,EAAAA,QAvBU,oBAuBDC,EAvBC,EAuBGhZ,KAvBH,EAuBU;EAClB,WAAO,IAAIgZ,EAAJ,CAAOhZ,KAAP,CAAP;EACD,GAzBS;EA0BViM,EAAAA,IAAI,EAAJA;EA1BU,CAAZ;;EA6BA,IAAG,OAAO7N,MAAP,IAAiB,WAApB,EAAiC;EAC/BA,EAAAA,MAAM,CAACma,KAAP,GAAeA,KAAf;EACD;;;;;;;;"}